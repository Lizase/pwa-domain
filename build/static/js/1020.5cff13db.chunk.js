"use strict";(self.webpackChunkqc_app=self.webpackChunkqc_app||[]).push([[1020],{9415:(e,t,r)=>{r.d(t,{A:()=>l});r(5043);var i=r(5475),a=r(3003),o=r(579);const l=e=>{let{id:t,uuid:r,title:l,imageUrl:s,isLinkEnabled:n=!0,toggleSelectItem:c,onClick:d,mode:u}=e;const m=(0,a.d4)((e=>e.favorites.selectItem)).indexOf(t),h=-1!==m,p=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"relative aspect-[0.71]",onClick:()=>{c&&c(t),d&&d()},children:[h&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-50 z-10"}),h&&(0,o.jsx)("span",{className:"absolute top-0 right-0 m-1 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center z-20",children:m+1}),(0,o.jsx)("img",{loading:"lazy",src:s,alt:l||"Comic thumbnail",className:"object-cover w-full h-full"})]}),"indexLayout"===u?(0,o.jsx)("div",{className:"text-left mt-2 text-sm line-clamp-1",children:l}):(0,o.jsx)("div",{className:"text-left mt-2 text-sm line-clamp-2",children:l})]});return n?(0,o.jsx)(i.N_,{className:"flex flex-col",to:"/app/Comic",state:{uuid:r},children:p}):(0,o.jsx)("div",{className:"h-full w-full flex flex-col justify-between",children:p})}},9317:(e,t,r)=>{r.d(t,{A:()=>u});var i=r(4117),a=r(3910),o=r(7929),l=r(9415),s=r(5043),n=r(6222),c=r(3003),d=r(579);const u=(0,s.forwardRef)((e=>{let{title:t,loadMore:r,isLinkEnabled:u,toggleSelectItem:m,data:h,onReachBottom:p,onCardClick:x,lastPage:f=!1}=e;const{t:g}=(0,i.Bd)(),[v,b]=(0,s.useState)(!1),j=(0,s.useRef)(null),y=(0,c.d4)((e=>e.init.language));return(0,s.useEffect)((()=>{if(!j.current)return void console.log("Observer ref is not attached");const e=new IntersectionObserver((e=>{const t=e[0];console.log("Is intersecting:",t.isIntersecting),t.isIntersecting&&(b(!0),p&&p())}),{root:null,threshold:.5});return console.log("Observer attached to:",j.current),e.observe(j.current),f&&e.unobserve(j.current),()=>{j.current&&(console.log("Observer detached from:",j.current),e.unobserve(j.current))}}),[p]),h&&0!==h.length?(0,d.jsxs)("div",{className:"comic-map-container",children:[(0,d.jsxs)("div",{className:"flex px-4 items-end justify-between",children:[t&&(0,d.jsx)("h2",{className:"text-xl font-bold",children:t}),r&&(0,d.jsxs)("span",{className:"text-xs font-bold pl-4",children:[g("\u770b\u66f4\u591a"),(0,d.jsx)(a.g,{icon:o.vmR,className:"text-primary-active"})]})]}),(0,d.jsx)("div",{className:"flex flex-wrap px-2 pb-2",children:h.map(((e,t)=>{var r;return(0,d.jsx)("div",{className:"w-1/2 p-1",children:(0,d.jsx)(l.A,{id:e._id,uuid:e.ci_uuid?e.ci_uuid:e.uuid,title:(0,n.iz)(e,y),imageUrl:`https:${null!==(r=e.pic_big)&&void 0!==r?r:""}`,isLinkEnabled:u,toggleSelectItem:m,onClick:x})},t)}))}),(0,d.jsx)("div",{ref:j,className:"observer-target h-8"})]}):(console.log("No data available to display"),null)}))},4762:(e,t,r)=>{r.d(t,{A:()=>N});var i=r(5043),a=r(3216),o=r(1906),l=r(4535),s=r(7843),n=r(6446),c=r(8577),d=r(5865),u=r(3910),m=r(7929),h=r(4117),p=r(9055),x=r(611),f=r(3744),g=r(6691),v=r(3003),b=r(9961),j=r(8450),y=r(1132),k=r(7352),w=r(6222),_=r(579);const N=e=>{let{type:t,color:r}=e;const{t:N}=(0,h.Bd)(),A=(0,a.Zp)(),S=(0,v.wA)(),C=(0,v.d4)((e=>{var t;return null===(t=e.userInfo.userInfoData)||void 0===t?void 0:t.data})),I=(0,v.d4)((e=>e.video.videoInfoData)),D=(0,v.d4)((e=>e.comic.comicInfoData)),M=(0,v.d4)((e=>e.comic.currentChapter)),R=((0,v.d4)((e=>e.comic.pageInfoList)),(0,v.d4)((e=>e.comic.isDownload))),E=(0,v.d4)((e=>e.init.language)),[P,O]=(0,i.useState)(null),[z,B]=(D&&(null===D||void 0===D||D.comic_info.ci_uuid),(0,i.useState)(!1)),[T,$]=(0,i.useState)(""),[F,L]=(0,i.useState)(!1),[Z,W]=(0,i.useState)(!0),U=[(0,_.jsx)(o.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{A("/app/Recharge")},children:N("\u78ba\u8a8d")}),(0,_.jsx)(o.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{B(!1)},children:N("\u53d6\u6d88")})],Y=(e,t)=>{const r=null===D||void 0===D?void 0:D.comic_chapters.filter((e=>e.ci_chapter_order===t.ci_chapter_order)),i=null===D||void 0===D?void 0:D.comic_info.ci_uuid;if(S((0,g.t0)(Number(t.ci_chapter_order))),r&&i&&null!==C&&void 0!==C&&C.username)if(R){const e={uuid:i,chapter_uuid:r[0].ci_uuid};S((0,g.wU)(e)).then((e=>{var t;e.payload.error?C.point>=Number(null===(t=D.comic_info)||void 0===t?void 0:t.ci_point)||Number(C.ex_tickets.comic_download)>0?r&&i&&S((0,g.nF)({uuid:i,chapter_uuid:r[0].ci_uuid})).then((e=>{"ok"===e.payload.result?(0,j.E)(e.payload.result_msg,"error"):e.payload.error||(S((0,g.jY)(e.payload)),L(!0))})).catch((e=>{console.error("Fetch failed:",e)})):($(N("\u9ede\u6578\u3001\u4e0b\u8f09\u5238\u4e0d\u8db3\uff0c\u662f\u5426\u524d\u5f80\u52a0\u503c?")),B(!0)):H(!0)})).catch((e=>{console.log("downloadComic exception: ",e)}))}else S((0,g.gj)({uuid:i,cat:1,chapter_uuid:r[0].ci_uuid,view_type:0})).then((e=>{e.payload.error?(e=>{if(console.log("handlePlanSelectionOpen aaaaa"),C&&Object.keys(C).length>0){if(D&&D.comic_info&&Object.keys(D.comic_info).length>0&&D&&e.chapter){const t=null===D||void 0===D?void 0:D.comic_chapters.filter((t=>t.ci_chapter_order===e.chapter.toString())),r=null===D||void 0===D?void 0:D.comic_info.ci_uuid;t&&r&&S((0,g.nF)({uuid:r,chapter_uuid:t[0].ci_uuid})).then((e=>{"ok"===e.payload.result?(0,j.E)(e.payload.result_msg,"error"):e.payload.error||(S((0,g.jY)(e.payload)),L(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}}else A("/app/login")})({chapter:Number(t.ci_chapter_order)}):e.payload.infoList&&(A(`/app/comicPage/${Number(t.ci_chapter_order)}`),S((0,g.t0)(Number(t.ci_chapter_order))))})).catch((e=>{console.error("Fetch failed:",e)}));else A("/app/login")},[q,H]=(0,i.useState)(!1),X=P?Z?P:[...P].reverse():[];(0,i.useEffect)((()=>{D&&O([...null===D||void 0===D?void 0:D.comic_chapters])}),[D]),(0,i.useEffect)((()=>()=>{S((0,g.NZ)(!1))}),[]);const G=(0,l.Ay)(s.A)((e=>{let{theme:t}=e;return{width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:"#001e3c",width:32,height:32,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0}},"& .MuiSwitch-track":{opacity:1,backgroundColor:"#aab4be",borderRadius:10}}}));return(0,_.jsxs)(n.A,{className:(0,w.kW)(`${E}_m`),sx:{padding:"10px 1rem"},children:[(0,_.jsx)(n.A,{sx:{marginTop:"0px",display:"flex",alignItems:"center"},children:(0,_.jsxs)("div",{className:"flex justify-between w-full",children:[(0,_.jsx)("div",{className:"flex items-center",children:(0,_.jsx)(c.A,{control:(0,_.jsx)(G,{sx:{m:1},checked:R,onChange:e=>{S((0,g.NZ)(e.target.checked))},checkedIcon:(0,_.jsx)("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#984B4B",borderRadius:"50%"},children:(0,_.jsx)(y.A,{style:{color:"white",fontSize:"20px"}})}),icon:(0,_.jsx)("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#984B4B",borderRadius:"50%"},children:(0,_.jsx)(k.A,{style:{color:"white",fontSize:"20px"}})})}),label:N(R?"\u4e0b\u8f09":"\u7dda\u4e0a")})}),(0,_.jsxs)("div",{className:"flex items-center",children:[(0,_.jsx)(d.A,{sx:{color:"#fff",marginRight:"8px"},children:N("\u6392\u5e8f\uff1a")}),(0,_.jsxs)(o.A,{sx:{color:"#fff"},onClick:()=>{W(!Z)},children:[N(Z?"\u7531\u65b0\u81f3\u820a":"\u7531\u820a\u81f3\u65b0"),(0,_.jsx)(u.g,{icon:Z?m.GF6:m.tdl,style:{marginLeft:"8px"}})]})]})]})}),(0,_.jsx)(n.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px",marginTop:"5px"},children:null===X||void 0===X?void 0:X.map(((e,t)=>(0,_.jsxs)(o.A,{className:"button-shorted bg-background justify-between flex items-center",style:Number(e.ci_chapter_order)===M?{backgroundColor:"#878787",color:"#D3D3D3"}:{backgroundColor:r,color:p.T.primary.inactive},onClick:()=>Y(0,e),children:[(0,_.jsx)("span",{className:"flex-1 text-left",children:e.ci_name}),!e.has_permission&&(0,_.jsx)(u.g,{icon:m.DW4,className:"text-gray-200"})]},t)))}),(I&&I.data.point||D&&D.comic_info.ci_point)&&(0,_.jsx)(f.A,{open:F,setIsPlanSelectionOpen:L,costPoint:Number(D.comic_info.ci_point),type:R?"comicDownloadTicket":"comicOnlineTicket"}),(0,_.jsx)(x.A,{open:z,onClose:()=>B(!1),content:[T],buttons:U}),(0,_.jsx)(b.A,{open:q,onClose:()=>H(!1),title:N("\u8acb\u9078\u64c7\u60a8\u8981\u4e0b\u8f09\u7684\u6a94\u6848\u683c\u5f0f"),type:"comic"})]})}},2235:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var i=r(5043),a=r(3512),o=r(4117),l=r(6690),s=r(6448),n=r(9317),c=r(2112),d=r(3216),u=r(9418),m=r(4762),h=r(3744),p=r(611),x=r(3003),f=r(6691),g=r(9055),v=r(7003),b=r(579);const j=e=>{let{title:t,loadMore:r}=e;return(0,b.jsxs)("div",{className:"flex px-4 items-end justify-start w-full",children:[(0,b.jsx)("h2",{className:"text-xl font-bold whitespace-nowrap",children:t}),r&&(0,b.jsx)(v.A,{onLoadMore:r})]})};var y=r(3664),k=r(6222);const w=()=>{var e;const t=(0,d.zy)(),{uuid:v}=t.state||{},w=(0,x.wA)();(0,i.useEffect)((()=>{console.log(v),w((0,f.sx)(v))}),[w,v]);const _=(0,x.d4)((e=>e.comic.loading)),N=(0,x.d4)((e=>e.comic.comicInfoData)),A=(0,x.d4)((e=>e.comic.comicListData)),S=(0,x.d4)((e=>e.init.language)),{t:C}=(0,o.Bd)(),I=(0,d.Zp)(),[D,M]=(0,i.useState)(0),R=(0,x.d4)((e=>e.userInfo.userInfoData)),[E,P]=(0,i.useState)(!1),[O,z]=(0,i.useState)(!1),[B,T]=(0,i.useState)(""),[$,F]=(0,i.useState)(!1),[L,Z]=(0,i.useState)(0);(0,i.useEffect)((()=>{const e=Math.floor(Date.now()/1e3);Number(null===R||void 0===R?void 0:R.data.category_exp)>e||Number(null===R||void 0===R?void 0:R.data.category2_exp)>e?P(!0):P(!1)}));const W=(0,i.useMemo)((()=>[{key:"\u6f2b\u756b\u4ecb\u7d39",label:C("\u6f2b\u756b\u4ecb\u7d39"),content:N?(0,b.jsx)(u.A,{type:"comic",setTabIndex:Z}):null},{key:"\u76ee\u9304",label:C("\u76ee\u9304"),content:N&&N?(0,b.jsx)(m.A,{type:"online",color:g.T.background}):null}]),[v,N]);return(0,b.jsx)("div",{className:(0,k.kW)(`${S}_m`),children:_&&v?(0,b.jsx)("div",{children:(0,b.jsx)(y.A,{})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.A,{home:!0}),(0,b.jsxs)("div",{className:"relative aspect-[0.71]",children:[(0,b.jsx)("img",{loading:"lazy",src:`https:${null===N||void 0===N||null===(e=N.comic_info)||void 0===e?void 0:e.pic_big}`,alt:"Comic thumbnail",className:"object-cover w-full h-full",onError:e=>{e.target.onerror=null,e.target.src=r(497)}}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 px-4 py-2 bg-backgroundTrans text-white",children:(0,b.jsx)("p",{className:"text-xl font-bold",children:(0,k.iz)(null===N||void 0===N?void 0:N.comic_info,S)})})]}),(0,b.jsx)(s.A,{className:"button-full-flat active py-2",onClick:()=>{R&&R.data&&"object"===typeof R.data?I("/app/ComicPage/1"):I("/app/login")},children:(0,b.jsx)("span",{className:"text-xl font-bold",children:C("\u958b\u59cb\u95b1\u8b80")})}),!E&&(0,b.jsxs)("div",{className:"p-4 bg-focusText text-white flex items-center justify-between",style:{background:"linear-gradient(45deg, #49265b, #212c49, #000000)"},children:[(0,b.jsxs)("span",{className:"text-base",children:[C("CNY\xa5"),(0,b.jsx)("span",{className:"text-lg font-bold",children:"97"}),C("/\u6708 \u5168\u9928\u66a2\u770b!!!")]}),(0,b.jsx)(c.A,{})]}),(0,b.jsx)(l.A,{tabs:W,initialValue:L,setTabIndex:Z}),1!==D&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j,{title:C("\u66f4\u591a\u6f2b\u756b"),loadMore:()=>{I("/app?",{state:{categoryName:"\u6f2b\u756b"}})}}),(0,b.jsx)(n.A,{data:null===A||void 0===A?void 0:A.products,onCardClick:()=>{window.scrollTo({top:0,behavior:"auto"})}})]}),(0,b.jsx)(p.A,{open:O,onClose:()=>z(!1),content:[B]}),N&&N.comic_info&&(0,b.jsx)(h.A,{open:$,setIsPlanSelectionOpen:F,costPoint:N.comic_info.ci_point})]})})}},1637:(e,t,r)=>{r.d(t,{A:()=>C});var i=r(8587),a=r(5787),o=r(5043),l=r(8387),s=r(5049),n=r(3290),c=r(9848),d=r(6431),u=r(4535),m=r(4987),h=r(239);function p(e){return(0,h.Ay)("MuiCircularProgress",e)}(0,m.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var x=r(579);const f=["className","color","disableShrink","size","style","thickness","value","variant"];let g,v,b,j,y=e=>e;const k=44,w=(0,n.i7)(g||(g=y`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),_=(0,n.i7)(v||(v=y`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),N=(0,u.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,c.A)(r.color)}`]]}})((e=>{let{ownerState:t,theme:r}=e;return(0,a.A)({display:"inline-block"},"determinate"===t.variant&&{transition:r.transitions.create("transform")},"inherit"!==t.color&&{color:(r.vars||r).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,n.AH)(b||(b=y`
      animation: ${0} 1.4s linear infinite;
    `),w)})),A=(0,u.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),S=(0,u.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${(0,c.A)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:r}=e;return(0,a.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:r.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,n.AH)(j||(j=y`
      animation: ${0} 1.4s ease-in-out infinite;
    `),_)})),C=o.forwardRef((function(e,t){const r=(0,d.b)({props:e,name:"MuiCircularProgress"}),{className:o,color:n="primary",disableShrink:u=!1,size:m=40,style:h,thickness:g=3.6,value:v=0,variant:b="indeterminate"}=r,j=(0,i.A)(r,f),y=(0,a.A)({},r,{color:n,disableShrink:u,size:m,thickness:g,value:v,variant:b}),w=(e=>{const{classes:t,variant:r,color:i,disableShrink:a}=e,o={root:["root",r,`color${(0,c.A)(i)}`],svg:["svg"],circle:["circle",`circle${(0,c.A)(r)}`,a&&"circleDisableShrink"]};return(0,s.A)(o,p,t)})(y),_={},C={},I={};if("determinate"===b){const e=2*Math.PI*((k-g)/2);_.strokeDasharray=e.toFixed(3),I["aria-valuenow"]=Math.round(v),_.strokeDashoffset=`${((100-v)/100*e).toFixed(3)}px`,C.transform="rotate(-90deg)"}return(0,x.jsx)(N,(0,a.A)({className:(0,l.A)(w.root,o),style:(0,a.A)({width:m,height:m},C,h),ownerState:y,ref:t,role:"progressbar"},I,j,{children:(0,x.jsx)(A,{className:w.svg,ownerState:y,viewBox:"22 22 44 44",children:(0,x.jsx)(S,{className:w.circle,style:_,ownerState:y,cx:k,cy:k,r:(k-g)/2,fill:"none",strokeWidth:g})})}))}))},6676:(e,t,r)=>{r.d(t,{A:()=>o});var i=r(5043);function a(e,t){let{title:r,titleId:a,...o}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?i.createElement("title",{id:a},r):null,i.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const o=i.forwardRef(a)},2273:(e,t,r)=>{r.d(t,{A:()=>o});var i=r(5043);function a(e,t){let{title:r,titleId:a,...o}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?i.createElement("title",{id:a},r):null,i.createElement("path",{fillRule:"evenodd",d:"M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))}const o=i.forwardRef(a)}}]);
//# sourceMappingURL=1020.5cff13db.chunk.js.map