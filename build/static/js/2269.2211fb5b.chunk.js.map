{"version":3,"file":"static/js/2269.2211fb5b.chunk.js","mappings":"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","sources":["images/cancel.svg","pages/Interstitial/index.tsx"],"sourcesContent":["var _line, _line2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgCancel(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    height: 24,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _line || (_line = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 3,\n    y1: 3,\n    x2: 21,\n    y2: 21,\n    stroke: \"white\",\n    strokeWidth: 2\n  })), _line2 || (_line2 = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 3,\n    y1: 21,\n    x2: 21,\n    y2: 3,\n    stroke: \"white\",\n    strokeWidth: 2\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgCancel);\nexport default __webpack_public_path__ + \"static/media/cancel.576b632879f40dbfad71e35f2f927795.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from \"react\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport './Interstitial.css';\nimport cross from \"../../images/cancel.svg\";\nimport { RootState } from '../../store';\nimport { AppDispatch } from '../../store';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchAds } from '../../store/adsSlice';\nimport { fetchInit } from \"../../store/initSlice\";\nimport { bannerNavigate } from \"../../utils/helper\";\n\nconst Interstitial = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { t, i18n } = useTranslation();\n  const [countdown, setCountdown] = useState(3);\n  const [buttonDisabled, setButtonDisabled] = useState(true);\n\n  const dispatch:AppDispatch = useDispatch();\n  const adData = useSelector((state: RootState) => state.ads.adData);\n  const init = useSelector((state: RootState) => state.init.init);\n  const fromSite = useSelector((state: RootState) => state.init.fromSite);\n\n  const handleImgClick = (link: string) => {\n    const result = bannerNavigate(link);\n    console.log(result);\n    if (result !== null && typeof result === 'object') {\n      navigate(result?.route, {state: result?.state });\n    } else {\n      const a = document.createElement('a');\n      a.href = result;\n      a.target = '_blank'; // 或同分頁就是 '_self'\n      a.click();\n    }\n  }\n  \n  useEffect(() => {\n    console.log (\"new version: \", localStorage.getItem('app_version'));\n    console.log (\"fromSite: \", fromSite);\n    dispatch(fetchAds(62)); \n  }, [dispatch]);\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCountdown((prevCountdown) => prevCountdown - 1);\n    }, 1000);\n\n    setTimeout(() => {\n      setButtonDisabled(false);\n      clearInterval(timer);\n    }, 3500);\n\n    return () => {\n      clearInterval(timer);\n    };\n  },[adData]);\n\n  useEffect(() => {\n   console.log(adData);\n   console.log(init);\n  },[adData, init]);\n\n  //if (!adData?.data) {\n    //return(<div>loading...</div>);\n  //} else {\n    //console.log(adData);\n    return (\n      <div className=\"relative flex flex-col items-center h-screen w-full\">\n        <div className=\"ad-container relative w-full flex items-center justify-center\">\n          {adData[62] && Array.isArray(adData[62].data) && typeof adData[62].data[0] === \"object\" && adData[62].data[0] !== null ? (\n            adData[62]?.data[0]?.img_url.match(/\\.(mp4|webm|ogg)$/i) ? (\n              <video\n                className=\"ad-image\"\n                src={adData[62]?.data[0]?.img_url}\n                autoPlay\n                muted\n                loop\n                onError={(e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n                  const target = e.currentTarget;\n                  target.onerror = null; // Prevents infinite loop in case fallback also fails\n                  target.src = \"path/to/your/fallback-video.mp4\"; // Fallback video URL\n                }}\n              >\n                Your browser does not support the video tag.\n              </video>\n            ) : (\n              <div className=\"w-full h-full\" onClick={() => handleImgClick(adData[62]?.data[0]?.link_url)}>\n                <img\n                  className=\"ad-image object-contain\"\n                  src={`${init?.img_host}${adData[62]?.data[0]?.img_url}`}\n                  alt={adData[62]?.data[0]?.b_description}\n                  onError={(e: React.SyntheticEvent<HTMLImageElement, Event>) => {\n                    const target = e.currentTarget;\n                    target.onerror = null; // Prevents infinite loop in case fallback also fails\n                    target.src = \"https://via.placeholder.com/300?text=Image+Load+Failed\"; // Fallback image URL\n                  }}\n                />\n              </div>\n            )\n          ) : (\n            <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\">\n              {t('廣告載入中')}\n            </div>\n          )}\n          {buttonDisabled ? (\n            <div className=\"ad-message absolute top-1/3 right-1 transform -translate-x-1/2\">              \n            </div>\n          ) : (\n            <Link to=\"/app\">\n              <button className=\"ad-close-button\">\n                <object \n                  data={cross} \n                  type=\"image/svg+xml\" \n                  className=\"cross-icon\"\n                  style={{ pointerEvents: 'none', cursor: 'pointer' }}\n                ></object>\n              </button>\n            </Link>\n          )}\n        </div>\n        <div className=\"ad-close-info pt-3\">{t(`請等待 {{countdown}} 秒後，按右上關閉廣告`, {countdown})}</div>\n      </div>\n    );\n  }\n//};\nexport default Interstitial;\n"],"names":["Interstitial","_adData$","_adData$$data$","_adData$2","_adData$2$data$","_adData$4","_adData$4$data$","_adData$5","_adData$5$data$","useLocation","navigate","useNavigate","t","i18n","useTranslation","countdown","setCountdown","useState","buttonDisabled","setButtonDisabled","dispatch","useDispatch","adData","useSelector","state","ads","init","fromSite","useEffect","console","log","localStorage","getItem","fetchAds","timer","setInterval","prevCountdown","setTimeout","clearInterval","_jsxs","className","children","Array","isArray","data","img_url","match","_jsx","src","autoPlay","muted","loop","onError","e","target","currentTarget","onerror","onClick","_adData$3","_adData$3$data$","link","result","bannerNavigate","route","a","document","createElement","href","click","handleImgClick","link_url","img_host","alt","b_description","Link","to","cross","type","style","pointerEvents","cursor"],"sourceRoot":""}