(self.webpackChunkqc_app=self.webpackChunkqc_app||[]).push([[4310],{1635:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(5043),s=r(3910),i=r(7929),o=r(579);const l=()=>{const[e,t]=(0,n.useState)(!1),r=()=>{window.scrollY>300?t(!0):t(!1)};return(0,n.useEffect)((()=>(window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r))),[]),(0,o.jsx)(o.Fragment,{children:e&&(0,o.jsx)("div",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-[150px] right-[20px] w-[50px] h-[50px] bg-background text-white rounded-full flex items-center justify-center cursor-pointer shadow-lg animate-bounce",children:(0,o.jsx)(s.g,{icon:i.AWu,size:"lg",className:"text-gray-200"})})})}},467:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(5043),s=r(5475),i=r(4117),o=r(497),l=r(3003),a=r(579);const c=e=>{var t;let{id:r,uuid:c,title:d,imageUrl:u,preview:p,duration:f,actor:m,isLinkEnabled:x=!0,selectItems:v,toggleSelectItem:h,vWidth:g,cate:b,mode:y}=e;const j=null!==(t=null===v||void 0===v?void 0:v.indexOf(c))&&void 0!==t?t:-1,w=-1!==j,k=n.useRef([]),[S,N]=n.useState("vertical"),{t:A}=(0,i.Bd)();(0,l.wA)();n.useEffect((()=>{"vertical"!==g&&k.current.forEach((e=>{e&&(e.style.objectPosition="center")}))}),[g]);const E=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative w-full h-full overflow-hidden "+("\u6b50\u7f8e"===b||"\u6b27\u7f8e"===b?"aspect-[0.71]":"aspect-[1.49]"),id:c,onClick:()=>{h&&h(c)},children:[w&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-50 z-10"}),w&&(0,a.jsx)("span",{className:"absolute top-0 right-0 m-1 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center z-20",children:j+1}),(0,a.jsx)("div",{className:"map"!==y||"horizontal"!==S||"\u6b50\u7f8e"!==b&&"\u6b27\u7f8e"!==b?"w-full h-full relative":"w-full relative overflow-hidden pb-[70%]",style:{backgroundImage:`url(${o})`,backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsx)("img",{loading:"lazy",src:u,alt:d||"Video thumbnail",className:"object-cover w-full h-full",onLoad:e=>{const t=e.currentTarget;t.naturalWidth>t.naturalHeight?N("horizontal"):t.naturalWidth<t.naturalHeight&&N("vertical")},onError:e=>{e.target.onerror=null,e.target.src=o,e.target.style.objectPosition="center"},style:"map"!==y||"horizontal"!==S||"\u6b50\u7f8e"!==b&&"\u6b27\u7f8e"!==b?{objectPosition:"right",display:"block",width:"100%"}:{transform:"scale(2.11)",transformOrigin:"top right",display:"block",width:"100%",minHeight:250},ref:e=>k.current.push(e)})}),("\u5f37\u6a94\u7368\u5bb6"===b||"\u7368\u5bb6"===b||"\u5f3a\u6863\u72ec\u5bb6"===b||""===b)&&(0,a.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full text-white text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-2",style:{borderColor:"rgb(5, 247, 72)",backgroundColor:"rgb(49, 79, 4)"},children:A("\u7368")}),("\u4e2d\u6587\u5b57\u5e55"===b||b===A("\u4e2d\u6587\u5b57\u5e55")||"\u4e2d\u6587"===b)&&(0,a.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-fuchsia-500 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-fuchsia-500 border-2",children:A("\u4e2d")}),("\u7121\u78bc"===b||"\u65e0\u7801"===b)&&(0,a.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-sky-500 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-blue-500 border-2",children:A("\u7121")}),"\u81ea\u62cd"===b&&(0,a.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-lime-500 border-2",style:{color:"rgb(22, 204, 182)",borderColor:"rgb(22, 204, 182)"},children:A("\u81ea")}),!["\u5f3a\u6863\u72ec\u5bb6","\u65e0\u7801","\u5f37\u6a94\u7368\u5bb6","\u7368\u5bb6","\u4e2d\u6587\u5b57\u5e55","\u4e2d\u6587","\u7121\u78bc","\u81ea\u62cd"].includes(b||"")&&(0,a.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full bg-black text-secondary text-xxs p-0.5 w-8 h-8 flex items-center justify-center",children:"HD"}),(0,a.jsx)("p",{className:"absolute top-0 right-0 m-1 bg-backgroundTrans rounded text-primary-active text-xxs p-0.5",children:f||"00:00:00"})]}),(0,a.jsx)("div",{className:"text-left mt-1 text-sm flex-shrink-0 line-clamp-1 break-all",children:d}),m&&(0,a.jsx)("div",{className:"text-left mt-1 text-xs flex-shrink-0 line-clamp-1 h-5 text-red-400",children:m})]});return x?(0,a.jsx)(s.N_,{className:"h-full w-full flex flex-col justify-start",to:`/app/Video?uuid=${c}&cate=${b}&mode=${y}`,children:E}):(0,a.jsx)("div",{className:"h-full w-full flex flex-col justify-between",children:E})}},6837:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(4117),s=r(467),i=r(5043),o=r(3003),l=r(6222),a=r(579);const c=(0,i.forwardRef)(((e,t)=>{let{title:r,data:c,onReachBottom:d,isLinkEnabled:u,toggleSelectItem:p,selectItems:f,cate:m,currentPage:x,endPage:v,isSearch:h=!1,lastPage:g=!1}=e;const{t:b}=(0,n.Bd)(),y=(0,o.d4)((e=>e.init.language)),j=(0,o.d4)((e=>e.init.init)),[w,k]=(0,i.useState)(!1),S=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!S.current)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting&&(k(!0),d&&d())}),{root:null,threshold:.5});return e.observe(S.current),g&&e.unobserve(S.current),()=>{S.current&&e.unobserve(S.current)}}),[d,g]),c&&0!==c.length?(0,a.jsxs)("div",{id:"videoMapContainer",className:"video-map-container ",ref:t,children:[(0,a.jsx)("div",{className:"flex flex-wrap px-2 pb-2",children:null===c||void 0===c?void 0:c.map(((e,t)=>{var r;return(0,a.jsx)("div",{className:"w-full p-2",children:(0,a.jsx)(s.A,{id:e._id,uuid:e.uuid,imageUrl:`${null===j||void 0===j?void 0:j.img_host}/preview/80/b/${e.uuid}-800.jpg`,title:(0,l.iz)(e,y),preview:`https://tdtest84-ag.qcpro.vip/subpage/getMvPreview.php?uuid=${e.uuid}&v=1722229802`,duration:(0,l.WV)(e.time),actor:e.actor,isLinkEnabled:u,selectItems:f,toggleSelectItem:p,cate:null!==(r=(0,l.p7)(e))&&void 0!==r?r:"",mode:"map"})},t)}))}),(0,a.jsx)("div",{ref:S,className:"observer-target h-8"})]}):null}))},7054:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(5043),s=r(1119),i=r(4511),o=r(579);const l=e=>{let{data:t}=e;const[r,l]=(0,n.useState)(t[0].value);return(0,o.jsx)(s.A,{value:r,exclusive:!0,onChange:(e,t)=>{null!==t&&l(t)},"aria-label":"text alignment",sx:{display:"flex",justifyContent:"space-between",width:"6rem"},children:t.map(((e,t)=>(0,o.jsx)(i.A,{value:e.value,sx:{color:"white !important",padding:"1px",width:"2.5rem",borderBottom:r===e.value?"2px solid red":"none"},children:e.label},t)))})};var a=r(7003);const c=e=>{let{title:t,toggleButtons:r,videoCount:n,filterComponent:s,loadMore:i}=e;return(0,o.jsxs)("div",{className:"flex px-4 items-end justify-start w-full",children:[(0,o.jsx)("h2",{className:"text-xl font-bold whitespace-nowrap py-1",children:t}),r&&(0,o.jsx)(l,{data:r}),s&&s,i&&(0,o.jsx)(a.A,{onLoadMore:i})]})}},2281:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ue});var n=r(5043),s=r(4117),i=r(3216),o=r(392),l=r(2212),a=r(9610),c=r(611),d=r(3744),u=r(6448),p=r(3003),f=r(7550),m=r(7350),x=r(5721),v=r(1322),h=r(8734),g=r(4450),b=r(579);const y=e=>{let{handlePlaybackRateChange:t,playbackRate:r}=e;const[s,i]=(0,n.useState)(null),o=()=>{i(null)},l=Boolean(s),a=l?"settings-popover":void 0;return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:e=>{i(e.currentTarget)},style:{background:"none",border:"none",cursor:"pointer"},children:(0,b.jsx)(g.A,{})}),(0,b.jsx)(m.Ay,{id:a,open:l,anchorEl:s,onClose:o,disablePortal:!0,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},sx:{"& .MuiPaper-root":{backgroundColor:"transparent"}},children:(0,b.jsxs)(x.A,{className:"w-20 bg-gray-950 bg-opacity-70 text-gray-400 ",children:[(0,b.jsx)(v.Ay,{className:"!pb-0",children:(0,b.jsx)(h.A,{primary:"\u901f\u5ea6"})}),[.5,1,1.5,2].map((e=>(0,b.jsx)(v.Ay,{className:"!pb-0 "+(r===e?"text-white":""),onClick:()=>(e=>{t(e),o()})(e),children:(0,b.jsx)(h.A,{primary:`${e}x`})},e)))]})})]})};var j=r(1906),w=r(3564),k=r(4593);const S=e=>{let{playing:t,setPlaying:r}=e;return(0,b.jsx)("div",{className:"relative flex justify-center items-center w-18 h-18 rounded-lg bg-gray-900/30",style:{borderRadius:"60%"},children:(0,b.jsx)(j.A,{variant:"contained",color:"primary",onClick:()=>{r(!t)},disableElevation:!0,className:"!bg-white !bg-opacity-0",style:{display:"block",paddingLeft:0,paddingRight:0},children:t?(0,b.jsx)(w.A,{sx:{fontSize:"40px"}}):(0,b.jsx)(k.A,{sx:{fontSize:"40px"}})})})};var N=r(5257),A=r(8225);const E=e=>{let{playerContainerRef:t,isFullscreen:r,setIsFullscreen:n}=e;return(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("button",{onClick:()=>{n(!r)},style:{background:"none",border:"none",cursor:"pointer"},children:r?(0,b.jsx)(N.A,{}):(0,b.jsx)(A.A,{})})})};var R=r(3841),C=r(7139);const P=e=>{let{isMuted:t,setIsMuted:r}=e;return(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("button",{onClick:()=>{r((e=>!e))},style:{background:"none",border:"none",cursor:"pointer"},children:t?(0,b.jsx)(R.A,{}):(0,b.jsx)(C.A,{})})})};var I=r(4535),T=r(6446),F=r(5865),_=r(4834),z=r(6222);const O=e=>{let{videojsRef:t,playerRef:r,setSeeking:s,setPlayed:i,played:o,isSlice:l}=e;const[a,c]=(0,n.useState)(0),d=(0,p.d4)((e=>{var t;return null===(t=e.video.videoInfoData)||void 0===t?void 0:t.data.time})),u=(0,I.Ay)(T.A)((e=>{let{width:t}=e;return{position:"absolute",height:"2px",backgroundColor:"#9D9D9D",opacity:"0.7",width:`${t}%`,zIndex:"20",transition:"width 0.3s ease"}})),f=(0,I.Ay)(F.A)({fontSize:"0.75rem",opacity:.6,fontWeight:500,letterSpacing:.2});(0,n.useEffect)((()=>{}),[o]);const[m,x]=(0,n.useState)(0);return(0,n.useEffect)((()=>{var e;const t=()=>{r.current&&(i(parseFloat((r.current.currentTime/r.current.duration).toFixed(2))),x(Math.ceil(Number(r.current.currentTime))))};return null===(e=r.current)||void 0===e||e.addEventListener("timeupdate",t),()=>{var e;null===(e=r.current)||void 0===e||e.removeEventListener("timeupdate",t)}}),[r.current]),(0,n.useEffect)((()=>{let e;return e=setInterval((()=>{null!==t&&void 0!==t&&t.current&&(()=>{const r=null===t||void 0===t?void 0:t.current;if(!r)return;const n=()=>{const e=r.currentTime(),t=r.duration();(0,z.gf)(e)&&(0,z.gf)(t)&&(i(parseFloat((e/t).toFixed(2))),x(Math.ceil(Number(e))))};r.on("timeupdate",n),clearInterval(e)})()}),100),()=>{clearInterval(e)}}),[]),(0,b.jsxs)("div",{className:"flex flex-col w-[100%]",children:[(0,b.jsxs)(T.A,{sx:{width:"100%",padding:"0px",position:"relative",display:"flex",alignItems:"center"},children:[(0,b.jsx)(u,{width:a}),(0,b.jsx)(_.Ay,{step:.01,min:0,max:1,value:o,onTouchStart:()=>{s(!0)},onChangeCommitted:(e,n)=>{if(t&&t.current){const e=t.current,r=e.duration();if(!e||!(0,z.gf)(n)||!(0,z.gf)(r))return;e.currentTime(r*n),s(!1)}const i=r.current;i&&(0,z.gf)(n)&&(0,z.gf)(i.duration)&&(i.currentTime=i.duration*n,s(!1))},onChange:(e,t)=>{"number"===typeof t&&i(t)},size:"small",sx:e=>({color:"#fff",opacity:1,height:3,zIndex:30,"& .MuiSlider-thumb":{width:8,height:8,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)",zIndex:30,"&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(255 255 255 / 16%)",...e.applyStyles("dark",{boxShadow:"0px 0px 0px 8px rgb(255 255 255 / 16%)"})},"&.Mui-active":{width:20,height:20}},"& .MuiSlider-rail":{zIndex:10,color:"rgb(3, 3, 3)",height:"4px",opacity:.3},...e.applyStyles("dark",{color:"#fff"})})})]}),(0,b.jsxs)(T.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:-1.5},children:[(0,b.jsx)(f,{children:(0,z.WV)(m)}),(0,b.jsx)(f,{children:l?(0,z.WV)(Number(600)):(0,z.WV)(Number(d))})]})]})};var L=r(4477),M=r(9788);const $=(0,n.forwardRef)(((e,t)=>{let{src:r,width:s="100%",height:i="auto",playing:o=!1,muted:l=!1,controls:a=!0,playbackRate:c=1,onProgress:d,isFullscreen:u}=e;const p=(0,n.useRef)(null),f=(0,n.useRef)(null),m=r.includes(".m3u8");return(0,n.useImperativeHandle)(t,(()=>p.current)),(0,n.useEffect)((()=>{const e=p.current;if(e)if(m)if(e.canPlayType("application/vnd.apple.mpegurl"))e.src=r;else{if(M.Ay.isSupported()){const t=new M.Ay;return f.current=t,t.loadSource(r),t.attachMedia(e),()=>{t.destroy()}}console.error("HLS is not supported in this browser.")}else e.src=r}),[r]),(0,n.useEffect)((()=>{const e=p.current;e&&(o?e.play().catch(console.error):e.pause())}),[o]),(0,n.useEffect)((()=>{const e=p.current;e&&(e.muted=l)}),[l]),(0,n.useEffect)((()=>{const e=p.current;e&&(e.playbackRate=c)}),[c]),(0,n.useEffect)((()=>{const e=p.current;if(!e||!d)return;const t=()=>{d(e.currentTime,e.duration)};return e.addEventListener("timeupdate",t),()=>{e.removeEventListener("timeupdate",t)}}),[d]),(0,b.jsx)("div",{style:{position:"relative",width:s,height:i},children:(0,b.jsx)("video",{ref:p,controls:a,style:{width:s,height:i,backgroundColor:"black",objectFit:"cover"},playsInline:!0,"webkit-playsinline":"true",poster:"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBA=="})})})),q="CustomPlayer_player-wrapper__x--Uw",D="CustomPlayer_video-container__qrLsJ",H="CustomPlayer_full-screen__C5MvI";r(1076);const B=(0,n.forwardRef)(((e,t)=>{let{src:r,playing:s,muted:i,controls:o,playbackRate:l,onShowControlBtn:a}=e;const c=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>c.current)),(0,n.useEffect)((()=>{if(c.current){const e=c.current,t=new M.Ay;t.loadSource(r),t.attachMedia(e)}}),[r]),(0,n.useEffect)((()=>{if(c.current){const e=c.current;s?e.play():e.pause(),e.muted=null===i||void 0===i||i,e.controls=null!==o&&void 0!==o&&o,e.playbackRate=null!==l&&void 0!==l?l:1}}),[s,l,i,o]);(0,n.useRef)(null);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("a-scene",{embedded:!0,"vr-mode-ui":"enabled: true","device-orientation-permission-ui":"enabled: true",children:[(0,b.jsx)("a-camera",{position:"0 1.6 0","look-controls":"pointerLockEnabled: true; reverseMouseDrag: false","wasd-controls":!0,children:(0,b.jsx)("a-cursor",{color:"black"})}),(0,b.jsx)("a-assets",{children:(0,b.jsx)("video",{id:"videoElement",ref:c,crossOrigin:"anonymous",loop:!0,playsInline:!0,"webkit-playsinline":!0})}),(0,b.jsx)("a-videosphere",{src:"#videoElement",radius:"5000",rotation:"0 180 0",geometry:"primitive: sphere"}),(0,b.jsx)("a-light",{type:"ambient",color:"#888"}),(0,b.jsx)("a-light",{type:"directional",position:"0 1 1"})]})})}));var V=r(4637);const W=e=>{let{handleSeek:t}=e;return(0,b.jsx)("div",{className:"relative flex justify-center items-center w-10 h-10 rounded-lg bg-gray-900/30",style:{borderRadius:"50%"},children:(0,b.jsx)(j.A,{variant:"contained",color:"primary",onClick:()=>{t(-10)},className:"!bg-white !bg-opacity-0",disableElevation:!0,children:(0,b.jsx)(V.A,{sx:{fontSize:"30px"}})})})};var U=r(673);const Z=e=>{let{handleSeek:t}=e;return(0,b.jsx)("div",{className:"relative flex justify-center items-center w-10 h-10 rounded-lg bg-gray-900/30",style:{borderRadius:"50%"},children:(0,b.jsx)(j.A,{variant:"contained",color:"primary",onClick:()=>{t(10)},className:"!bg-white !bg-opacity-0",disableElevation:!0,children:(0,b.jsx)(U.A,{sx:{fontSize:"30px",color:"rgb(255, 255, 255)"}})})})};var J=r(5956);r(6200);const Y=e=>e.includes("m3u8")?"application/x-mpegURL":(e.includes("mp4"),"video/mp4"),G=(0,n.forwardRef)(((e,t)=>{let{src:r,width:s="100%",height:i="auto",playing:o=!1,muted:l=!1,controls:a=!0,playbackRate:c=1,onProgress:d,videoTime:u=0}=e;const p=(0,n.useRef)(null),f=(0,n.useRef)(null);return(0,n.useEffect)((()=>{p.current&&!f.current&&(f.current=(0,J.A)(p.current,{controls:a,muted:l}),f.current.on("timeupdate",(()=>{if(d){const e=f.current;d(e.currentTime()||0,e.duration()||0)}})))}),[a,l,d]),(0,n.useEffect)((()=>{const e=f.current;e&&(e.pause(),e.src({src:r,type:Y(r)}),e.load())}),[r]),(0,n.useEffect)((()=>{const e=f.current;var t;e&&(o?null===e||void 0===e||null===(t=e.play())||void 0===t||t.catch(console.error):e.pause())}),[o]),(0,n.useEffect)((()=>()=>{var e;null===(e=f.current)||void 0===e||e.dispose(),f.current=null}),[]),(0,n.useEffect)((()=>{const e=f.current;if(!e)return;if(e.readyState()>=1)return void e.currentTime(u);const t=()=>{e.currentTime(u),e.off("loadedmetadata",t)};e.one("loadedmetadata",t)}),[u]),(0,n.useEffect)((()=>{const e=f.current;if(!e)return;if(e.readyState()>=1)return void e.playbackRate(c);const t=()=>{e.playbackRate(c),e.off("loadedmetadata",t)};e.one("loadedmetadata",t)}),[c]),(0,n.useEffect)((()=>{const e=f.current;if(!e)return;if(e.readyState()>=1)return void e.muted(l);const t=()=>{e.muted(l),e.off("loadedmetadata",t)};e.one("loadedmetadata",t)}),[l]),(0,n.useImperativeHandle)(t,(()=>f.current)),(0,b.jsx)("div",{style:{position:"relative",width:s,height:i},children:(0,b.jsx)("video",{ref:p,className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black"}})})}));var Q=r(3491),K=r.n(Q);r(5223);const X=(0,n.forwardRef)(((e,t)=>{let{src:r,width:s="100%",height:i="auto",playing:o=!1,muted:l=!1,controls:a=!0,playbackRate:c=1,onProgress:d,isFullscreen:u}=e;const p=(0,n.useRef)(null),f=(0,n.useRef)(null),m=(0,n.useRef)(null),[x,v]=(0,n.useState)(!1);(0,n.useImperativeHandle)(t,(()=>p.current));const h=r.includes("m3u8");return(0,n.useEffect)((()=>{const e=p.current;if(e)if(f.current||(f.current=new(K())(e,{controls:a?["play","progress","current-time","mute","volume","fullscreen"]:[]}),d&&f.current.on("timeupdate",(()=>{d(f.current.currentTime,f.current.duration)}))),h&&M.Ay.isSupported()){m.current&&(m.current.destroy(),m.current=null);const t=new M.Ay;m.current=t,t.loadSource(r),t.attachMedia(e)}else e.src=r,e.load()}),[r]),(0,n.useEffect)((()=>{console.log(o);const e=f.current;e&&(o?e.play().catch(console.error):e.pause())}),[o]),(0,n.useEffect)((()=>{const e=f.current;e&&(e.muted=l)}),[l]),(0,n.useEffect)((()=>{const e=f.current;e&&(e.speed=c)}),[c]),(0,n.useEffect)((()=>{const e=f.current;if(!e||!d)return;const t=()=>{d(e.currentTime,e.duration)};return e.on("timeupdate",t),()=>{e.off("timeupdate",t)}}),[d]),(0,b.jsx)("div",{style:{position:"relative",width:s,height:i},children:(0,b.jsx)("video",{ref:p,style:{width:"100%",height:"100%",objectFit:"cover"},playsInline:!0,controls:!1})})})),ee=e=>{var t,s,o;let{url:m,videoRef:x,videojsRef:v,setPlayPermission:h,setPlaying:g,playing:j,setPlayed:w,played:k,isFullscreen:N,setIsFullscreen:A,isSlice:R,videoTime:C}=e;const I=(0,p.wA)(),{userInfo:T,checkUserOwnProduct:F}=(0,f.A)(),_=(0,p.d4)((e=>e.video.videoInfoData)),M=(0,p.d4)((e=>e.video.videoUrl)),V=(0,p.d4)((e=>e.init.marqueeHeight)),U=((0,p.d4)((e=>e.init.appbarHeight)),(0,p.d4)((e=>e.init.init))),J=(0,p.d4)((e=>e.init.player)),[Y,Q]=(0,n.useState)(!1),[K,ee]=(0,n.useState)(""),[te,re]=(0,n.useState)(!1),[ne,se]=(0,n.useState)(!1),[ie,oe]=(0,n.useState)(""),le=()=>{var e;null===_||void 0===_||null===(e=_.data)||void 0===e||e.uuid;se(!1),re(!0)},ae=(0,n.useMemo)((()=>[(0,b.jsx)(u.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{ce("/app/recharge")},children:"\u524d\u5f80\u52a0\u503c"}),(0,b.jsx)(u.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:le,children:"\u4f7f\u7528\u7968\u5238\u9ede\u6578"})]),[]),ce=(0,i.Zp)(),de=[(0,b.jsx)(u.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{ce("/app/Recharge")},children:"\u78ba\u8a8d"}),(0,b.jsx)(u.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{Q(!1)},children:"\u53d6\u6d88"})];(0,n.useEffect)((()=>{I((0,L.f8)(""))}),[null===_||void 0===_||null===(t=_.data)||void 0===t?void 0:t.uuid]);const ue=()=>{if(T&&T.data&&0===Number(T.code)&&Object.keys(T.data).length>0&&_){const e=null===_||void 0===_?void 0:_.data.cuts[0];e&&I((0,L.cj)({num:_.data.uuid,ms_id:e.ms_id,file_prefix:e.file_prefix,start:e.start,end:Number(e.end),cat_id:Number(e.cat_id),quality:Number(_.data.qualitys.split(",")[0]),token:e.token,playall:R?0:1})).then((e=>{const t=e.payload;if(t.error){if(_){(null===_||void 0===_?void 0:_.data.uuid)&&(oe(t.error),se(!0))}}else h(!0),g(!0)})).catch((e=>{console.log("getMv exception: ",e)}))}else ce("/app/login")},pe=(0,n.useRef)(null),[fe,me]=(0,n.useState)(!1),[xe,ve]=(0,n.useState)(1),[he,ge]=(0,n.useState)(!1),[be,ye]=n.useState(null),je=e=>{if(null!==v&&void 0!==v&&v.current){const t=v.current,r=t.currentTime(),n=t.duration();(0,z.gf)(r)&&(0,z.gf)(n)&&(t.currentTime(r+e),w(parseFloat((r/n).toFixed(2))))}if(x.current){const t=x.current,r=t.currentTime;t.currentTime=r+e,w(parseFloat((t.currentTime/t.duration).toFixed(2)))}},we=(e,t)=>{he||w(parseFloat((e/t).toFixed(2)))},[ke,Se]=(0,n.useState)(!1),Ne=()=>{Se(!ke)},[Ae,Ee]=(0,n.useState)(0);return(0,n.useEffect)((()=>{var e;const t=()=>{x.current&&w(parseFloat((x.current.currentTime/x.current.duration).toFixed(2)))};return null===(e=x.current)||void 0===e||e.addEventListener("timeupdate",t),()=>{var e;null===(e=x.current)||void 0===e||e.removeEventListener("timeupdate",t)}}),[x.current]),(0,n.useEffect)((()=>{var e;if(!v)return;const t=()=>{if(v.current){const e=v.current.currentTime(),t=v.current.duration();(0,z.gf)(e)&&(0,z.gf)(t)&&w(parseFloat((e/t).toFixed(2)))}};return null===(e=v.current)||void 0===e||e.on("timeupdate",t),()=>{var e;null===(e=v.current)||void 0===e||e.off("timeupdate",t)}}),[null===v||void 0===v?void 0:v.current]),n.useEffect((()=>{const e=navigator.userAgent.toLowerCase();e.indexOf("iphone")>-1||e.indexOf("ipod")>-1||e.indexOf("ipad")>-1?ye("iOS"):e.indexOf("android")>-1?ye("Android"):ye("Unknown")}),[]),(0,n.useEffect)((()=>{console.log("videoPlayer: ",M),console.log("videoPlayer: ",ke)}),[M,ke]),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:`${q} aspect[1.49]`,style:{marginTop:`${"iOS"!==be?V:0}px`},children:[(0,b.jsxs)("div",{ref:pe,className:`${D} ${N?H:""}`,style:{zIndex:"300"},onClick:Ne,children:[!M&&((0,z.qZ)(_)?(0,b.jsx)("div",{className:"flex justify-center items-center",onClick:ue,style:{position:"absolute",zIndex:10,height:"4rem",width:"4rem",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"linear-gradient(45deg, #050202, #213d28db)",boxShadow:"inset 3px -3px 5px #044b056b, 3px 3px 60px #c2db93",borderRadius:"50%",border:"2px solid #baffcf41"},children:(0,b.jsx)(l.A,{sx:{fontSize:"4rem",color:"rgb(95 215 0)"}})}):(0,b.jsx)(a.A,{onClick:ue,style:{position:"absolute",zIndex:20,fontSize:"5rem",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})),M?null!==_&&void 0!==_&&_.data.tag_vr?(0,b.jsx)("div",{onTouchStart:e=>{e.stopPropagation(),Ne()},style:{width:"100%",height:"100%"},children:(0,b.jsx)(B,{ref:x,src:null!==M&&void 0!==M?M:"",width:"100%",height:"100%",playing:j,muted:fe,controls:!1,playbackRate:xe,onProgress:()=>we,isFullscreen:N,onShowControlBtn:Ne})}):(0,b.jsxs)("div",{style:{width:"100%",height:"100%"},onTouchStart:e=>{e.stopPropagation(),Ne()},children:["JW"===J&&(0,b.jsx)($,{ref:x,src:null!==M&&void 0!==M?M:"",width:"100%",height:"100%",playing:j,muted:fe,controls:!1,playbackRate:xe,onProgress:()=>we,isFullscreen:N}),"VideoJS"===J&&(0,b.jsx)(G,{ref:v,src:null!==M&&void 0!==M?M:"",width:"100%",height:"100%",playing:j,muted:fe,controls:!1,playbackRate:xe,onProgress:()=>we,isFullscreen:N,videoTime:C}),"Plyr"===J&&(0,b.jsx)(X,{ref:x,src:null!==M&&void 0!==M?M:"",width:"100%",height:"100%",playing:j,muted:fe,controls:!1,playbackRate:xe,onProgress:()=>we,isFullscreen:N})]}):(0,b.jsx)("img",{loading:"lazy",src:`${null===U||void 0===U?void 0:U.img_host}/preview/80/b/${null===_||void 0===_||null===(s=_.data)||void 0===s?void 0:s.uuid}-800.jpg`,alt:"Video thumbnail",className:"w-full h-full "+((0,z.bh)(_)?"object-contain":"object-cover"),style:{},onError:e=>{e.target.onerror=null,e.target.src=r(497)}}),M&&ke&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"absolute flex justify-center items-center gap-x-10",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%"},onClick:e=>{e.stopPropagation()},children:[(0,b.jsx)(W,{handleSeek:je}),(0,b.jsx)(S,{playing:j,setPlaying:g}),(0,b.jsx)(Z,{handleSeek:je})]}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-b from-transparent to-black p-0 pb-2 flex flex-col",onClick:e=>{e.stopPropagation()},children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-1 mx-4",children:(0,b.jsx)(O,{playerRef:x,videojsRef:v,setSeeking:ge,setPlayed:w,played:k,isSlice:R})}),(0,b.jsxs)("div",{className:"flex gap-x-3",children:[(0,b.jsx)(E,{playerContainerRef:pe,isFullscreen:N,setIsFullscreen:A}),(0,b.jsx)(P,{isMuted:fe,setIsMuted:me}),(0,b.jsx)(y,{playbackRate:xe,handlePlaybackRateChange:e=>{ve(e)}})]})]})})]})]}),(0,b.jsx)(c.A,{open:Y,onClose:()=>Q(!1),content:[K],buttons:de}),_&&(null===_||void 0===_||null===(o=_.data)||void 0===o?void 0:o.point)&&(0,b.jsx)(d.A,{open:te,setIsPlanSelectionOpen:re,costPoint:Number(_.data.point),type:"videoOnlineTicket"}),(0,b.jsx)(c.A,{open:ne,onClose:()=>se(!1),content:[(0,b.jsx)("div",{className:"p-6 text-md",children:ie})],buttons:ae})]})})};var te=r(9418),re=r(6690),ne=r(6837),se=r(2112),ie=r(7054),oe=r(3664),le=r(8450),ae=r(497);const ce=e=>{let{videoRef:t,videojsRef:r,setPlayed:o,setPlaying:l,isSlice:a,setVideoTime:c}=e;const{t:u}=(0,s.Bd)(),f=(0,p.d4)((e=>{var t;return null===(t=e.video.videoInfoData)||void 0===t?void 0:t.data})),m=(0,p.d4)((e=>{var t;return null===(t=e.userInfo.userInfoData)||void 0===t?void 0:t.data})),x=(0,i.Zp)(),v=(0,p.wA)(),[h,g]=(0,n.useState)(0),[y,j]=(0,n.useState)(0),w=(0,n.useRef)({}),[k,S]=(0,n.useState)(!1),[N,A]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=t.current;if(!e)return;const r=()=>{console.log("\u5f71\u7247\u64ad\u5b8c\u4e86"),console.log(h),E(0,h)};return e.addEventListener("ended",r),()=>{e.removeEventListener("ended",r)}}),[t.current,h]),(0,n.useEffect)((()=>{const e=null===r||void 0===r?void 0:r.current;if(!e)return;const t=()=>{console.log("\u5f71\u7247\u64ad\u5b8c\u4e86"),console.log(h),E(0,h)};return e.on("ended",t),()=>{e.off("ended",t)}}),[null===r||void 0===r?void 0:r.current,h]);const E=(e,t)=>{if(c(0),l(!1),m&&"object"===typeof m&&Object.keys(m).length>0&&f){const r=null===f||void 0===f?void 0:f.cuts[t];if(r){j(e),g(t+1);let n=`${f.uuid}`;if(w.current[n]&&!a)return void S(!0);v((0,L.cj)({num:f.uuid,ms_id:r.ms_id,file_prefix:r.file_prefix,start:r.start,end:Number(r.end),cat_id:Number(r.cat_id),quality:Number(f.qualitys.split(",")[0]),token:r.token,playall:a?0:1})).then((e=>{if(e.payload.error){if(f){const e=null===f||void 0===f?void 0:f.uuid;e&&v((0,L.Zr)({num:e})).then((e=>{"ok"===e.payload.result?(0,le.E)(e.payload.result_msg,"error"):e.payload.error||(v((0,L.LI)(e.payload)),A(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}}else a||(w.current[n]=!0),S(!0)})).catch((e=>{console.log("getMv exception: ",e)}))}}else x("/app/login")};return(0,n.useEffect)((()=>{if(k){if(a){if(l(!0),t&&t.current){const e=t.current;setTimeout((()=>{e.play().then((()=>{l(!0)})).catch((e=>{console.error("\u64ad\u653e\u5931\u8d25:",e)}))}),100)}}else if(l(!0),c&&(console.log("start: ",y),c(y)),t&&t.current){const e=t.current;if(e.readyState>=2)setTimeout((()=>{e.play().then((()=>{l(!0),e.currentTime=y,o(parseFloat((e.currentTime/e.duration).toFixed(2)))})).catch((e=>{console.error("\u64ad\u653e\u5931\u8d25:",e)}))}),100);else{const t=()=>{e.currentTime=y,o(parseFloat((e.currentTime/e.duration).toFixed(2))),e.removeEventListener("loadedmetadata",t)};e.addEventListener("loadedmetadata",t),setTimeout((()=>{e.play().then((()=>{l(!0)})).catch((e=>{console.error("\u64ad\u653e\u5931\u8d25:",e)}))}),100)}}S(!1)}}),[k]),(0,n.useEffect)((()=>{a||(w.current={})}),[a]),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex flex-wrap px-2 pb-2",children:f&&f.cuts.map(((e,t)=>0!==t&&(0,b.jsx)("div",{className:"w-1/2 p-2",onClick:()=>E(e.start,t),children:(0,b.jsxs)("div",{className:"relative w-full",style:{height:"86%"},children:[(0,b.jsx)("div",{style:{display:"block",aspectRatio:"430 / 242",width:"100%"},children:(0,b.jsx)("img",{loading:"lazy",src:`https://cdn-mso6.vdosrvs.com${e.img_path}`,alt:`\u7247\u6bb5${t}`||"Video thumbnail",className:"object-cover w-full h-full",onError:e=>{e.target.onerror=null,e.target.src=ae,e.target.style.objectPosition="center"}})}),(0,b.jsx)("div",{className:"text-left mt-1 text-sm flex-shrink-0 line-clamp-1",children:`${u("\u7247\u6bb5")}${t}`})]})},t)))}),(0,b.jsx)(d.A,{open:N,setIsPlanSelectionOpen:A,costPoint:Number(f.point),type:"videoOnlineTicket"})]})};var de=r(1635);const ue=function(){var e,t;const{t:r}=(0,s.Bd)(),l=(0,i.zy)(),a=new URLSearchParams(l.search),c=a.get("uuid")||"",d=a.get("cate")||"",f=a.get("mode")||"",m=(0,i.Zp)(),x=(0,p.wA)(),v=(0,p.d4)((e=>e.video.videoInfoData)),h=(0,p.d4)((e=>e.video.loading)),g=((0,p.d4)((e=>e.video.videoList)),(0,p.d4)((e=>e.category.category)),(0,p.d4)((e=>e.init.language))),y=((0,p.d4)((e=>e.init.init)),(0,n.useRef)(null)),j=(0,n.useRef)(null),w=(0,p.d4)((e=>e.userInfo.userInfoData)),k=(0,p.d4)((e=>e.init.marqueeHeight)),S=(0,p.d4)((e=>e.init.appbarHeight)),[N,A]=(0,n.useState)(!1),[E,R]=(0,n.useState)(!1),C=(0,n.useRef)(0),[P,I]=(0,n.useState)(!1),[T,F]=(0,n.useState)(0),[_,O]=(0,n.useState)(!1),[M,$]=(0,n.useState)(null),[q,D]=(0,n.useState)(!1),[H,B]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=()=>{const e=/iphone|ipod|ipad/i.test(navigator.userAgent)?"iOS":"Other",t=window.innerWidth,r="iOS"!==e?.08*t:0;C.current="iOS"!==e?.68*t-r:.61*t-r,document.documentElement.style.setProperty("--image-height",`${C.current}px`)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,n.useEffect)((()=>{const e=Math.floor(Date.now()/1e3);0===(null===w||void 0===w?void 0:w.code)&&(Number(null===w||void 0===w?void 0:w.data.category_exp)>e||Number(null===w||void 0===w?void 0:w.data.category2_exp)>e)?A(!0):A(!1)})),(0,n.useEffect)((()=>{c&&""!==c&&x((0,L.cS)(c))}),[x,c]),(0,n.useEffect)((()=>{window.scrollTo(0,0)}),[c]);const V=[{key:"\u8a73\u60c5",label:r("\u8a73\u60c5"),content:(0,b.jsx)(te.A,{type:"video"})},{key:"\u5f71\u7247\u5206\u6bb5",label:r("\u5f71\u7247\u5206\u6bb5"),content:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex w-full p-5 space-x-2",children:[(0,b.jsx)(u.A,{className:"button-full mt-1 w-1/2 "+(q?"secondary":"active"),type:"button",onClick:()=>{D(!1),x((0,L.f8)("")),F(0),I(!1)},children:r("\u5168\u7247")}),(0,b.jsx)(u.A,{className:"button-full mt-1 w-1/2 "+(q?"active":"secondary"),type:"button",onClick:()=>{D(!0),x((0,L.f8)("")),B(0),F(0),I(!1)},children:r("\u5206\u6bb5")})]}),(0,b.jsx)(ce,{videoRef:y,videojsRef:j,setPlayed:F,setPlaying:I,isSlice:q,setVideoTime:B})]})}];return(0,n.useEffect)((()=>{const e=navigator.userAgent.toLowerCase();e.indexOf("iphone")>-1||e.indexOf("ipod")>-1||e.indexOf("ipad")>-1?$("iOS"):e.indexOf("android")>-1?$("Android"):$("Unknown")}),[]),(0,n.useEffect)((()=>{console.log("platform: ",M),console.log("marqueeHeight: ",k)}),[M,k]),(0,b.jsxs)("div",{className:(0,z.kW)(g),children:[h?(0,b.jsx)("div",{children:(0,b.jsx)(oe.A,{})}):(0,b.jsxs)(b.Fragment,{children:[!_&&(0,b.jsx)(o.A,{type:"video",home:!0}),(0,b.jsx)(ee,{videoRef:y,videojsRef:j,url:"https://videos.pexels.com/video-files/2715412/2715412-uhd_2560_1440_30fps.mp4",setPlayPermission:R,setPlaying:I,playing:P,setPlayed:F,played:T,isFullscreen:_,setIsFullscreen:O,isSlice:q,videoTime:H}),(0,b.jsxs)("div",{style:{marginTop:`calc(25px + var(--image-height) + ${"iOS"!==M?k:0}px)`},children:[!N&&!E&&(0,b.jsxs)("div",{className:"p-3 text-black flex items-center justify-between",style:(0,z.qZ)(v)?{background:"linear-gradient(45deg, rgb(32 97 8), rgb(11 88 3), rgb(0, 0, 0))"}:{background:"linear-gradient(45deg, #49265b, #212c49, #000000)"},children:[(0,b.jsxs)("span",{className:"text-white",children:[r("CNY\xa5"),(0,b.jsxs)("span",{className:"text-lg font-bold",children:[" ",(0,z.qZ)(v)?"121":"97"," "]}),r("/\u6708 \u5168\u9928\u66a2\u770b!!!!")]}),(0,b.jsx)(se.A,{isExclusive:null!==(e=(0,z.qZ)(v))&&void 0!==e&&e})]}),(0,b.jsx)("div",{style:{position:"sticky",top:`calc(${S-10}px + 68vw + ${k}px)`,height:24,backgroundColor:"#000",zIndex:9}}),(0,b.jsx)("div",{style:{marginTop:-20},children:(0,b.jsx)(re.A,{tabs:V})}),(0,b.jsx)(ie.A,{title:r("\u66f4\u591a\u9ad8\u6e05A\u7247"),loadMore:function(){if("map"===f)m("/app",{state:{categoryName:d}});else{m("/app/section",{state:{cate:d,title:d,mode:"indexLayout"}})}}}),(0,b.jsx)(ne.A,{data:null===v||void 0===v||null===(t=v.data)||void 0===t?void 0:t.related_products,cate:d})]})]}),(0,b.jsx)(de.A,{})]})}},7550:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(3003);const s=()=>{const e=(0,n.d4)((e=>e.userInfo.userInfoData));return{userInfo:e,checkUserOwnProduct:t=>{if(e)return t in e.data.has_products}}}},542:()=>{}}]);
//# sourceMappingURL=4310.8f8e6235.chunk.js.map