"use strict";(self.webpackChunkqc_app=self.webpackChunkqc_app||[]).push([[6942],{8450:(e,t,o)=>{o.d(t,{E:()=>l});var i=o(3768);const n={success:{backgroundColor:"#f44336",color:"#fff",paddingLeft:"2rem",paddingRight:"2rem",marginTop:"50%"},error:{backgroundColor:"#f44336",color:"#fff"},loading:{backgroundColor:"#333",color:"#fff"}},l=(e,t)=>(0,i.oR)(e,{style:n[t],duration:"loading"===t?void 0:4e3,position:"top-center"})},9961:(e,t,o)=>{o.d(t,{A:()=>u});var i=o(35),n=o(5316),l=o(9347),r=o(7591),s=o(3003),c=o(4117),a=o(1472),d=o(579);const u=e=>{var t;let{open:o,onClose:u,title:p,type:h}=e;const{t:m}=(0,c.Bd)(),f=(0,s.wA)(),x=(0,s.d4)((e=>e.video.mvDownloadInfo)),v=(0,s.d4)((e=>e.comic.downloadInfo)),g=(null!==(t=null===x||void 0===x?void 0:x.filelinks)&&void 0!==t?t:[]).map(((e,t)=>(0,d.jsxs)("a",{download:!0,href:e.vurl,rel:"noopener noreferrer",className:"flex flex-col items-center justify-center font-bold text-gray-100 rounded-md",style:{backgroundColor:"red",width:"100%",height:"100%",textDecoration:"none"},onClick:()=>{f((0,a.D5)(!0)),alert(m("\u5df2\u65bc\u80cc\u666f\u958b\u59cb\u4e0b\u8f09"))},children:[(0,d.jsx)("span",{className:"text-xl",children:`${e.type}${m("\u756b\u8cea")}`}),(0,d.jsx)("span",{className:"text-xs",children:e.size})]},t))),y=(0,d.jsxs)("div",{className:"flex items-start justify-center space-x-4 w-full h-full py-2",children:[(0,d.jsx)("a",{href:`https:${null===v||void 0===v?void 0:v.filelinkPDF}`,download:!0,target:"_blank",className:"flex flex-col items-center justify-center font-bold text-gray-100 rounded-md",style:{backgroundColor:"red",width:"50%",height:"100%",textDecoration:"none"},children:(0,d.jsx)("span",{className:"text-xl",children:"pdf"})}),(0,d.jsx)("a",{href:`https:${null===v||void 0===v?void 0:v.filelinkZIP}`,download:!0,target:"_blank",className:"flex flex-col items-center justify-center font-bold text-gray-100 rounded-md",style:{backgroundColor:"red",width:"50%",height:"100%",textDecoration:"none"},children:(0,d.jsx)("span",{className:"text-xl",children:"zip"})})]}),b=(0,d.jsxs)("div",{className:"w-full flex flex-col text-xs text-gray-200",children:[(0,d.jsx)("span",{children:m("*\u63d0\u9192\u60a8\uff1a")}),(0,d.jsx)("span",{children:m("1. \u5efa\u8b70\u4f7f\u7528Wi-fi\u96fb\u8166\u6216\u4e0b\u8f09\uff0c\u907f\u514d\u7522\u751f\u984d\u5916\u7db2\u8def\u8cbb\u7528")}),(0,d.jsx)("span",{children:m("2. \u53ef\u80fd\u9700\u8981\u4e0b\u8f09\u89e3\u58d3\u7e2e\u6216PDF\u95b1\u8b80\u8edf\u9ad4\u958b\u555f\u6a94\u6848")}),(0,d.jsx)("span",{className:"text-red-500",children:m("*\u4f7f\u7528\u96fb\u8166\u7248\u4e0b\u8f09pdf\u8acb\u6ed1\u9f20\u53f3\u9375[\u53e6\u5b58\u65b0\u6a94]*")})]}),_=(0,d.jsxs)("div",{className:"w-full flex flex-col text-xs text-gray-200",children:[(0,d.jsx)("span",{children:m("*\u63d0\u9192\u60a8\uff1a")}),(0,d.jsx)("span",{children:m("1. \u5efa\u8b70\u4f7f\u7528Wi-fi\u96fb\u8166\u6216\u4e0b\u8f09\uff0c\u907f\u514d\u7522\u751f\u984d\u5916\u7db2\u8def\u8cbb\u7528")}),(0,d.jsxs)("span",{children:["2. ",(0,d.jsx)("span",{className:"text-red-500",children:m("\u96fb\u8166")}),m("\u4e0b\u8f09\u6642\u8acb\u65bc\u9700\u4e0b\u8f09\u7684\u756b\u8cea\u9078\u9805\u4e0a\u6309\u53f3\u9375"),(0,d.jsx)("span",{className:"text-red-500",children:m("\u53e6\u5b58\u65b0\u6a94")}),m("\u53e6\u5b58\u65b0\u6a94")]})]});return(0,d.jsx)(i.A,{open:o,onClose:u,PaperProps:{style:{width:"100%",height:"28%"}},children:(0,d.jsxs)("div",{className:"bg-gray-800 p-3 rounded-t-lg w-full h-full",children:[(0,d.jsxs)("div",{className:"flex justify-center items-center",children:[(0,d.jsx)("h2",{className:"text-white text-lg font-bold relative",children:p}),(0,d.jsx)(r.A,{onClick:u,className:"h-5 w-5 text-white absolute right-1"})]}),(0,d.jsx)(n.A,{className:"bg-gray-800 w-full h-2/4",style:{padding:"10px 0px"},children:"video"===h?g:y}),(0,d.jsx)(l.A,{className:"flex bg-gray-800 w-full justify-start p-0",children:"video"===h?b:_})]})})}},4761:(e,t,o)=>{o.d(t,{A:()=>m});var i=o(5043),n=o(35),l=o(4219),r=o(7392),s=o(5316),c=o(7591),a=o(9055),d=o(8450),u=o(4117),p=o(3003),h=o(579);const m=e=>{let{open:t,onClose:o,onClick:m,title:f="",content:x,type:v,defaultIndex:g=-1,selectedIndex:y=-1}=e;const[b,_]=(0,i.useState)(-1),{t:j}=(0,u.Bd)(),w=(0,p.d4)((e=>e.init.player)),k=(0,p.d4)((e=>e.init.stream));(0,p.d4)((e=>e.init.favor));(0,i.useEffect)((()=>{_(y)}),[y]),(0,i.useEffect)((()=>{_(g)}),[g]);return(0,i.useEffect)((()=>{var e,t;switch(v){case"player":_(null!==(e=null===x||void 0===x?void 0:x.indexOf(w))&&void 0!==e?e:0);break;case"stream":_(null!==(t=null===x||void 0===x?void 0:x.indexOf(k))&&void 0!==t?t:1)}}),[v]),(0,h.jsx)(n.A,{open:t,onClose:o,fullWidth:!0,maxWidth:"sm",children:(0,h.jsxs)("div",{className:"w-full",style:{backgroundColor:a.T.background},children:[(0,h.jsxs)("div",{className:"flex justify-center items-start relative",children:[(0,h.jsx)(l.A,{className:"text-white",children:f}),(0,h.jsx)(r.A,{onClick:o,style:{position:"absolute",right:"2px"},children:(0,h.jsx)(c.A,{className:"h-6 w-6 text-white"})})]}),(0,h.jsx)(s.A,{children:null===x||void 0===x?void 0:x.map(((e,t)=>(0,h.jsx)("p",{onClick:()=>(e=>{m(e),_(e),"favor"===v?(0,d.E)(j("\u65b0\u589e\u6700\u611b\u6210\u529f"),"success"):"stream"!==v&&o()})(t),className:"text-center cursor-pointer my-2 "+(t===b?"text-red-500":"text-white"),children:j(e)},t)))})]})})}},3744:(e,t,o)=>{o.d(t,{A:()=>m});var i=o(5043),n=o(611),l=o(6448),r=o(8450),s=o(3003),c=o(4477),a=o(6691),d=o(3216),u=o(4117),p=o(579);const h=e=>{let{open:t,onClose:o,usageType:h,usePoint:m,cost:f,description:x}=e;const{t:v}=(0,u.Bd)(),g=(0,d.Zp)(),y=(0,s.wA)(),b=((0,s.d4)((e=>{var t;return null===(t=e.wallet.status)||void 0===t?void 0:t.status})),(0,s.d4)((e=>{var t;return null===(t=e.wallet.status)||void 0===t?void 0:t.error_msg})),(0,s.d4)((e=>e.video.videoInfoData))),_=((0,s.d4)((e=>{var t;return null===(t=e.comic.comicPurchaseData)||void 0===t?void 0:t.episode})),(0,s.d4)((e=>e.comic.comicInfoData))),j=(0,s.d4)((e=>e.comic.currentChapter)),w=((0,s.d4)((e=>e.comic.pageInfoList)),(0,s.d4)((e=>e.comic.pointToComicResult))),[k,N]=(0,i.useState)(!1),[A,C]=(0,i.useState)([]),S=()=>{N(!1)};(0,i.useEffect)((()=>{w&&"ok"===w.result&&(0,r.E)(w.result_msg,"error")}),[w]);const I=[(0,p.jsx)(l.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{switch(h){case"videoOnlineTicket":if(b)if(m){if(b){const e=null===b||void 0===b?void 0:b.data.uuid;e&&y(c.Zr({num:e,use:"1",check_buy:"1"})).then((e=>{"ok"===e.payload.result?(0,r.E)(e.payload.result_msg,"error"):e.payload.error&&(C([(0,p.jsx)("div",{className:"text-md p-6",children:e.payload.error_msg})]),N(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}}else if(b){const e=null===b||void 0===b?void 0:b.data.uuid;e&&y(c.Zr({num:e,exchange:"1",check_buy:"1"})).then((e=>{"ok"===e.payload.result?(0,r.E)(e.payload.result_msg,"error"):e.payload.error&&(C([(0,p.jsx)("div",{className:"text-md p-6",children:e.payload.error_msg})]),N(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}break;case"videoDownloadTicket":if(b)if(m){if(b){const e=null===b||void 0===b?void 0:b.data.uuid;e&&y(c.Zr({num:e,dw:"1",use:"1",check_buy:"1"})).then((e=>{"ok"===e.payload.result?(0,r.E)(e.payload.result_msg,"error"):e.payload.error&&(C([(0,p.jsx)("div",{className:"text-md p-6",children:e.payload.error_msg})]),N(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}}else if(b){const e=null===b||void 0===b?void 0:b.data.uuid;e&&y(c.Zr({num:e,dw:"1",exchange:"1",check_buy:"1"})).then((e=>{"ok"===e.payload.result?(0,r.E)(e.payload.result_msg,"error"):e.payload.error&&(C([(0,p.jsx)("div",{className:"text-md p-6",children:e.payload.error_msg})]),N(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}break;case"comicOnlineTicket":if(_)if(m){if(_&&j){const e=null===_||void 0===_?void 0:_.comic_chapters.filter((e=>e.ci_chapter_order===j.toString())),t=null===_||void 0===_?void 0:_.comic_info.ci_uuid;e&&t&&y((0,a.nF)({uuid:t,chapter_uuid:e[0].ci_uuid,use:"1",check_buy:"1"})).then((e=>{"ok"===e.payload.result?((0,r.E)(e.payload.result_msg,"error"),y((0,a.sx)(t))):e.payload.error&&(C([(0,p.jsx)("div",{className:"text-md p-6",children:e.payload.error_msg})]),N(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}}else if(_&&j){const e=null===_||void 0===_?void 0:_.comic_chapters.filter((e=>e.ci_chapter_order===j.toString())),t=null===_||void 0===_?void 0:_.comic_info.ci_uuid;e&&t&&y((0,a.nF)({uuid:t,chapter_uuid:e[0].ci_uuid,exchange:"1",check_buy:"1"})).then((e=>{"ok"===e.payload.result?((0,r.E)(e.payload.result_msg,"error"),y((0,a.sx)(t))):e.payload.error&&(C([(0,p.jsx)("div",{className:"text-md p-6",children:e.payload.error_msg})]),N(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}break;default:if(_)if(m){if(_&&j){const e=null===_||void 0===_?void 0:_.comic_chapters.filter((e=>e.ci_chapter_order===j.toString())),t=null===_||void 0===_?void 0:_.comic_info.ci_uuid;e&&t&&y((0,a.nF)({uuid:t,chapter_uuid:e[0].ci_uuid,dw:"1",use:"1",check_buy:"1"})).then((e=>{"ok"===e.payload.result?(0,r.E)(e.payload.result_msg,"error"):e.payload.error&&(C([(0,p.jsx)("div",{className:"text-md p-6",children:e.payload.error_msg})]),N(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}}else if(_&&j){const e=null===_||void 0===_?void 0:_.comic_chapters.filter((e=>e.ci_chapter_order===j.toString())),t=null===_||void 0===_?void 0:_.comic_info.ci_uuid;e&&t&&y((0,a.nF)({uuid:t,chapter_uuid:e[0].ci_uuid,dw:"1",exchange:"1",check_buy:"1"})).then((e=>{"ok"===e.payload.result?(0,r.E)(e.payload.result_msg,"error"):e.payload.error&&(C([(0,p.jsx)("div",{className:"text-md p-6",children:e.payload.error_msg})]),N(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}}o()},children:v("\u78ba\u8a8d")}),(0,p.jsx)(l.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:o,children:v("\u53d6\u6d88")})],E=[(0,p.jsx)(l.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>g("/app/recharge"),children:v("\u78ba\u8a8d")}),(0,p.jsx)(l.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:S,children:v("\u53d6\u6d88")})];return(0,p.jsxs)("div",{children:[(0,p.jsx)(n.A,{content:[x],open:t,onClose:o,buttons:I}),(0,p.jsx)(n.A,{content:[A],open:k,onClose:S,buttons:E})]})},m=e=>{let{open:t,setIsPlanSelectionOpen:o,costPoint:r,type:c="comicOnlineTicket",setBtnGroupIndex:a}=e;const{t:d}=(0,u.Bd)(),m=(0,s.d4)((e=>e.comic.purchaseInfo)),f=(0,s.d4)((e=>e.video.purchaseInfo));(0,i.useEffect)((()=>{}),[f]);const x={videoOnlineTicket:{buttonText:d("\u5f71\u7247\u7dda\u4e0a\u5238*1"),description:d("\u78ba\u5b9a\u4f7f\u7528\u5f71\u7247\u7dda\u4e0a\u5238*1\u5f35\uff0c\u8cfc\u8cb7\u55ae\u724748\u5c0f\u6642\u7121\u9650\u6b21\u89c0\u770b?"),pointDesc:`${d("\u78ba\u5b9a\u6d88\u8cbb")}${r}${d("\u9ede\uff0c\u8cfc\u8cb7\u55ae\u724748\u5c0f\u6642\u7121\u9650\u6b21\u89c0\u770b?")}`,ref:"video_online"},videoDownloadTicket:{buttonText:d("\u5f71\u7247\u4e0b\u8f09\u5238*1"),description:d("\u78ba\u5b9a\u4f7f\u7528\u5f71\u7247\u4e0b\u8f09\u5238*1\u5f35\uff0c\u8cfc\u8cb7\u55ae\u724748\u5c0f\u6642\u7121\u9650\u6b21\u4e0b\u8f09?"),pointDesc:`${d("\u78ba\u5b9a\u6d88\u8cbb")}${r}${d("\u9ede\uff0c\u8cfc\u8cb7\u55ae\u724748\u5c0f\u6642\u7121\u9650\u6b21\u4e0b\u8f09?")}`,ref:"video_download"},comicOnlineTicket:{buttonText:d("\u6f2b\u756b\u7dda\u4e0a\u5238*1"),description:d("\u78ba\u5b9a\u4f7f\u7528\u6f2b\u756b\u5238*1\u5f35\uff0c\u8cfc\u8cb7\u55ae\u8a7148\u5c0f\u6642\u7121\u9650\u6b21\u89c0\u770b?"),pointDesc:`${d("\u78ba\u5b9a\u6d88\u8cbb")}${null===m||void 0===m?void 0:m.needPoint}${d("\u9ede\uff0c\u8cfc\u8cb7\u6574\u672c48\u5c0f\u6642\u7121\u9650\u6b21\u89c0\u770b?")}`,ref:"comic_online"},comicDownloadTicket:{buttonText:d("\u6f2b\u756b\u4e0b\u8f09\u5238*1"),description:d("\u78ba\u5b9a\u4f7f\u7528\u6f2b\u756b\u5238*1\u5f35\uff0c\u8cfc\u8cb7\u55ae\u8a7148\u5c0f\u6642\u7121\u9650\u6b21\u4e0b\u8f09?"),pointDesc:`${d("\u78ba\u5b9a\u6d88\u8cbb")}${null===m||void 0===m?void 0:m.needPoint}${d("\u9ede\uff0c\u8cfc\u8cb7\u6574\u672c48\u5c0f\u6642\u7121\u9650\u6b21\u4e0b\u8f09?")}`,ref:"comic_download"}}[c],[v,g]=(0,i.useState)(!1),[y,b]=(0,i.useState)(!1),_=(0,i.useMemo)((()=>y?x.pointDesc:x.description),[y,x]),j=(0,i.useMemo)((()=>[(0,p.jsx)(l.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>w(c),children:x.buttonText}),(0,p.jsx)(l.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>w("point"),children:c.includes("comic")?`${d("\u9ede\u6578")}${null===m||void 0===m?void 0:m.needPoint}${d("\u9ede")}`:`${d("\u9ede\u6578")}${r}${d("\u9ede")}`})]),[c,m,f]),w=(0,i.useCallback)((e=>{"point"===e?(b("point"===e),g(!0)):g(!0),k()}),[]),k=(0,i.useCallback)((()=>{o(!1),a&&a(-1)}),[o,a]);return(0,p.jsxs)("div",{children:[(0,p.jsx)(n.A,{title:d("\u8acb\u9078\u64c7\u65b9\u6848"),open:t,onClose:k,buttons:j}),(0,p.jsx)(h,{open:v,onClose:()=>{g(!1),a&&a(-1)},usageType:c,usePoint:y,cost:y?r:1,description:_})]})}},4762:(e,t,o)=>{o.d(t,{A:()=>N});var i=o(5043),n=o(3216),l=o(1906),r=o(4535),s=o(7843),c=o(6446),a=o(8577),d=o(5865),u=o(3910),p=o(7929),h=o(4117),m=o(9055),f=o(611),x=o(3744),v=o(6691),g=o(3003),y=o(9961),b=o(8450),_=o(1132),j=o(7352),w=o(6222),k=o(579);const N=e=>{let{type:t,color:o}=e;const{t:N}=(0,h.Bd)(),A=(0,n.Zp)(),C=(0,g.wA)(),S=(0,g.d4)((e=>{var t;return null===(t=e.userInfo.userInfoData)||void 0===t?void 0:t.data})),I=(0,g.d4)((e=>e.video.videoInfoData)),E=(0,g.d4)((e=>e.comic.comicInfoData)),$=(0,g.d4)((e=>e.comic.currentChapter)),T=((0,g.d4)((e=>e.comic.pageInfoList)),(0,g.d4)((e=>e.comic.isDownload))),D=(0,g.d4)((e=>e.init.language)),[F,W]=(0,i.useState)(null),[P,R]=(E&&(null===E||void 0===E||E.comic_info.ci_uuid),(0,i.useState)(!1)),[B,O]=(0,i.useState)(""),[L,M]=(0,i.useState)(!1),[G,Z]=(0,i.useState)(!0),z=[(0,k.jsx)(l.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{A("/app/Recharge")},children:N("\u78ba\u8a8d")}),(0,k.jsx)(l.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{R(!1)},children:N("\u53d6\u6d88")})],q=(e,t)=>{const o=null===E||void 0===E?void 0:E.comic_chapters.filter((e=>e.ci_chapter_order===t.ci_chapter_order)),i=null===E||void 0===E?void 0:E.comic_info.ci_uuid;if(C((0,v.t0)(Number(t.ci_chapter_order))),o&&i&&null!==S&&void 0!==S&&S.username)if(T){const e={uuid:i,chapter_uuid:o[0].ci_uuid};C((0,v.wU)(e)).then((e=>{var t;e.payload.error?S.point>=Number(null===(t=E.comic_info)||void 0===t?void 0:t.ci_point)||Number(S.ex_tickets.comic_download)>0?o&&i&&C((0,v.nF)({uuid:i,chapter_uuid:o[0].ci_uuid})).then((e=>{"ok"===e.payload.result?(0,b.E)(e.payload.result_msg,"error"):e.payload.error||(C((0,v.jY)(e.payload)),M(!0))})).catch((e=>{console.error("Fetch failed:",e)})):(O(N("\u9ede\u6578\u3001\u4e0b\u8f09\u5238\u4e0d\u8db3\uff0c\u662f\u5426\u524d\u5f80\u52a0\u503c?")),R(!0)):X(!0)})).catch((e=>{console.log("downloadComic exception: ",e)}))}else C((0,v.gj)({uuid:i,cat:1,chapter_uuid:o[0].ci_uuid,view_type:0})).then((e=>{e.payload.error?(e=>{if(console.log("handlePlanSelectionOpen aaaaa"),S&&Object.keys(S).length>0){if(E&&E.comic_info&&Object.keys(E.comic_info).length>0&&E&&e.chapter){const t=null===E||void 0===E?void 0:E.comic_chapters.filter((t=>t.ci_chapter_order===e.chapter.toString())),o=null===E||void 0===E?void 0:E.comic_info.ci_uuid;t&&o&&C((0,v.nF)({uuid:o,chapter_uuid:t[0].ci_uuid})).then((e=>{"ok"===e.payload.result?(0,b.E)(e.payload.result_msg,"error"):e.payload.error||(C((0,v.jY)(e.payload)),M(!0))})).catch((e=>{console.error("Fetch failed:",e)}))}}else A("/app/login")})({chapter:Number(t.ci_chapter_order)}):e.payload.infoList&&(A(`/app/comicPage/${Number(t.ci_chapter_order)}`),C((0,v.t0)(Number(t.ci_chapter_order))))})).catch((e=>{console.error("Fetch failed:",e)}));else A("/app/login")},[V,X]=(0,i.useState)(!1),Y=F?G?F:[...F].reverse():[];(0,i.useEffect)((()=>{E&&W([...null===E||void 0===E?void 0:E.comic_chapters])}),[E]),(0,i.useEffect)((()=>()=>{C((0,v.NZ)(!1))}),[]);const H=(0,r.Ay)(s.A)((e=>{let{theme:t}=e;return{width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:"#001e3c",width:32,height:32,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0}},"& .MuiSwitch-track":{opacity:1,backgroundColor:"#aab4be",borderRadius:10}}}));return(0,k.jsxs)(c.A,{className:(0,w.kW)(`${D}_m`),sx:{padding:"10px 1rem"},children:[(0,k.jsx)(c.A,{sx:{marginTop:"0px",display:"flex",alignItems:"center"},children:(0,k.jsxs)("div",{className:"flex justify-between w-full",children:[(0,k.jsx)("div",{className:"flex items-center",children:(0,k.jsx)(a.A,{control:(0,k.jsx)(H,{sx:{m:1},checked:T,onChange:e=>{C((0,v.NZ)(e.target.checked))},checkedIcon:(0,k.jsx)("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#984B4B",borderRadius:"50%"},children:(0,k.jsx)(_.A,{style:{color:"white",fontSize:"20px"}})}),icon:(0,k.jsx)("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#984B4B",borderRadius:"50%"},children:(0,k.jsx)(j.A,{style:{color:"white",fontSize:"20px"}})})}),label:N(T?"\u4e0b\u8f09":"\u7dda\u4e0a")})}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(d.A,{sx:{color:"#fff",marginRight:"8px"},children:N("\u6392\u5e8f\uff1a")}),(0,k.jsxs)(l.A,{sx:{color:"#fff"},onClick:()=>{Z(!G)},children:[N(G?"\u7531\u65b0\u81f3\u820a":"\u7531\u820a\u81f3\u65b0"),(0,k.jsx)(u.g,{icon:G?p.GF6:p.tdl,style:{marginLeft:"8px"}})]})]})]})}),(0,k.jsx)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px",marginTop:"5px"},children:null===Y||void 0===Y?void 0:Y.map(((e,t)=>(0,k.jsxs)(l.A,{className:"button-shorted bg-background justify-between flex items-center",style:Number(e.ci_chapter_order)===$?{backgroundColor:"#878787",color:"#D3D3D3"}:{backgroundColor:o,color:m.T.primary.inactive},onClick:()=>q(0,e),children:[(0,k.jsx)("span",{className:"flex-1 text-left",children:e.ci_name}),!e.has_permission&&(0,k.jsx)(u.g,{icon:p.DW4,className:"text-gray-200"})]},t)))}),(I&&I.data.point||E&&E.comic_info.ci_point)&&(0,k.jsx)(x.A,{open:L,setIsPlanSelectionOpen:M,costPoint:Number(E.comic_info.ci_point),type:T?"comicDownloadTicket":"comicOnlineTicket"}),(0,k.jsx)(f.A,{open:P,onClose:()=>R(!1),content:[B],buttons:z}),(0,k.jsx)(y.A,{open:V,onClose:()=>X(!1),title:N("\u8acb\u9078\u64c7\u60a8\u8981\u4e0b\u8f09\u7684\u6a94\u6848\u683c\u5f0f"),type:"comic"})]})}},6942:(e,t,o)=>{o.r(t),o.d(t,{default:()=>H});var i=o(5043),n=o(4117),l=o(3216),r=o(3512),s=o(611),c=o(3744),a=o(1906),d=o(2916),u=o(3910),p=o(7929),h=o(3003),m=o(4762),f=o(7550),x=o(4761),v=o(35),g=o(4219),y=o(7392),b=o(5316),_=o(9347),j=o(7591),w=o(9055),k=o(579);const N=e=>{let{open:t,onClose:o,title:l="",content:r,buttons:s=[],container:c}=e;const[a,d]=(0,i.useState)(-1),{t:u}=(0,n.Bd)();return(0,k.jsx)(v.A,{open:t,onClose:o,fullWidth:!0,container:c,PaperProps:{style:{maxHeight:"70vh",maxWidth:"100vw",overflowX:"hidden"}},children:(0,k.jsxs)("div",{className:"w-full",style:{backgroundColor:w.T.background,padding:"0px"},children:[(0,k.jsxs)("div",{className:"w-full flex justify-center items-start relative",children:[(0,k.jsx)(g.A,{className:"text-white",style:{paddingRight:"3rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",display:"block"},children:l}),(0,k.jsx)(y.A,{onClick:o,style:{position:"absolute",right:"2px"},children:(0,k.jsx)(j.A,{className:"h-6 w-6 text-white"})})]}),(0,k.jsx)(b.A,{className:"w-full flex justify-center items-center",style:{padding:"10px 0px"},children:null===r||void 0===r?void 0:r.map(((e,t)=>(0,k.jsx)("div",{className:"cursor-pointer my-2 text-white w-full",children:e},t)))}),(0,k.jsx)(_.A,{style:{display:"flex",justifyContent:"center"},className:" w-full p-1",children:s.map(((e,t)=>(0,k.jsx)(i.Fragment,{children:e},t)))})]})})};var A=o(1315),C=o(7631),S=o(8450);const I=e=>{let{imgLength:t,imgIndex:o,imageRefs:r}=e;const s=(0,l.Zp)(),c=(0,h.d4)((e=>e.comic.comicInfoData)),v=c?null===c||void 0===c?void 0:c.comic_info.ci_uuid:"",[g,y]=(0,i.useState)(o),[b,_]=(0,i.useState)(!1),[j,w]=(0,i.useState)(!1),[I,E]=(0,i.useState)(!1),$=(0,h.wA)(),T=(0,h.d4)((e=>e.favorites)),D=(0,h.d4)((e=>{var t;return null===(t=e.favorites.folderList)||void 0===t?void 0:t.data})),{userInfo:F}=(0,f.A)(),{t:W}=(0,n.Bd)(),P=e=>{const t=parseInt(e.target.value,10);_(!0),y(t);const o=r.current[g];o&&o.scrollIntoView({behavior:"smooth",block:"center"}),_(!1)},[R,B]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{var e;F&&((null!==(e=(()=>{var e,t,o;return F&&null!==F&&void 0!==F&&null!==(e=F.data)&&void 0!==e&&e.my_favorite_list&&0!==(null===F||void 0===F||null===(t=F.data)||void 0===t?void 0:t.my_favorite_list.length)?null===F||void 0===F||null===(o=F.data)||void 0===o?void 0:o.my_favorite_list.filter((e=>e===v)):null})())&&void 0!==e?e:[]).length>0?E(!0):E(!1))}),[null===F||void 0===F?void 0:F.data.my_favorite_list,v]),(0,i.useEffect)((()=>{$((0,A.BI)({method:"getAllFolder"}))}),[$,F,v]),(0,i.useEffect)((()=>{console.log("favorites: ",T)}),[T]),(0,k.jsxs)("div",{className:"bottom-0 left-0 right-0 flex flex-col items-center p-4 bg-background",children:[(0,k.jsxs)("div",{className:"flex w-full items-center mb-2",children:[(0,k.jsx)("span",{className:"mr-2 text-sm",children:b?g:o}),(0,k.jsx)("input",{type:"range",min:"0",max:t,value:o,onChange:P,onInput:P,className:"w-full cursor-pointer accent-red-500"})]}),(0,k.jsxs)("div",{className:"flex justify-between w-full",children:[(0,k.jsx)(a.A,{className:"flex flex-col items-center ",startIcon:(0,k.jsx)(u.g,{icon:p.ITF}),onClick:()=>{B(!R)},sx:{color:"white",padding:"0",".MuiButton-startIcon":{margin:0,fontSize:"20px",color:"white"}},children:W("\u76ee\u9304")}),(0,k.jsx)(a.A,{className:"flex flex-col items-center ",startIcon:(0,k.jsx)(u.g,{icon:p.dLQ}),sx:{color:"white",padding:"0",".MuiButton-startIcon":{margin:0,fontSize:"20px",color:"white"}},children:W("\u91cd\u6574")}),(0,k.jsx)(a.A,{className:"flex flex-col items-center",startIcon:(0,k.jsx)(u.g,{icon:I?p.qcK:d.qcK}),sx:{color:"white",padding:"0",".MuiButton-startIcon":{margin:0,fontSize:"20px",color:"white"}},onClick:()=>{if(F&&D){if(console.log("folderList: ",D),D.length>0&&!I)w(!0);else if(I){const e={data:JSON.stringify([v])};$((0,A.BI)({method:"delVideo",post_param:e})).then((e=>{const t=e.payload;-1===t.code?($((0,C.me)()),(0,S.E)(W("\u79fb\u9664\u6700\u611b\u6210\u529f"),"error")):console.log("delVideo exception: ",t)})).catch((e=>{(0,S.E)(e,"error")}))}}else s("/app/login")},children:W("\u52a0\u5165\u6700\u611b")})]}),(0,k.jsx)(N,{title:null===c||void 0===c?void 0:c.comic_info.ci_name,open:R,onClose:()=>B(!1),content:[(0,k.jsx)(m.A,{type:"online",color:"black"})]}),(0,k.jsx)(x.A,{title:W("\u52a0\u5165\u6700\u611b"),open:j,onClose:()=>w(!1),content:[...new Set(null===D||void 0===D?void 0:D.map((e=>e.folder_name)))],onClick:e=>{if(console.log("handleAddFavorite"),D){const t={folder_id:D[e].folder_id,video_id:v};$((0,A.BI)({method:"addFavo",post_param:t})).then((e=>{const t=e.payload;-1===t.code?($((0,C.me)()),(0,S.E)(W("\u65b0\u589e\u6700\u611b\u6210\u529f"),"error")):console.log("addFavo exception: ",t)})).catch((e=>{(0,S.E)(e,"error")}))}}})]})};var E=o(8587),$=o(5787),T=o(8387),D=o(3334),F=o(2181),W=o(8625),P=o(2919),R=o(6060),B=o(8280);const O=["className","component","disableGutters","fixed","maxWidth","classes"],L=(0,B.A)(),M=(0,R.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${(0,W.A)(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),G=e=>(0,P.A)({props:e,name:"MuiContainer",defaultTheme:L});var Z=o(9848),z=o(4535),q=o(6431);const V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=M,useThemeProps:o=G,componentName:n="MuiContainer"}=e,l=t((e=>{let{theme:t,ownerState:o}=e;return(0,$.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!o.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:o}=e;return o.fixed&&Object.keys(t.breakpoints.values).reduce(((e,o)=>{const i=o,n=t.breakpoints.values[i];return 0!==n&&(e[t.breakpoints.up(i)]={maxWidth:`${n}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:o}=e;return(0,$.A)({},"xs"===o.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},o.maxWidth&&"xs"!==o.maxWidth&&{[t.breakpoints.up(o.maxWidth)]:{maxWidth:`${t.breakpoints.values[o.maxWidth]}${t.breakpoints.unit}`}})})),r=i.forwardRef((function(e,t){const i=o(e),{className:r,component:s="div",disableGutters:c=!1,fixed:a=!1,maxWidth:d="lg"}=i,u=(0,E.A)(i,O),p=(0,$.A)({},i,{component:s,disableGutters:c,fixed:a,maxWidth:d}),h=((e,t)=>{const{classes:o,fixed:i,disableGutters:n,maxWidth:l}=e,r={root:["root",l&&`maxWidth${(0,W.A)(String(l))}`,i&&"fixed",n&&"disableGutters"]};return(0,F.A)(r,(e=>(0,D.Ay)(t,e)),o)})(p,n);return(0,k.jsx)(l,(0,$.A)({as:s,ownerState:p,className:(0,T.A)(h.root,r),ref:t},u))}));return r}({createStyledComponent:(0,z.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${(0,Z.A)(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,q.b)({props:e,name:"MuiContainer"})}),X=V;var Y=o(6691);const H=()=>{var e;const{chaptersIndex:t}=(0,l.g)(),d=(0,i.useRef)(null),u=(0,l.Zp)(),{t:p}=(0,n.Bd)(),[m,x]=(0,i.useState)(0),v=(0,h.d4)((e=>e.comic.comicInfoData)),g=(0,h.d4)((e=>e.comic.pageInfoList)),{userInfo:y}=(0,f.A)(),[b,_]=(0,i.useState)(!1),[j,w]=(0,i.useState)(""),[N,A]=(0,i.useState)(!1),[C,S]=(0,i.useState)(!0),E=(0,h.wA)(),$=[(0,k.jsx)(a.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{u("/app/Recharge")},children:p("\u78ba\u8a8d")}),(0,k.jsx)(a.A,{className:"button-full active mt-1 w-1/3",type:"button",onClick:()=>{_(!1)},children:p("\u53d6\u6d88")})],T=(0,i.useRef)([]);return(0,i.useEffect)((()=>{if(t){x(0),E((0,Y.Go)(null)),E((0,Y.t0)(Number(t)));const o=null===v||void 0===v?void 0:v.comic_chapters.filter((e=>e.ci_chapter_order===t)),i=null===v||void 0===v?void 0:v.comic_info.ci_uuid;var e;if(o&&i)E((0,Y.gj)({uuid:i,cat:1,chapter_uuid:null===(e=o[0])||void 0===e?void 0:e.ci_uuid,view_type:0}))}}),[E,t]),(0,i.useEffect)((()=>{const e=new IntersectionObserver((t=>{t.forEach((t=>{const o=t.target,i=o.getAttribute("data-src");t.isIntersecting&&i&&(o.src=i,o.removeAttribute("data-src"),o.style.height="auto",e.unobserve(o))}))}),{threshold:.1});return T.current.forEach((t=>{t&&e.observe(t)})),()=>e.disconnect()}),[g]),(0,i.useEffect)((()=>{const e=()=>{if(!d.current)return;const e=d.current.getBoundingClientRect().top;T.current.forEach(((t,o)=>{if(t){const i=t.getBoundingClientRect(),n=i.top-e;n<d.current.clientHeight/2&&n+i.height>0&&x(o)}}))},t=d.current;return null===t||void 0===t||t.addEventListener("scroll",e),()=>null===t||void 0===t?void 0:t.removeEventListener("scroll",e)}),[g]),(0,i.useEffect)((()=>{d.current&&(d.current.scrollTop=0)}),[t]),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"fixed top-0 left-0 w-full transition-transform duration-300 "+(C?"translate-y-0":"-translate-y-full"),children:(0,k.jsx)(r.A,{customTitle:null===v||void 0===v?void 0:v.comic_info.ci_name,home:!0})}),(0,k.jsx)(X,{ref:d,style:{overflowY:"auto",height:"100vh",boxSizing:"border-box"},onClick:()=>{S((e=>!e))},children:null===g||void 0===g?void 0:g.page_infos.map(((e,t)=>(0,k.jsx)("img",{src:o(497),"data-src":`https:${e.src}`,alt:`\u5716\u7247 ${t+1}`,style:{display:"block",width:"100%",height:1500},ref:e=>T.current[t]=e},t)))}),(0,k.jsx)("div",{className:"fixed bottom-0 left-0 w-full transition-transform duration-300 "+(C?"translate-y-0":"translate-y-full"),children:(0,k.jsx)(I,{imgLength:null!==(e=null===g||void 0===g?void 0:g.page_infos.length)&&void 0!==e?e:0,imgIndex:m+1,imageRefs:T})}),v&&v.comic_info.ci_point&&(0,k.jsx)(c.A,{open:N,setIsPlanSelectionOpen:A,costPoint:Number(v.comic_info.ci_point),type:"comicOnlineTicket"}),(0,k.jsx)(s.A,{open:b,onClose:()=>_(!1),content:[j],buttons:$})]})}},7550:(e,t,o)=>{o.d(t,{A:()=>n});var i=o(3003);const n=()=>{const e=(0,i.d4)((e=>e.userInfo.userInfoData));return{userInfo:e,checkUserOwnProduct:t=>{if(e)return t in e.data.has_products}}}},497:(e,t,o)=>{e.exports=o.p+"static/media/qc-default-img.e8a429dee9583eb8591b.jpg"}}]);
//# sourceMappingURL=6942.51a320d3.chunk.js.map