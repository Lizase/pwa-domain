"use strict";(self.webpackChunkqc_app=self.webpackChunkqc_app||[]).push([[3042],{7533:(e,t,l)=>{l.d(t,{A:()=>p});var s=l(5043),o=l(6446),a=l(5865),i=l(9573),n=l(5721),r=l(1322),d=l(3910),c=l(7929),u=l(9055),m=l(4117),x=l(6448),h=l(579);const f={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",bgcolor:u.T.background,border:"2px solid #000",borderRadius:2,boxShadow:24,p:2,color:u.T.primary.active,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"};const p=function(e){let{options:t,open:l,currentState:u,handleClose:p,setSelectedOption:b,title:g,content:v,onConfirm:j,onCancel:y,showButtons:w}=e;const[N,k]=(0,s.useState)(u),{t:C}=(0,m.Bd)();return(0,s.useEffect)((()=>{k(u)}),[u]),(0,h.jsx)(i.A,{sx:{maxWidth:480,margin:"0 auto"},open:l,onClose:p,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,h.jsxs)(o.A,{sx:f,children:[(0,h.jsxs)(o.A,{sx:{width:"100%",display:"flex",justifyContent:"center",position:"relative"},children:[(0,h.jsx)(a.A,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{fontSize:"16px",fontWeight:"bold",alignItems:"center",display:"flex"},children:C(g)}),(0,h.jsx)("button",{className:"w-5 h-5 flex justify-center items-center absolute right-0 top-0",onClick:p,children:(0,h.jsx)(d.g,{icon:c.GRI,className:"text-xl"})})]}),v&&(0,h.jsx)(a.A,{sx:{mt:2,fontSize:"14px",width:"100%"},id:"modal-modal-description",children:v}),t&&t.length>0&&(0,h.jsx)(n.A,{sx:{width:"100%"},children:t.map((e=>(0,h.jsxs)(r.Ay,{onClick:()=>(e=>{k(e),b(e)})(e),sx:{justifyContent:"center",position:"relative"},children:[e.id===(null===N||void 0===N?void 0:N.id)&&(0,h.jsx)(d.g,{icon:c.e68,className:"text-xs mr-4 text-transparent"}),(0,h.jsx)("span",{className:"text-xs "+(e.id===(null===N||void 0===N?void 0:N.id)?"text-secondary":""),children:e.name}),e.id===(null===N||void 0===N?void 0:N.id)&&(0,h.jsx)(d.g,{icon:c.e68,className:"text-xs ml-4 "+(e.id===(null===N||void 0===N?void 0:N.id)?"text-secondary":"")})]},e.id)))}),w&&(0,h.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[(0,h.jsx)(x.A,{className:"button-shorted mr-5 inactive",onClick:y,children:C("\u53d6\u6d88")}),(0,h.jsx)(x.A,{className:"button-shorted active",onClick:()=>j(N),children:C("\u78ba\u8a8d")})]})]})})}},6690:(e,t,l)=>{l.d(t,{A:()=>f});var s=l(5043),o=l(6446),a=l(4912),i=l(4056),n=l(9055),r=l(3003),d=l(579);function c(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const u=e=>{let{tabs:t,value:l,handleChange:s}=e;(0,r.d4)((e=>e.init.language));return(0,d.jsx)(a.A,{value:l,onChange:s,"aria-label":"basic tabs example",variant:"scrollable",scrollButtons:"auto",TabIndicatorProps:{style:{backgroundColor:n.T.secondary}},sx:{"& .MuiTab-root.Mui-selected":{color:"\u7368\u5bb6"===t[l].key?"#02ff00":"white"},"& .MuiTabs-indicator":{display:"flex",justifyContent:"center",backgroundColor:"transparent","& > div":{width:"100%",backgroundColor:"#e8443d"}}},children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,d.jsx)(i.A,{label:e.label,...c(t),sx:{color:"\u7368\u5bb6"===e.key?"#02ff00":n.T.primary.inactive,fontSize:"16px",fontWeight:"bold",minWidth:"auto",width:"auto",paddingLeft:0,paddingRight:0,paddingBottom:0,marginRight:4}},t)))})},m=e=>{let{children:t,value:l,index:s,...a}=e;return(0,d.jsx)("div",{role:"tabpanel",hidden:l!==s,id:`simple-tabpanel-${s}`,"aria-labelledby":`simple-tab-${s}`,...a,children:l===s&&(0,d.jsx)(o.A,{children:t})})},x=s.memo(m),h=e=>{let{tabs:t,value:l}=e;return(0,d.jsx)(d.Fragment,{children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,d.jsx)(x,{value:l,index:t,children:e.content},t)))})};function f(e){let{tabs:t,initialValue:l=0,setTabIndex:a}=e;const[i,n]=s.useState(l);return s.useEffect((()=>{n(l)}),[l]),(0,d.jsxs)(o.A,{sx:{width:"100%"},children:[(0,d.jsx)(o.A,{sx:{borderBottom:1,borderColor:"divider",paddingX:2},children:(0,d.jsx)(u,{tabs:t,value:i,handleChange:(e,t)=>{n(t),a&&a(t)}})}),(0,d.jsx)(h,{tabs:t,value:i})]})}},9415:(e,t,l)=>{l.d(t,{A:()=>i});l(5043);var s=l(5475),o=l(3003),a=l(579);const i=e=>{let{id:t,uuid:l,title:i,imageUrl:n,isLinkEnabled:r=!0,toggleSelectItem:d,onClick:c,mode:u}=e;const m=(0,o.d4)((e=>e.favorites.selectItem)).indexOf(t),x=-1!==m,h=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative aspect-[0.71]",onClick:()=>{d&&d(t),c&&c()},children:[x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-50 z-10"}),x&&(0,a.jsx)("span",{className:"absolute top-0 right-0 m-1 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center z-20",children:m+1}),(0,a.jsx)("img",{loading:"lazy",src:n,alt:i||"Comic thumbnail",className:"object-cover w-full h-full"})]}),"indexLayout"===u?(0,a.jsx)("div",{className:"text-left mt-2 text-sm line-clamp-1",children:i}):(0,a.jsx)("div",{className:"text-left mt-2 text-sm line-clamp-2",children:i})]});return r?(0,a.jsx)(s.N_,{className:"flex flex-col",to:"/app/Comic",state:{uuid:l},children:h}):(0,a.jsx)("div",{className:"h-full w-full flex flex-col justify-between",children:h})}},9317:(e,t,l)=>{l.d(t,{A:()=>u});var s=l(4117),o=l(3910),a=l(7929),i=l(9415),n=l(5043),r=l(6222),d=l(3003),c=l(579);const u=(0,n.forwardRef)((e=>{let{title:t,loadMore:l,isLinkEnabled:u,toggleSelectItem:m,data:x,onReachBottom:h,onCardClick:f,lastPage:p=!1}=e;const{t:b}=(0,s.Bd)(),[g,v]=(0,n.useState)(!1),j=(0,n.useRef)(null),y=(0,d.d4)((e=>e.init.language));return(0,n.useEffect)((()=>{if(!j.current)return void console.log("Observer ref is not attached");const e=new IntersectionObserver((e=>{const t=e[0];console.log("Is intersecting:",t.isIntersecting),t.isIntersecting&&(v(!0),h&&h())}),{root:null,threshold:.5});return console.log("Observer attached to:",j.current),e.observe(j.current),p&&e.unobserve(j.current),()=>{j.current&&(console.log("Observer detached from:",j.current),e.unobserve(j.current))}}),[h]),x&&0!==x.length?(0,c.jsxs)("div",{className:"comic-map-container",children:[(0,c.jsxs)("div",{className:"flex px-4 items-end justify-between",children:[t&&(0,c.jsx)("h2",{className:"text-xl font-bold",children:t}),l&&(0,c.jsxs)("span",{className:"text-xs font-bold pl-4",children:[b("\u770b\u66f4\u591a"),(0,c.jsx)(o.g,{icon:a.vmR,className:"text-primary-active"})]})]}),(0,c.jsx)("div",{className:"flex flex-wrap px-2 pb-2",children:x.map(((e,t)=>{var l;return(0,c.jsx)("div",{className:"w-1/2 p-1",children:(0,c.jsx)(i.A,{id:e._id,uuid:e.ci_uuid?e.ci_uuid:e.uuid,title:(0,r.iz)(e,y),imageUrl:`https:${null!==(l=e.pic_big)&&void 0!==l?l:""}`,isLinkEnabled:u,toggleSelectItem:m,onClick:f})},t)}))}),(0,c.jsx)("div",{ref:j,className:"observer-target h-8"})]}):(console.log("No data available to display"),null)}))},8450:(e,t,l)=>{l.d(t,{E:()=>a});var s=l(3768);const o={success:{backgroundColor:"#f44336",color:"#fff",paddingLeft:"2rem",paddingRight:"2rem",marginTop:"50%"},error:{backgroundColor:"#f44336",color:"#fff"},loading:{backgroundColor:"#333",color:"#fff"}},a=(e,t)=>(0,s.oR)(e,{style:o[t],duration:"loading"===t?void 0:4e3,position:"top-center"})},467:(e,t,l)=>{l.d(t,{A:()=>d});var s=l(5043),o=l(5475),a=l(4117),i=l(497),n=l(3003),r=l(579);const d=e=>{var t;let{id:l,uuid:d,title:c,imageUrl:u,preview:m,duration:x,actor:h,isLinkEnabled:f=!0,selectItems:p,toggleSelectItem:b,vWidth:g,cate:v,mode:j}=e;const y=null!==(t=null===p||void 0===p?void 0:p.indexOf(d))&&void 0!==t?t:-1,w=-1!==y,N=s.useRef([]),[k,C]=s.useState("vertical"),{t:S}=(0,a.Bd)();(0,n.wA)();s.useEffect((()=>{"vertical"!==g&&N.current.forEach((e=>{e&&(e.style.objectPosition="center")}))}),[g]);const A=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative w-full h-full overflow-hidden "+("\u6b50\u7f8e"===v||"\u6b27\u7f8e"===v?"aspect-[0.71]":"aspect-[1.49]"),id:d,onClick:()=>{b&&b(d)},children:[w&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-50 z-10"}),w&&(0,r.jsx)("span",{className:"absolute top-0 right-0 m-1 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center z-20",children:y+1}),(0,r.jsx)("div",{className:"map"!==j||"horizontal"!==k||"\u6b50\u7f8e"!==v&&"\u6b27\u7f8e"!==v?"w-full h-full relative":"w-full relative overflow-hidden pb-[70%]",style:{backgroundImage:`url(${i})`,backgroundSize:"cover",backgroundPosition:"center"},children:(0,r.jsx)("img",{loading:"lazy",src:u,alt:c||"Video thumbnail",className:"object-cover w-full h-full",onLoad:e=>{const t=e.currentTarget;t.naturalWidth>t.naturalHeight?C("horizontal"):t.naturalWidth<t.naturalHeight&&C("vertical")},onError:e=>{e.target.onerror=null,e.target.src=i,e.target.style.objectPosition="center"},style:"map"!==j||"horizontal"!==k||"\u6b50\u7f8e"!==v&&"\u6b27\u7f8e"!==v?{objectPosition:"right",display:"block",width:"100%"}:{transform:"scale(2.11)",transformOrigin:"top right",display:"block",width:"100%",minHeight:250},ref:e=>N.current.push(e)})}),("\u5f37\u6a94\u7368\u5bb6"===v||"\u7368\u5bb6"===v||"\u5f3a\u6863\u72ec\u5bb6"===v||""===v)&&(0,r.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full text-white text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-2",style:{borderColor:"rgb(5, 247, 72)",backgroundColor:"rgb(49, 79, 4)"},children:S("\u7368")}),("\u4e2d\u6587\u5b57\u5e55"===v||v===S("\u4e2d\u6587\u5b57\u5e55")||"\u4e2d\u6587"===v)&&(0,r.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-fuchsia-500 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-fuchsia-500 border-2",children:S("\u4e2d")}),("\u7121\u78bc"===v||"\u65e0\u7801"===v)&&(0,r.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-sky-500 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-blue-500 border-2",children:S("\u7121")}),"\u81ea\u62cd"===v&&(0,r.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-lime-500 border-2",style:{color:"rgb(22, 204, 182)",borderColor:"rgb(22, 204, 182)"},children:S("\u81ea")}),!["\u5f3a\u6863\u72ec\u5bb6","\u65e0\u7801","\u5f37\u6a94\u7368\u5bb6","\u7368\u5bb6","\u4e2d\u6587\u5b57\u5e55","\u4e2d\u6587","\u7121\u78bc","\u81ea\u62cd"].includes(v||"")&&(0,r.jsx)("p",{className:"absolute top-0 left-0 m-1 rounded-full bg-black text-secondary text-xxs p-0.5 w-8 h-8 flex items-center justify-center",children:"HD"}),(0,r.jsx)("p",{className:"absolute top-0 right-0 m-1 bg-backgroundTrans rounded text-primary-active text-xxs p-0.5",children:x||"00:00:00"})]}),(0,r.jsx)("div",{className:"text-left mt-1 text-sm flex-shrink-0 line-clamp-1 break-all",children:c}),h&&(0,r.jsx)("div",{className:"text-left mt-1 text-xs flex-shrink-0 line-clamp-1 h-5 text-red-400",children:h})]});return f?(0,r.jsx)(o.N_,{className:"h-full w-full flex flex-col justify-start",to:`/app/Video?uuid=${d}&cate=${v}&mode=${j}`,children:A}):(0,r.jsx)("div",{className:"h-full w-full flex flex-col justify-between",children:A})}},6837:(e,t,l)=>{l.d(t,{A:()=>d});var s=l(4117),o=l(467),a=l(5043),i=l(3003),n=l(6222),r=l(579);const d=(0,a.forwardRef)(((e,t)=>{let{title:l,data:d,onReachBottom:c,isLinkEnabled:u,toggleSelectItem:m,selectItems:x,cate:h,currentPage:f,endPage:p,isSearch:b=!1,lastPage:g=!1}=e;const{t:v}=(0,s.Bd)(),j=(0,i.d4)((e=>e.init.language)),y=(0,i.d4)((e=>e.init.init)),[w,N]=(0,a.useState)(!1),k=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(!k.current)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting&&(N(!0),c&&c())}),{root:null,threshold:.5});return e.observe(k.current),g&&e.unobserve(k.current),()=>{k.current&&e.unobserve(k.current)}}),[c,g]),d&&0!==d.length?(0,r.jsxs)("div",{id:"videoMapContainer",className:"video-map-container ",ref:t,children:[(0,r.jsx)("div",{className:"flex flex-wrap px-2 pb-2",children:null===d||void 0===d?void 0:d.map(((e,t)=>{var l;return(0,r.jsx)("div",{className:"w-full p-2",children:(0,r.jsx)(o.A,{id:e._id,uuid:e.uuid,imageUrl:`${null===y||void 0===y?void 0:y.img_host}/preview/80/b/${e.uuid}-800.jpg`,title:(0,n.iz)(e,j),preview:`https://tdtest84-ag.qcpro.vip/subpage/getMvPreview.php?uuid=${e.uuid}&v=1722229802`,duration:(0,n.WV)(e.time),actor:e.actor,isLinkEnabled:u,selectItems:x,toggleSelectItem:m,cate:null!==(l=(0,n.p7)(e))&&void 0!==l?l:"",mode:"map"})},t)}))}),(0,r.jsx)("div",{ref:k,className:"observer-target h-8"})]}):null}))},3042:(e,t,l)=>{l.r(t),l.d(t,{default:()=>g});var s=l(5043),o=l(4117),a=l(3216),i=l(3512),n=l(6837),r=l(9317),d=l(7533),c=l(6690),u=l(3910),m=l(7929),x=l(3003),h=l(1315),f=l(8450),p=l(3664),b=l(579);const g=()=>{const{t:e}=(0,o.Bd)(),t=(0,a.zy)(),l=new URLSearchParams(t.search),g=l.get("name"),v=l.get("id"),j=(0,x.wA)(),y=(0,x.d4)((e=>e.favorites.folderList)),w=(0,x.d4)((e=>e.favorites.myFavoriteData)),[N,k]=(0,s.useState)([]),[C,S]=(0,s.useState)(!1),[A,E]=(0,s.useState)([]),[I,_]=(0,s.useState)(!1),[B,R]=(0,s.useState)(""),[P,z]=(0,s.useState)(""),[T,L]=(0,s.useState)(""),[O,$]=(0,s.useState)(!1),[F,M]=(0,s.useState)({id:"",name:""}),[W,V]=(0,s.useState)([]),[U,q]=(0,s.useState)([]),[H,D]=(0,s.useState)(!1),[G,J]=(0,s.useState)(1),[X,K]=(0,s.useState)([]),[Q,Y]=(0,s.useState)([]),[Z,ee]=(0,s.useState)([]),te=()=>{v&&(j((0,h.P8)({num:(G+1).toString(),folder:v})),J(G+1))};(0,s.useEffect)((()=>{w&&1===G&&(K([]),K(w.products)),w&&1!==G&&K((e=>[...e,...w.products]))}),[w,v]),(0,s.useEffect)((()=>{g&&(R(g),z(g))}),[g]),(0,s.useEffect)((()=>{if(N){const e=N.filter((e=>e.category===B&&!1===e.isFolder&&"video"===e.type));V(e),q(N.filter((e=>!0===e.isFolder)))}}),[N]),(0,s.useEffect)((()=>{console.log(A)}),[A]),(0,s.useEffect)((()=>{v&&j((0,h.P8)({folder:v})).then((()=>{D(!0)}))}),[j,v]);const le=()=>_(!1),se=e=>{E((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},oe=()=>$(!1);(0,s.useEffect)((()=>{const e=[],t=[];X.forEach((l=>{null!==l&&void 0!==l&&l.pic_big?e.push(l):t.push(l)})),Y(e),ee(t)}),[X]);const ae=[{key:"\u5f71\u7247",label:e("\u5f71\u7247"),content:H?(0,b.jsx)(n.A,{data:Z,isLinkEnabled:!C,toggleSelectItem:se,selectItems:A,lastPage:Number(null===w||void 0===w?void 0:w.pageTotals)===Number(G),onReachBottom:te}):(0,b.jsx)(p.A,{customStyle:"h-1/2 mt-40"})},{key:"\u6f2b\u756b",label:e("\u6f2b\u756b"),content:H?(0,b.jsx)(r.A,{data:Q,isLinkEnabled:!C,toggleSelectItem:se,lastPage:Number(null===w||void 0===w?void 0:w.pageTotals)===G,onReachBottom:te}):(0,b.jsx)(p.A,{customStyle:"h-1/2 mt-40"})}];return(0,s.useEffect)((()=>{console.log("comic: ",Q)}),[Q]),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.A,{customTitle:B,rightComponent:(0,b.jsx)("button",{onClick:()=>_(!0),className:"text-white",children:(0,b.jsx)(u.g,{icon:m.hpd})})}),(0,b.jsxs)("div",{className:"flex justify-end p-4",children:[C&&(0,b.jsxs)("button",{onClick:()=>$(!0),children:[(0,b.jsx)(u.g,{icon:m.MT7}),(0,b.jsx)("span",{children:e("\u79fb\u52d5")})]}),(0,b.jsxs)("button",{onClick:()=>{S(!C),E([])},className:"ml-auto",children:[(0,b.jsx)(u.g,{icon:C?m.GRI:m.MT7}),(0,b.jsx)("span",{children:e(C?"\u53d6\u6d88":"\u7de8\u8f2f")})]})]}),(0,b.jsx)(c.A,{tabs:ae}),(0,b.jsx)(d.A,{open:I,handleClose:le,title:e("\u7de8\u8f2f\u8cc7\u6599\u593e"),options:[],setSelectedOption:()=>{},currentState:{id:"",name:""},content:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("label",{className:"block mb-2",children:e("\u8cc7\u6599\u593e\u540d\u7a31")}),(0,b.jsx)("input",{type:"text",value:e(B),onChange:e=>R(e.target.value),className:"border p-2 w-full mb-4 text-black rounded",placeholder:e("\u8f38\u5165\u8cc7\u6599\u593e\u540d\u7a31")}),(0,b.jsx)("label",{className:"block mb-2",children:e("\u8a3b\u89e3")}),(0,b.jsx)("textarea",{value:T,onChange:e=>L(e.target.value),className:"border p-2 w-full mb-4 text-black rounded",placeholder:e("\u8f38\u5165\u8a3b\u89e3")})]}),onConfirm:()=>{const t={id:(null===y||void 0===y?void 0:y.data.filter((e=>e.folder_id==v)))[0].folder_id,name:B,memo:T};j((0,h.BI)({method:"modifyFolder",post_param:t})).then((t=>(0,f.E)(e("\u4fee\u6539\u6210\u529f!"),"error"))),le()},onCancel:le,showButtons:!0}),(0,b.jsx)(d.A,{title:e("\u79fb\u52d5\u81f3"),options:null===y||void 0===y?void 0:y.data.map((e=>({id:e.folder_id,name:e.folder_name}))),open:O,currentState:F,handleClose:oe,setSelectedOption:M,content:"",onConfirm:()=>(t=>{const l=JSON.stringify(A),s={old_id:v,new_id:t.id,data:l};j((0,h.BI)({method:"moveVideo",post_param:s})).then((t=>{const l=t.payload;-1===l.code?j((0,h.P8)({folder:null!==v&&void 0!==v?v:""})).then((t=>(0,f.E)(e("\u79fb\u52d5\u6210\u529f!"),"error"))):console.log("delFolder exception: ",l)})).catch((e=>{(0,f.E)(e,"error")})),oe()})(F),onCancel:oe,showButtons:!0}),C&&(0,b.jsxs)("div",{className:"fixed bottom-0 left-0 w-full bg-background p-4 text-white flex justify-between items-center",children:[(0,b.jsxs)("span",{children:[e("\u522a\u9664")," (",A.length,")"]}),(0,b.jsx)("button",{onClick:()=>{const t={data:JSON.stringify(A),id:null!==v&&void 0!==v?v:""};j((0,h.BI)({method:"delVideo",post_param:t})).then((t=>{const l=t.payload;-1===l.code?j((0,h.P8)({folder:null!==v&&void 0!==v?v:""})).then((t=>(0,f.E)(e("\u522a\u9664\u6210\u529f!"),"error"))):console.log("delFolder exception: ",l)})).catch((e=>{(0,f.E)(e,"error")})),E([]),S(!1)},className:"bg-red-500 px-4 py-2 rounded-full text-white",children:e("\u522a\u9664")})]})]})}},497:(e,t,l)=>{e.exports=l.p+"static/media/qc-default-img.e8a429dee9583eb8591b.jpg"}}]);
//# sourceMappingURL=3042.544ee03e.chunk.js.map