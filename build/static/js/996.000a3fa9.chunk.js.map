{"version":3,"file":"static/js/996.000a3fa9.chunk.js","mappings":"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","sources":["components/Carousels/index.tsx","pages/Game/index.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport  Carousel from \"react-bootstrap/Carousel\";\nimport \"./index.scss\"; // 引入自定義的 SCSS 文件\nimport { AdData } from '../../type/adsType';\nimport { bannerNavigate } from '../../utils/helper';\nimport { useNavigate } from 'react-router-dom';\ninterface CarouselProps {\n  data: AdData[] | null;\n  imgHost: string;\n};\nconst Carousels: React.FC<CarouselProps> = ({ data, imgHost }) => {\n  const navigate = useNavigate();\n\n  const handleImgClick = (link: string) => {\n    const result = bannerNavigate(link);\n    if (typeof result === \"object\") {\n      console.log(\"route: \", result?.route);\n      console.log(\"state: \", result?.state);\n    }  \n  \n    if (result !== null && typeof result === 'object') {\n      navigate(result?.route, {state: result?.state });\n    } else {\n      const a = document.createElement('a');\n      a.href = result;\n      a.target = '_blank'; // 或同分頁就是 '_self'\n      a.click();\n    }\n  }\n  return (\n    <Carousel indicators={true} controls={false}>\n      {Array.isArray(data) && data?.map((item, i) => {\n        return (\n          <Carousel.Item \n            onClick={() => {}}\n            style={{\n              cursor: \"pointer\",\n              width: \"100%\",\n              maxHeight: \"auto\", // 可根據比例調整 \n            }}\n            key={i}\n          >\n            {item.link_url.match(/\\.(mp4|webm|ogg)$/i) ? (\n              <video\n                className=\"d-block w-full h-full\"\n                src={'https://tdtest84-ag.qcpro.vip/reseller/images/banner/20230223_QC_300100_CN.gif'}\n                autoPlay\n                muted\n                loop\n                style={{ objectFit: \"cover\" }} // 讓影片適應容器\n                onError={(e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n                  const target = e.currentTarget;\n                  target.onerror = null; // Prevents infinite loop in case fallback also fails\n                  target.src = \"https://player.vimeo.com/external/374265480.hd.mp4?s=2753a67069f7a1b9e191772da00c55042b805a3b&profile_id=175\"; // Fallback video URL\n                }}\n              >\n                Your browser does not support the video tag.\n              </video>\n            ) : (\n              <div onClick={() => handleImgClick(item?.link_url)}>\n                <img\n                  className=\"d-block w-full h-full object-contain\"\n                  src={`${imgHost}${item?.img_url}`}\n                  alt={item?.b_description || \"Image\"}\n                  onError={(e) => {\n                    e.currentTarget.onerror = null;\n                    e.currentTarget.src = '';\n                  }}\n                />\n              </div>\n            )}\n          </Carousel.Item>\n        );\n      })}\n    </Carousel>\n  );\n}\nexport default Carousels;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport Carousels from \"../../components/Carousels\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"../../store\";\nimport { fetchGame } from \"../../store/gameSlice\";\nimport { CategoryData } from \"../../type/categoryType\";\nimport { fetchComicList } from \"../../store/comicSlice\";\nimport { fetchVideoList, getActorsList } from \"../../store/videoSlice\";\nimport defaultPng from \"../../images/qc-default-img.jpg\";\n\ninterface CarouselData {\n  imageUrl: string;\n  altText: string;\n  caption: string;\n  description: string;\n}\n\ninterface GameItem {\n  name: string;\n  imageUrl: string;\n  linkUrl: string;\n}\n\ninterface Item {\n  content: GameInfo;\n  index: number;\n}\n\nconst GameItems: React.FC<Item> = ({ content, index }) => {\n  const init = useSelector((state: RootState) => state.init.init);\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"grid grid-cols-1 gap-4 px-4 py-4\">\n      <a\n        key={index}\n        href={content.url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"relative block\"\n      >\n        <div \n          className=\"w-full\"\n          style={{\n            backgroundImage: `url(${defaultPng})`,\n            backgroundSize: \"cover\",\n            backgroundPosition: \"center\",\n          }}\n        >\n          <img\n            src={`${init?.img_host}${content.img}`}\n            alt={content.name}\n            className=\"w-full h-full object-cover\"\n            onError={(e) => {\n              (e.target as HTMLImageElement).onerror = null; // 防止無限觸發\n              (\n                e.target as HTMLImageElement\n              ).src = require(\"../../images/qc-default-img.jpg\"); // 使用本地圖片\n            }}\n            style={{\n              display: \"block\", \n              width: \"100%\", \n              minHeight: 250,\n            }}\n          />\n        </div>\n        <div className=\"p-2 absolute bg-backgroundTrans bottom-0 w-full\">\n          <p className=\"text-white text-sm font-bold line-clamp-1\">\n            {t(content.name)}\n          </p>\n        </div>\n      </a>\n    </div>\n  );\n};\n\nconst Game: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const dispatch: AppDispatch = useDispatch();\n  const ads = useSelector((state: RootState) => state.ads.adData);\n  const init = useSelector((state: RootState) => state.init.init);\n  const gameList = useSelector((state: RootState) => state.game.gameData);\n  const [catConfig, setCatConfig] = useState<CategoryData | null>(null);\n  const category = useSelector((state: RootState) => state.category.category);\n  const language = useSelector((state: RootState) => state.init.language);\n  const categoryName = t(\"遊戲\");\n  const gameCategoryIndex =\n    category?.findIndex((obj) => obj.name === categoryName) ?? 0;\n  const [selectedIndex, setSelectedIndex] = useState(gameCategoryIndex);\n  const categoryRefs = useRef<(HTMLSpanElement | null)[]>([]);\n  const [value, setValue] = useState(0);\n\n  useEffect(() => {\n    dispatch(fetchGame());\n  }, [dispatch]);\n\n  useEffect(() => {\n    setValue(0);\n    const index = category?.findIndex((obj) => obj.name === categoryName) ?? 0;\n    setSelectedIndex(index);\n  }, [categoryName, setValue]);\n\n  // Update category config and scroll into view\n  useEffect(() => {\n    if (category) {\n      const selectedCategory = category[selectedIndex];\n      setCatConfig(selectedCategory);\n\n      const targetElement = categoryRefs.current[selectedIndex];\n      if (targetElement) {\n        const container = document.querySelector(\".hidden-scrollbar\");\n        const targetPosition =\n          targetElement.offsetLeft -\n          (container?.clientWidth || 0) / 2 +\n          targetElement.clientWidth / 2;\n        container?.scrollTo({ left: targetPosition });\n      }\n    }\n  }, [selectedIndex, category]);\n\n  // Fetch video list for selected category\n  useEffect(() => {\n    if (catConfig) {\n      // if (catConfig.name === \"視訊\") {\n      //   window.open(catConfig.url, \"_blank\");\n      // } else\n      if (catConfig.name === \"遊戲\" || catConfig.name === t(\"遊戲\")) {\n        navigate(\"/app/game\");\n      } else if (catConfig.name === \"情趣\" || catConfig.name === t(\"情趣\")) {\n        navigate(\"/app/shop\");\n      } else if (catConfig.name === \"漫畫\" || catConfig.name === t(\"漫畫\")) {\n        dispatch(fetchComicList(\"\"));\n        navigate(\"/app\", { state: { categoryName: catConfig.name } });\n      } else if (catConfig.name === \"女優\" || catConfig.name === t(\"女優\")) {\n        dispatch(getActorsList({}));\n        navigate(\"/app\", { state: { categoryName: catConfig.name } });\n      } else {\n        dispatch(\n          fetchVideoList({\n            name: catConfig.name,\n            url: catConfig.url,\n            type: catConfig.type,\n          })\n        );\n        navigate(\"/app\", { state: { categoryName: catConfig.name } });\n      }\n    }\n  }, [catConfig, dispatch]);\n\n  return (\n    <div className=\"pb-16\">\n      <div className=\"hidden-scrollbar px-4 py-2 space-x-6 overflow-x-auto whitespace-nowrap\">\n        {category?.map((categoryData: any, index) => {\n          if (\n            categoryData.name === \"視訊\" ||\n            categoryData.name === \"活動\" ||\n            categoryData.name === t(\"視訊\") ||\n            categoryData.name === t(\"活動\")\n          ) {\n            return (\n              index !== 0 && (\n                <a\n                  href={categoryData.url}\n                  target=\"_blank\"\n                  key={index}\n                  ref={(el) => (categoryRefs.current[index] = el)}\n                  onClick={() => setSelectedIndex(index)}\n                  className={index === selectedIndex ? \"text-red-500\" : \"\"}\n                  rel=\"noreferrer\"\n                >\n                  {categoryData[`name_${language}`]}\n                </a>\n              )\n            );\n          }\n          return (\n            index !== 0 && (\n              <span\n                key={index}\n                ref={(el) => (categoryRefs.current[index] = el)}\n                onClick={() => setSelectedIndex(index)}\n                className={index === selectedIndex ? \"text-red-500\" : \"\"}\n              >\n                {categoryData[`name_${language}`]}\n              </span>\n            )\n          );\n        })}\n      </div>\n      <Carousels data={ads[63]?.data || []} imgHost={init?.img_host ?? \"\"} />\n      {gameList &&\n        Object.entries(gameList).map(([key, value], index) => (\n          <>\n            <h2 className=\"text-center text-2xl font-bold pt-5\">\n              <span className=\"border-b-2 border-[#f00] pb-1\">\n                {t(value.name)}\n              </span>\n            </h2>\n            {value.gameinfos?.map((item, index) => (\n              <GameItems content={item} index={index} />\n            ))}\n          </>\n        ))}\n    </div>\n  );\n};\n\nexport default Game;\n"],"names":["_ref","data","imgHost","navigate","useNavigate","_jsx","Carousel","indicators","controls","children","Array","isArray","map","item","i","Item","onClick","style","cursor","width","maxHeight","link_url","match","className","src","autoPlay","muted","loop","objectFit","onError","e","target","currentTarget","onerror","link","result","bannerNavigate","console","log","route","state","a","document","createElement","href","click","handleImgClick","img_url","alt","b_description","GameItems","content","index","init","useSelector","t","useTranslation","_jsxs","url","rel","backgroundImage","defaultPng","backgroundSize","backgroundPosition","img_host","img","name","require","display","minHeight","Game","_category$findIndex","_ads$","_init$img_host","dispatch","useDispatch","ads","adData","gameList","game","gameData","catConfig","setCatConfig","useState","category","language","categoryName","gameCategoryIndex","findIndex","obj","selectedIndex","setSelectedIndex","categoryRefs","useRef","value","setValue","useEffect","fetchGame","_category$findIndex2","selectedCategory","targetElement","current","container","querySelector","targetPosition","offsetLeft","clientWidth","scrollTo","left","fetchComicList","getActorsList","fetchVideoList","type","categoryData","ref","el","Carousels","Object","entries","_ref2","_value$gameinfos","key","_Fragment","gameinfos"],"sourceRoot":""}