{"version":3,"file":"static/js/4310.8f8e6235.chunk.js","mappings":"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","sources":["components/ScrollToTopBtn/index.tsx","components/Video/VideoCard/index.tsx","components/Video/VideoMap/index.tsx","components/ToggleButtons/index.tsx","components/Video/VideoToolbar/index.tsx","components/Video/VideoPlayer/SettingButton/index.tsx","components/Video/VideoPlayer/PlayPauseButton/index.tsx","components/Video/VideoPlayer/FullScreenButton/index.tsx","components/Video/VideoPlayer/MuteButton/index.tsx","components/Video/VideoPlayer/progressBar/index.tsx","components/HlsPlayer/index.tsx","webpack://qc_app/./src/components/Video/VideoPlayer/CustomPlayer.module.css?2cf1","components/VRscene/index.tsx","components/Video/VideoPlayer/BackwardButton/index.tsx","components/Video/VideoPlayer/ForwardButton/index.tsx","components/VideoJsPlayer/index.tsx","components/PlyrPlayer/index.tsx","components/Video/VideoPlayer/index.tsx","components/PartClips/index.tsx","pages/Video/index.tsx","utils/checkUserInfoUtils.ts"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faLongArrowUp } from \"@fortawesome/free-solid-svg-icons\";\n\nconst ScrollToTopButton = () => {\n  const [isVisible, setIsVisible] = useState(false);\n  // 控制按鈕顯示邏輯\n  const toggleVisibility = () => {\n    if (window.scrollY > 300) {\n      setIsVisible(true);\n    } else {\n      setIsVisible(false);\n    }\n  };\n  const scrollToTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\",\n    });\n  };\n  useEffect(() => {\n    window.addEventListener(\"scroll\", toggleVisibility);\n    return () => window.removeEventListener(\"scroll\", toggleVisibility);\n  }, []);\n  return (\n    <>\n      {isVisible && (\n        <div\n          onClick={scrollToTop}\n          className={`fixed bottom-[150px] right-[20px] w-[50px] h-[50px] bg-background text-white rounded-full flex items-center justify-center cursor-pointer shadow-lg animate-bounce`}\n        >\n          <FontAwesomeIcon\n            icon={faLongArrowUp}\n            size=\"lg\"\n            className=\"text-gray-200\"\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ScrollToTopButton;\n","import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport defaultPng from \"../../../images/qc-default-img.jpg\";\nimport { AppDispatch } from \"../../../store\";\nimport { useDispatch } from \"react-redux\";\nimport { setRecommend2Pay } from \"../../../store/analyticsSlice\";\n\ninterface VideoCardProps {\n  id: string;\n  uuid: string;\n  title: string;\n  imageUrl: string;\n  preview?: string;\n  duration: string;\n  actor?: string;\n  isLinkEnabled?: boolean;\n  selectItems?: string[];\n  toggleSelectItem?: (index: string) => void;\n  vWidth?: string;\n  cate?: string;\n  mode?: string;\n}\n\nconst VideoCard: React.FC<VideoCardProps> = ({\n  id,\n  uuid,\n  title,\n  imageUrl,\n  preview,\n  duration,\n  actor,\n  isLinkEnabled = true, // 默認啟用連結\n  selectItems,\n  toggleSelectItem,\n  vWidth,\n  cate,\n  mode\n}) => {\n  const selectedIndex = selectItems?.indexOf(uuid) ?? -1;\n  const isSelected = selectedIndex !== -1;\n  const imgRefs = React.useRef<(HTMLImageElement | null)[]>([]);\n  const [orientation, setOrientation] = React.useState<'horizontal' | 'vertical'>('vertical');\n  const { t } = useTranslation();\n  const dispatch:AppDispatch = useDispatch();\n\n  const handleImageLoad = (e: React.SyntheticEvent<HTMLImageElement, Event>) => {\n    const img = e.currentTarget;\n    if (img.naturalWidth > img.naturalHeight) {\n      setOrientation(\"horizontal\");\n    } else if (img.naturalWidth < img.naturalHeight) {\n      setOrientation(\"vertical\");\n    }\n  };\n  \n  React.useEffect(() => {\n    if (vWidth !== \"vertical\") {\n      imgRefs.current.forEach((img) => {\n        if (img) {\n          img.style.objectPosition = \"center\";\n        }\n      });\n    }\n  }, [vWidth]);\n\n  const CardContent = (\n    <>\n      <div\n        className={\n          `relative w-full h-full overflow-hidden ${(cate === \"歐美\" || cate === \"欧美\") ? \"aspect-[0.71]\" : \"aspect-[1.49]\"}`\n        }\n        id={uuid}\n        onClick={() => {\n          if (toggleSelectItem) toggleSelectItem(uuid);\n        }}\n      >\n        {/* Overlay if item is selected */}\n        {isSelected && (\n          <div className=\"absolute inset-0 bg-gray-500 opacity-50 z-10\"></div>\n        )}\n\n        {/* Display selected index in a circle at the top-right corner */}\n        {isSelected && (\n          <span className=\"absolute top-0 right-0 m-1 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center z-20\">\n            {selectedIndex + 1}\n          </span>\n        )}\n        <div \n          className={\n            mode === \"map\" && orientation === \"horizontal\" && (cate === \"歐美\" || cate === \"欧美\")\n              ? \"w-full relative overflow-hidden pb-[70%]\"\n              : \"w-full h-full relative\"\n          }\n          style={{\n            backgroundImage: `url(${defaultPng})`,\n            backgroundSize: \"cover\",\n            backgroundPosition: \"center\",\n          }}\n        >\n          <img\n            loading=\"lazy\"\n            src={imageUrl}\n            alt={title || \"Video thumbnail\"}\n            className=\"object-cover w-full h-full\"\n            onLoad={handleImageLoad}\n            onError={(e) => {\n              (e.target as HTMLImageElement).onerror = null; // 防止無限觸發\n              (e.target as HTMLImageElement).src = defaultPng; // 使用本地圖片\n              (e.target as HTMLImageElement).style.objectPosition = \"center\"; // 圖片置中\n            }}\n            style={ \n              mode === \"map\" && orientation === \"horizontal\" && (cate === \"歐美\" || cate === \"欧美\")\n                ? { \n                    transform: \"scale(2.11)\", // 放大 1.2 倍 \n                    transformOrigin: \"top right\",\n                    display: \"block\", \n                    width: \"100%\", \n                    minHeight: 250,\n                  }\n                : {\n                  objectPosition: \"right\",\n                  display: \"block\", \n                  width: \"100%\", \n                  \n                } \n            }\n            ref={(img) => imgRefs.current.push(img)}\n          />\n        </div>\n        {(cate === \"強檔獨家\" ||\n          cate === \"獨家\" ||\n          cate === \"强档独家\" ||\n          cate === \"\") && (\n          <p \n            className=\"absolute top-0 left-0 m-1 rounded-full text-white text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-2\"\n            style={{\n              borderColor: \"rgb(5, 247, 72)\",\n              backgroundColor: \"rgb(49, 79, 4)\"\n            }}\n          >\n            {t(\"獨\")}\n          </p>\n        )}\n        {(cate === \"中文字幕\" ||\n          cate === t(\"中文字幕\") ||\n          cate === \"中文\") && (\n          <p className=\"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-fuchsia-500 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-fuchsia-500 border-2\">\n            {t(\"中\")}\n          </p>\n        )}\n        {(cate === \"無碼\" || cate === \"无码\") && (\n          <p className=\"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-sky-500 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-blue-500 border-2\">\n            {t(\"無\")}\n          </p>\n        )}\n        {(cate === \"自拍\") && (\n          <p \n            className=\"absolute top-0 left-0 m-1 rounded-full bg-gray-700 text-xxs p-0.5 w-8 h-8 flex items-center justify-center bold-500 border-lime-500 border-2\"\n            style={{\n              color: \"rgb(22, 204, 182)\",\n              borderColor: \"rgb(22, 204, 182)\",\n            }}\n          >\n            {t(\"自\")}\n          </p>\n        )}\n        {![\n          \"强档独家\",\n          \"无码\",\n          \"強檔獨家\",\n          \"獨家\",\n          \"中文字幕\",\n          \"中文\",\n          \"無碼\",\n          \"自拍\",\n        ].includes(cate || \"\") && (\n          <p className=\"absolute top-0 left-0 m-1 rounded-full bg-black text-secondary text-xxs p-0.5 w-8 h-8 flex items-center justify-center\">\n            HD\n          </p>\n        )}\n        <p className=\"absolute top-0 right-0 m-1 bg-backgroundTrans rounded text-primary-active text-xxs p-0.5\">\n          {duration || \"00:00:00\"}\n        </p>\n      </div>\n      <div className=\"text-left mt-1 text-sm flex-shrink-0 line-clamp-1 break-all\">\n        {title}\n      </div>\n      {actor && (\n        <div className=\"text-left mt-1 text-xs flex-shrink-0 line-clamp-1 h-5 text-red-400\">\n          {actor}\n        </div>\n      )}\n    </>\n  );\n\n  return isLinkEnabled ? (\n    <Link\n      className=\"h-full w-full flex flex-col justify-start\"\n      to={`/app/Video?uuid=${uuid}&cate=${cate}&mode=${mode}`}\n    >\n      {CardContent}\n    </Link>\n  ) : (\n    <div className=\"h-full w-full flex flex-col justify-between\">\n      {CardContent}\n    </div>\n  );\n};\n\nexport default VideoCard;\n","import { useTranslation } from \"react-i18next\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons\";\nimport VideoCard from \"../VideoCard\";\nimport { forwardRef, useEffect, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../../store\";\nimport { formatSecondsToHMS, switchName, getCategory } from \"../../../utils/helper\";\nimport \"./videoMap.css\";\n\ninterface VideoMapProp {\n  title?: string;\n  data: any;\n  onReachBottom?: () => void;\n  isLinkEnabled?: boolean;\n  selectItems?: string[];\n  toggleSelectItem?: (id: string) => void;\n  cate?: string;\n  currentPage?: number;\n  endPage?: number;\n  isSearch?: boolean;\n  lastPage?: boolean | null;\n}\nconst VideoMap = forwardRef<HTMLDivElement, VideoMapProp >(\n  ({ \n    title, \n    data, \n    onReachBottom, \n    isLinkEnabled, \n    toggleSelectItem, \n    selectItems, \n    cate, \n    currentPage,\n    endPage,\n    isSearch = false,\n    lastPage = false\n  }, ref) => {\n    \n  const { t } = useTranslation();\n  const language = useSelector((state: RootState) => state.init.language);\n  const init = useSelector((state: RootState) => state.init.init);\n  const [isBottom, setIsBottom] = useState(false);\n  const observerRef = useRef<HTMLDivElement | null>(null); // 用来监视底部元素的 ref\n\n  useEffect(() => {\n    if (!observerRef.current) {\n      return;\n    }\n    \n    const observer = new IntersectionObserver(\n      (entries) => {\n        const target = entries[0];\n        if (target.isIntersecting) {\n          setIsBottom(true);\n          if (onReachBottom) {\n            onReachBottom(); // 触发外部传入的函数\n          }\n        }\n      },\n      {\n        root: null, // 设置监视范围为容器\n        threshold: 0.5, // 目标部分可见即可触发\n      }\n    );\n\n  \n    observer.observe(observerRef.current);\n\n    if (lastPage) {\n      observer.unobserve(observerRef.current);\n    }\n\n    return () => {\n      if (observerRef.current) {\n        observer.unobserve(observerRef.current);\n      }\n    };\n  }, [onReachBottom, lastPage]); // 仅监听 onReachBottom 变化\n\n  if (!data || data.length === 0) {\n    return null;\n  }\n\n  return (\n    <div\n      id=\"videoMapContainer\"\n      className=\"video-map-container \"\n      ref={ref}\n    >\n      <div className=\"flex flex-wrap px-2 pb-2\">\n        {data?.map((item: any, index: number) => (\n          <div key={index} className=\"w-full p-2\">\n            <VideoCard\n              id={item._id}\n              uuid={item.uuid}\n              imageUrl={`${init?.img_host}/preview/80/b/${item.uuid}-800.jpg`}\n              title={switchName(item, language)}\n              preview={`https://tdtest84-ag.qcpro.vip/subpage/getMvPreview.php?uuid=${item.uuid}&v=1722229802`}\n              duration={formatSecondsToHMS(item.time)}\n              actor={item.actor}\n              isLinkEnabled={isLinkEnabled}\n              selectItems={selectItems}\n              toggleSelectItem={toggleSelectItem}\n              cate={getCategory(item) ?? \"\"}\n              mode={\"map\"}\n            />\n          </div>\n        ))}\n      </div>\n      {/* 用来监视是否到底的元素 */}\n      <div ref={observerRef} className=\"observer-target h-8\"></div>\n    </div>\n  );\n});\nexport default VideoMap;\n","import React, { useState } from 'react';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport ToggleButton from '@mui/material/ToggleButton';\n\ninterface ToggleButtonsProps {\n    data: {label:string, value:string}[];\n}\n\nconst ToggleButtons: React.FC<ToggleButtonsProps> = ({ data }) => {\n  const [alignment, setAlignment] = useState<string | null>(data[0].value);\n\n  const handleAlignment = (\n    event: React.MouseEvent<HTMLElement>,\n    newAlignment: string | null\n  ) => {\n    if (newAlignment !== null) {\n      setAlignment(newAlignment);\n    }\n  };\n\n  return (\n    <ToggleButtonGroup\n      value={alignment}\n      exclusive\n      onChange={handleAlignment}\n      aria-label=\"text alignment\"\n      sx={{\n        display: 'flex', // 使用 Flexbox 確保按鈕水平排列\n        justifyContent: 'space-between', // 使按鈕之間有適當的間距\n        width: '6rem'\n      }}\n    >\n      {data.map((item, index) => (\n        <ToggleButton \n          key={index} \n          value={item.value} \n          sx={{\n            color: 'white !important',\n            padding: '1px',\n            width: '2.5rem',\n            borderBottom: alignment === item.value ? '2px solid red' : 'none', // 修正這裡的邏輯\n          }}\n        >\n          {item.label}\n        </ToggleButton>\n      ))}\n    </ToggleButtonGroup>\n  );\n};\nexport default ToggleButtons;","import { useEffect, useState } from \"react\";\nimport ToggleButtoms from '../../ToggleButtons'; \nimport { JsxElement } from \"typescript\";\nimport LoadMore from \"../../LoadMore\";\n\ninterface VideoToolbarProps {\n  title?: string;\n  toggleButtons?: { label: string; value: string }[];\n  videoCount?: number;\n  filterComponent?: JSX.Element|null;\n  loadMore?: () => void;\n}\n  \nconst VideoToolbar: React.FC<VideoToolbarProps> = ({\n  title,\n  toggleButtons,\n  videoCount,\n  filterComponent,\n  loadMore,\n}) => {\n\n  return (\n    <div className=\"flex px-4 items-end justify-start w-full\">\n      <h2 className=\"text-xl font-bold whitespace-nowrap py-1\">{title}</h2>\n      {toggleButtons && (\n        <ToggleButtoms  data={toggleButtons}/>\n      )}\n      {filterComponent && (\n        filterComponent\n      )}\n       {loadMore && (\n        <LoadMore onLoadMore={loadMore}/>\n      )}\n    </div>\n  );\n};\nexport default VideoToolbar;\n  ","import React, { useState } from 'react';\nimport { Button, Popover, List, ListItem, ListItemText } from '@mui/material';\nimport { Settings } from '@mui/icons-material';\nimport {colors} from  \"../../../../styles/colors\";\n\ninterface SettingsButtonProps {\n  handlePlaybackRateChange: (rate: number) => void;\n  playbackRate: number;\n}\n\nconst SettingsButton: React.FC<SettingsButtonProps> = ({ handlePlaybackRateChange, playbackRate }) => {\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleOptionClick = (rate: number) => {\n    handlePlaybackRateChange(rate);\n    handleClose();\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'settings-popover' : undefined;\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={handleClick}\n        style={{ background: 'none', border: 'none', cursor: 'pointer' }}\n      >\n        <Settings />\n      </button>\n      <Popover\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        disablePortal\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        sx={{\n          \"& .MuiPaper-root\": {\n            backgroundColor: \"transparent\", // 設置為完全透明\n          },\n        }}\n      >\n        <List className=\"w-20 bg-gray-950 bg-opacity-70 text-gray-400 \">\n          <ListItem className='!pb-0'>\n            <ListItemText primary=\"速度\" />\n          </ListItem>\n          {[0.5, 1, 1.5, 2].map((rate) => (\n            <ListItem\n              key={rate}\n              className={`!pb-0 ${\n                playbackRate === rate ? 'text-white' : ''\n              }`}\n              onClick={() => handleOptionClick(rate)}\n            >\n              <ListItemText primary={`${rate}x`} />\n            </ListItem>\n          ))}\n        </List>\n      </Popover>\n    </div>\n  );\n};\n\nexport default SettingsButton;\n","import React, { SetStateAction, Dispatch } from 'react';\nimport { Button} from '@mui/material';\nimport { PlayArrow, Pause } from '@mui/icons-material';\n\ninterface PlayPauseButtonProps {\n  playing: boolean;\n  setPlaying: (isPlay: boolean) => void;\n}\n\nconst PlayPauseButton: React.FC<PlayPauseButtonProps> = ({ playing, setPlaying }) => {\n  const handleClick = () => {\n    setPlaying(!playing);\n  }\n\n  return (\n    <div \n      className=\"relative flex justify-center items-center w-18 h-18 rounded-lg bg-gray-900/30\"\n      style={{ borderRadius: \"60%\"}}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleClick}\n        disableElevation\n        className=\"!bg-white !bg-opacity-0\"\n        style={{ \n          display: 'block',\n          paddingLeft: 0,\n          paddingRight: 0,\n        }}\n      >\n        {playing ? <Pause sx={{ fontSize: \"40px\" }}/> : <PlayArrow sx={{ fontSize: \"40px\" }}/> }\n      </Button>\n    </div>\n  );\n};\n\nexport default PlayPauseButton;\n","import React, { MutableRefObject } from 'react';\nimport screenfull from 'screenfull';\nimport { Fullscreen, FullscreenExit } from '@mui/icons-material';\n\nimport { isIOS } from '../../../../utils/helper';\nimport { showCustomToast } from '../../../CustomToast';\n\ninterface FullScreenButtonProps {\n  playerContainerRef: MutableRefObject<HTMLDivElement | null>;\n  isFullscreen: boolean;\n  setIsFullscreen: (isFull: boolean) => void;\n}\n\nconst FullScreenButton: React.FC<FullScreenButtonProps> = ({\n  playerContainerRef,\n  isFullscreen,\n  setIsFullscreen\n}) => {\n  // 點擊按鈕後觸發\n  const handleToggleFullScreen = () => {\n    // 1. 若為 iOS\n    //if (isIOS()) {\n      if (!isFullscreen) { \n        setIsFullscreen(true);\n      } else {\n        setIsFullscreen(false);\n      }\n\n    // 2. 非 iOS（例如 Android、桌面 Chrome/Firefox）\n    //} else {\n    //  if (screenfull.isEnabled && playerContainerRef.current) {\n    //    screenfull.toggle(playerContainerRef.current)\n    //      .then(() => {\n    //        setIsFullscreen(screenfull.isFullscreen);\n//\n    //        if (screenfull.isFullscreen) {\n    //          lockLandscapeIfSupported();\n    //        } else {\n    //          unlockOrientationIfSupported();\n    //        }\n    //      })\n    //      .catch(err => {\n    //        console.error('Error toggling fullscreen:', err);\n    //        showCustomToast(`Android/Web fullscreen error: ${err?.message || err}`, 'error');\n    //      });\n    //  } else {\n    //    showCustomToast('Fullscreen not supported on this browser/device.', 'error');\n    //  }\n    //}\n  };\n\n  // 嘗試鎖定橫向\n  const lockLandscapeIfSupported = () => {\n    const orientation = window.screen.orientation;\n    if (orientation?.lock) {\n      orientation.lock('landscape').catch((err: any) => {\n        console.warn('Failed to lock orientation:', err);\n      });\n    }\n  };\n\n  // 嘗試解除鎖定\n  const unlockOrientationIfSupported = () => {\n    const orientation = window.screen.orientation;\n    if (orientation?.unlock) {\n      orientation.unlock();\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={handleToggleFullScreen}\n        style={{ background: 'none', border: 'none', cursor: 'pointer' }}\n      >\n        {isFullscreen ? <FullscreenExit /> : <Fullscreen />}\n      </button>\n    </div>\n  );\n};\n\nexport default FullScreenButton;\n","import React, { useEffect, useState, Dispatch, SetStateAction } from 'react';\nimport { Button } from '@mui/material';\nimport { VolumeOff, VolumeUp } from '@mui/icons-material';\n\ninterface MuteButtonProps {\n    isMuted: boolean;\n    setIsMuted: Dispatch<SetStateAction<boolean>>;\n}\n\nconst MuteButton: React.FC<MuteButtonProps> = ({ isMuted, setIsMuted }) => {\n  const toggleMute = () => {\n    setIsMuted((prev) => !prev);\n  };\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={toggleMute}\n        style={{ background: 'none', border: 'none', cursor: 'pointer' }}\n      >\n        { isMuted ? <VolumeOff/> : <VolumeUp/> }\n      </button>\n    </div>\n  );\n};\n\nexport default MuteButton;\n","import React, { useEffect, useState, Dispatch, SetStateAction } from 'react';\nimport ReactPlayer from 'react-player';\nimport { Slider, styled, Box, Typography } from '@mui/material';\nimport { VolumeOff, VolumeUp } from '@mui/icons-material';\nimport { formatSecondsToHMS, isValidNumber } from '../../../../utils/helper';\nimport { RootState } from '../../../../store';\nimport { useSelector } from 'react-redux';\nimport videojs from 'video.js';\n\n\ntype VideoJsPlayer = ReturnType<typeof videojs>;\ninterface ProgressBarProps {\n  videojsRef: React.MutableRefObject<VideoJsPlayer | null> | null;\n  playerRef: React.RefObject<HTMLVideoElement>;\n  setSeeking: Dispatch<SetStateAction<boolean>>;\n  setPlayed: (progress: number) => void;\n  played: number;\n  isSlice: boolean;\n}\n\nconst ProgressBar: React.FC<ProgressBarProps> = ({ \n  videojsRef,\n  playerRef, \n  setSeeking, \n  setPlayed,\n  played,\n  isSlice\n}) => {\n  const [loading, setLoading] = useState(0); \n  const duration = useSelector((state: RootState) => state.video.videoInfoData?.data.time);\n\n  const RailWrapper = styled(Box)<{ width: number }>(({ width }) => ({\n    position: 'absolute',\n    height: '2px',\n    backgroundColor: '#9D9D9D', // 額外的影片加載進度：淺灰色\n    opacity: '0.7',\n    width: `${width}%`,\n    zIndex: '20',\n    transition: 'width 0.3s ease', // 增加平滑的寬度變化效果\n  }));\n\n  const TinyText = styled(Typography)({\n    fontSize: '0.75rem',\n    opacity: 0.6,\n    fontWeight: 500,\n    letterSpacing: 0.2,\n  });\n\n  // 開始拖動進度條\n  const handleSeekTouchStart = () => {\n    setSeeking(true); // 設定為拖動狀態\n  };\n  // 拖動時即時更新進度條\n  const handleSeekChange = (event: Event, value: number | number[]) => {\n    if (typeof value === 'number') {\n      setPlayed(value); // 更新滑块值\n    }\n  };\n  const handleSeekCommitted = (event:  React.SyntheticEvent | Event, value: number | number[]) => {\n    if (videojsRef && videojsRef.current) {\n      const player = videojsRef.current;\n      const duration = player.duration();\n      if (!player || !isValidNumber(value) || !isValidNumber(duration)) return;\n      player.currentTime(duration * value);\n      setSeeking(false);\n    } \n\n    const player = playerRef.current;\n    if (!player || !isValidNumber(value) || !isValidNumber(player.duration)) return;\n    player.currentTime = player.duration * value;\n    setSeeking(false);\n  };\n\n  useEffect(() => {\n  }, [played]);\n\n  const [currentTime, setCurrentTime] = useState<number>(0);\n\n  useEffect(() => {\n    const handleTimeUpdate = () => {\n      if (playerRef.current) {\n        setPlayed(parseFloat((playerRef.current.currentTime / playerRef.current.duration).toFixed(2)));\n        setCurrentTime(Math.ceil(Number(playerRef.current.currentTime)));\n      }\n    };\n\n    playerRef.current?.addEventListener('timeupdate', handleTimeUpdate);\n\n    return () => {\n      playerRef.current?.removeEventListener('timeupdate', handleTimeUpdate);\n    };\n  }, [playerRef.current]);\n\n  useEffect(() => {\n    let intervalId: NodeJS.Timeout;\n\n    const tryBindTimeUpdate = () => {\n      const player = videojsRef?.current;\n      if (!player) return;\n\n      const handleTimeUpdate = () => {\n        const currentTime = player.currentTime();\n        const duration = player.duration();\n        if (isValidNumber(currentTime) && isValidNumber(duration)) {\n          setPlayed(parseFloat((currentTime / duration).toFixed(2)));\n          setCurrentTime(Math.ceil(Number(currentTime)));\n        }\n      };\n\n      player.on('timeupdate', handleTimeUpdate);\n\n      // 清除 interval，避免重複註冊\n      clearInterval(intervalId);\n\n      // 卸載時清除事件\n      return () => {\n        player.off('timeupdate', handleTimeUpdate);\n      };\n    };\n\n    intervalId = setInterval(() => {\n      if (videojsRef?.current) {\n        tryBindTimeUpdate();\n      }\n    }, 100);\n\n    // 清除 interval on unmount\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, []);\n\n  return (\n    <div className='flex flex-col w-[100%]'>\n    <Box sx={{ width: '100%', padding: '0px', position: 'relative', display: 'flex', alignItems: 'center'}}>\n      {/* RailWrapper 隨著 loading 進度變化 */}\n      <RailWrapper width={loading} />\n      <Slider\n        step={0.01}\n        min={0}\n        max={1} \n        value={played} \n        onTouchStart={handleSeekTouchStart}\n        onChangeCommitted={handleSeekCommitted}\n        onChange={handleSeekChange}\n        size={'small'}\n        sx={(t) => ({\n          color: '#fff',\n          opacity: 1,\n          height: 3,\n          zIndex: 30,\n          '& .MuiSlider-thumb': {\n            width: 8,\n            height: 8,\n            transition: '0.3s cubic-bezier(.47,1.64,.41,.8)',\n            zIndex: 30,\n            '&::before': {\n              boxShadow: '0 2px 12px 0 rgba(0,0,0,0.4)',\n            },\n            '&:hover, &.Mui-focusVisible': {\n              boxShadow: `0px 0px 0px 8px ${'rgb(255 255 255 / 16%)'}`,\n              ...t.applyStyles('dark', {\n                boxShadow: `0px 0px 0px 8px ${'rgb(255 255 255 / 16%)'}`,\n              }),\n            },\n            '&.Mui-active': {\n              width: 20,\n              height: 20,\n            },\n          },\n          '& .MuiSlider-rail': {\n            zIndex: 10,\n            color: 'rgb(3, 3, 3)',\n            height: \"4px\",\n            opacity: 0.3,\n          },\n          ...t.applyStyles('dark', {\n            color: '#fff',\n          }),\n        })}\n      />\n    </Box>\n    <Box\n      sx={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        mt: -1.5,\n      }}\n    >\n      <TinyText>{formatSecondsToHMS(currentTime)}</TinyText>\n      <TinyText>{isSlice ? formatSecondsToHMS(Number(600)) : formatSecondsToHMS(Number(duration))}</TinyText>\n    </Box>\n    </div>\n  );\n};\n\nexport default ProgressBar;\n","import React, {\n  useRef,\n  useEffect,\n  useImperativeHandle,\n  forwardRef\n} from 'react';\nimport Hls from 'hls.js';\n\ninterface HlsPlayerProps {\n  src: string;\n  width?: number | string;\n  height?: number | string;\n  playing?: boolean;\n  muted?: boolean;\n  controls?: boolean;\n  playbackRate?: number;\n  onProgress?: (currentTime: number, duration: number) => void;\n  isFullscreen?: boolean;\n}\n\nconst HlsPlayer = forwardRef<HTMLVideoElement, HlsPlayerProps>(({\n  src,\n  width = '100%',\n  height = 'auto',\n  playing = false,\n  muted = false,\n  controls = true,\n  playbackRate = 1.0,\n  onProgress,\n  isFullscreen\n}, ref) => {\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const hlsRef = useRef<Hls | null>(null);\n\n  const isM3U8 = src.includes('.m3u8');\n\n  useImperativeHandle(ref, () => videoRef.current as HTMLVideoElement);\n\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n\n    if (isM3U8) {\n      if (video.canPlayType('application/vnd.apple.mpegurl')) {\n        // Safari 支援原生播放 .m3u8\n        video.src = src;\n      } else if (Hls.isSupported()) {\n        const hls = new Hls();\n        hlsRef.current = hls;\n        hls.loadSource(src);\n        hls.attachMedia(video);\n        return () => {\n          hls.destroy();\n        };\n      } else {\n        console.error('HLS is not supported in this browser.');\n      }\n    } else {\n      // 其他格式如 .mp4\n      video.src = src;\n    }\n  }, [src]);\n\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    if (playing) {\n      video.play().catch(console.error);\n    } else {\n      video.pause();\n    }\n  }, [playing]);\n\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    video.muted = muted;\n  }, [muted]);\n\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    video.playbackRate = playbackRate;\n  }, [playbackRate]);\n\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !onProgress) return;\n\n    const handleTimeUpdate = () => {\n      onProgress(video.currentTime, video.duration);\n    };\n\n    video.addEventListener('timeupdate', handleTimeUpdate);\n    return () => {\n      video.removeEventListener('timeupdate', handleTimeUpdate);\n    };\n  }, [onProgress]);\n\n  return (\n    <div style={{ position: 'relative', width, height }}>\n      <video\n        ref={videoRef}\n        controls={controls}\n        style={{ width, height, backgroundColor: \"black\", objectFit: \"cover\" }}\n        playsInline\n        webkit-playsinline=\"true\"\n        poster=\"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBA==\"\n      />\n    </div>\n  );\n});\n\nexport default HlsPlayer;\n","// extracted by mini-css-extract-plugin\nexport default {\"player-wrapper\":\"CustomPlayer_player-wrapper__x--Uw\",\"react-player\":\"CustomPlayer_react-player__d9lsE\",\"custom-play-button\":\"CustomPlayer_custom-play-button__mSijL\",\"play-icon\":\"CustomPlayer_play-icon__2VBn5\",\"video-container\":\"CustomPlayer_video-container__qrLsJ\",\"full-screen\":\"CustomPlayer_full-screen__C5MvI\",\"button\":\"CustomPlayer_button__FoHZ2\"};","import 'aframe';\nimport { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\nimport Hls from 'hls.js';\n\ninterface VrPlayerProps {\n  src: string;\n  width?: number | string;\n  height?: number | string;\n  playing?: boolean;       // 控制是否自動播放\n  muted?: boolean;         // 是否靜音\n  controls?: boolean;      // 是否顯示控制列\n  playbackRate?: number;   // 播放速度\n  onProgress?: (currentTime: number, duration: number) => void; // 播放進度回調\n  isFullscreen?: boolean;  // 是否全螢幕\n  onShowControlBtn?: () => void;\n}\n\nconst VrPlayer = forwardRef<HTMLVideoElement, VrPlayerProps>(({ \n  src, playing, muted, controls, playbackRate, onShowControlBtn\n}, ref) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  useImperativeHandle(ref, () => videoRef.current as HTMLVideoElement);\n\n  useEffect(() => {\n    if (videoRef.current) {\n      const video = videoRef.current;\n      const hls = new Hls();\n\n      hls.loadSource(src);\n      hls.attachMedia(video);\n    }\n  }, [src]);\n\n  useEffect(() => {\n    if (videoRef.current) {\n      const video = videoRef.current;\n      if (playing) {\n        video.play();\n      } else {\n        video.pause();\n      }\n      \n      video.muted = muted ?? true;\n      video.controls = controls ?? false;\n      video.playbackRate = playbackRate ?? 1;\n    }\n  }, [playing, playbackRate, muted, controls]);\n/*\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !onProgress) return;\n\n    const updateProgress = () => {\n      onProgress(video.currentTime, video.duration);\n    };\n\n    video.addEventListener(\"timeupdate\", updateProgress);\n    return () => {\n      video.removeEventListener(\"timeupdate\", updateProgress);\n    };\n  }, [onProgress]);\n*/\n  const sceneRef = useRef<HTMLElement | null>(null);\n\n  return (\n    <>\n      <a-scene  embedded vr-mode-ui=\"enabled: true\" device-orientation-permission-ui=\"enabled: true\">\n        <a-camera position=\"0 1.6 0\" look-controls=\"pointerLockEnabled: true; reverseMouseDrag: false\" wasd-controls>\n          <a-cursor color=\"black\"></a-cursor>\n        </a-camera>\n\n        <a-assets>\n          <video id=\"videoElement\" ref={videoRef} crossOrigin=\"anonymous\" loop playsInline webkit-playsinline />\n        </a-assets>\n\n        <a-videosphere \n          src=\"#videoElement\" \n          radius=\"5000\" \n          rotation=\"0 180 0\"\n          geometry=\"primitive: sphere\"\n        >  \n        </a-videosphere>\n\n        <a-light type=\"ambient\" color=\"#888\"></a-light>\n        <a-light type=\"directional\" position=\"0 1 1\"></a-light>\n      </a-scene>\n    </>\n  );\n});\n\nexport default VrPlayer;\n","import React from 'react';\nimport { Button } from '@mui/material';\nimport { FastForward, FastRewind } from '@mui/icons-material';\n\ninterface BackwardButtonProps {\n  handleSeek: (seconds: number) => void;\n}\n\nconst BackwardButton: React.FC<BackwardButtonProps> = ({ handleSeek }) => {\n\n  return (\n    <div className=\"relative flex justify-center items-center w-10 h-10 rounded-lg bg-gray-900/30\"\n      style={{ borderRadius: \"50%\"}}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={()=>{handleSeek(-10)}}\n        className=\"!bg-white !bg-opacity-0\"\n        disableElevation\n      >\n        <FastRewind sx={{ fontSize: \"30px\"}}/>\n      </Button>\n    </div>\n  );\n};\n\nexport default BackwardButton;\n","import React from 'react';\nimport { Button } from '@mui/material';\nimport { FastForward, FastRewind } from '@mui/icons-material';\n\ninterface ForwardButtonProps {\n  handleSeek: (seconds: number) => void;\n}\n\nconst ForwardButton: React.FC<ForwardButtonProps> = ({ handleSeek }) => {\n\n  return (\n    <div className=\"relative flex justify-center items-center w-10 h-10 rounded-lg bg-gray-900/30\"\n      style={{ borderRadius: \"50%\"}}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={()=>{handleSeek(10)}}\n        className=\"!bg-white !bg-opacity-0\"\n        disableElevation\n      >\n        <FastForward sx={{ fontSize: \"30px\", color: \"rgb(255, 255, 255)\"}}/>\n      </Button>\n    </div>\n  );\n};\n\nexport default ForwardButton;\n","import React, {\n  useRef,\n  useEffect,\n  useImperativeHandle,\n  forwardRef,\n  useState,\n} from 'react';\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\n\ntype VideoJsPlayer = ReturnType<typeof videojs>;\n\ninterface VideoJSPlayerProps {\n  src: string;\n  width?: number | string;\n  height?: number | string;\n  playing?: boolean;\n  muted?: boolean;\n  controls?: boolean;\n  playbackRate?: number;\n  onProgress?: (currentTime: number, duration: number) => void;\n  isFullscreen?: boolean;\n  videoTime?: number;\n}\n\nconst getMimeType = (src: string): string => {\n  if (src.includes('m3u8')) return 'application/x-mpegURL';\n  if (src.includes('mp4')) return 'video/mp4';\n  return 'video/mp4'; // default fallback\n};\n\nconst VideoJSPlayer = forwardRef<VideoJsPlayer, VideoJSPlayerProps>(\n  (\n    {\n      src,\n      width = '100%',\n      height = 'auto',\n      playing = false,\n      muted = false,\n      controls = true,\n      playbackRate = 1.0,\n      onProgress,\n      videoTime = 0\n    },\n    ref\n  ) => {\n    const videoRef = useRef<HTMLVideoElement | null>(null);\n    const playerRef = useRef<ReturnType<typeof videojs> | null>(null);\n\n    useEffect(() => {\n      if (!videoRef.current || playerRef.current) return;\n\n      playerRef.current = videojs(videoRef.current, { controls, muted });\n\n      // 全域監聽一次就好\n      playerRef.current.on('timeupdate', () => {\n        if (onProgress) {\n          const p = playerRef.current!;\n          onProgress(p.currentTime() || 0, p.duration() || 0);\n        }\n      });\n    }, [controls, muted, onProgress]);\n\n    /** ➋ src 或播放狀態改變時，更新現有 player */\n    useEffect(() => {\n      const player = playerRef.current;\n      if (!player) return;\n    \n      player.pause();                                          // 先停\n      player.src({ src, type: getMimeType(src) });             // 換來源\n      player.load();                                           // 重新載入\n\n    }, [src]);                                                 // ← 只依賴 src\n    \n    // ② 單純控制 play / pause，不觸發換片源\n    useEffect(() => {\n      const player = playerRef.current;\n      if (!player) return;\n    \n      if (playing) {\n        player?.play()?.catch(console.error);\n      } else {\n        player.pause();\n      }\n    }, [playing]);    \n\n    /** ➌ 元件卸載時回收資源 */\n    useEffect(() => {\n      return () => {\n        playerRef.current?.dispose();\n        playerRef.current = null;\n      };\n    }, []);\n\n    useEffect(() => {\n      const player = playerRef.current;\n      if (!player) return;\n    \n      // 如果 metadata 已經載入過了，直接 seek\n      if (player.readyState() >= 1) {             // >=1 代表 HAVE_METADATA\n        player.currentTime(videoTime);\n        return;\n      }\n    \n      // 否則等一次 loadedmetadata 再 seek\n      const handleLoaded = () => {\n        player.currentTime(videoTime);\n        player.off('loadedmetadata', handleLoaded); // 清掉監聽，避免記憶體累積\n      };\n    \n      player.one('loadedmetadata', handleLoaded);   // 只監聽一次\n    }, [videoTime]);\n\n    useEffect(() => {\n      const player = playerRef.current;\n      if (!player) return;\n    \n      // 如果 metadata 已經載入過了，直接 seek\n      if (player.readyState() >= 1) {             // >=1 代表 HAVE_METADATA\n        player.playbackRate(playbackRate);\n        return;\n      }\n    \n      // 否則等一次 loadedmetadata 再 seek\n      const handleLoaded = () => {\n        player.playbackRate(playbackRate);\n        player.off('loadedmetadata', handleLoaded); // 清掉監聽，避免記憶體累積\n      };\n    \n      player.one('loadedmetadata', handleLoaded);   // 只監聽一次\n    }, [playbackRate]);\n\n    useEffect(() => {\n      const player = playerRef.current;\n      if (!player) return;\n    \n      // 如果 metadata 已經載入過了，直接 seek\n      if (player.readyState() >= 1) {             // >=1 代表 HAVE_METADATA\n        player.muted(muted);\n        return;\n      }\n    \n      // 否則等一次 loadedmetadata 再 seek\n      const handleLoaded = () => {\n        player.muted(muted);\n        player.off('loadedmetadata', handleLoaded); // 清掉監聽，避免記憶體累積\n      };\n    \n      player.one('loadedmetadata', handleLoaded);   // 只監聽一次\n    }, [muted]);\n\n    /** 讓父層可以拿到 player instance */\n    useImperativeHandle(ref, () => playerRef.current as VideoJsPlayer);\n\n    return (\n      <div style={{ position: 'relative', width, height }}>\n        <video\n          ref={videoRef}\n          className=\"video-js vjs-default-skin vjs-big-play-centered\"\n          playsInline\n          style={{\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover',\n            backgroundColor: 'black',\n          }}\n        />\n      </div>\n    );\n  }\n);\n\nexport default VideoJSPlayer;\n","import React, {\n  useRef,\n  useEffect,\n  useImperativeHandle,\n  forwardRef,\n  useState,\n} from 'react';\nimport Plyr from 'plyr';\nimport Hls from 'hls.js';\nimport 'plyr/dist/plyr.css';\n\ninterface PlyrPlayerProps {\n  src: string;\n  width?: number | string;\n  height?: number | string;\n  playing?: boolean;\n  muted?: boolean;\n  controls?: boolean;\n  playbackRate?: number;\n  onProgress?: (currentTime: number, duration: number) => void;\n  isFullscreen?: boolean;\n}\n\nconst PlyrPlayer = forwardRef<HTMLVideoElement, PlyrPlayerProps>(\n  (\n    {\n      src,\n      width = '100%',\n      height = 'auto',\n      playing = false,\n      muted = false,\n      controls = true,\n      playbackRate = 1.0,\n      onProgress,\n      isFullscreen,\n    },\n    ref\n  ) => {\n    const videoRef = useRef<HTMLVideoElement | null>(null);\n    const plyrRef = useRef<Plyr | null>(null);\n    const hlsRef = useRef<Hls | null>(null);\n    const [isReady, setIsReady] = useState(false);\n\n    useImperativeHandle(ref, () => videoRef.current as HTMLVideoElement);\n\n    const isHLS = src.includes('m3u8');\n\n    useEffect(() => {\n      const video = videoRef.current;\n      if (!video) return;\n\n      if (!plyrRef.current) {\n        // 初始化 Plyr\n        plyrRef.current = new Plyr(video, {\n          controls: controls\n            ? ['play', 'progress', 'current-time', 'mute', 'volume', 'fullscreen']\n            : [],\n        });\n\n        // 綁定事件\n        if (onProgress) {\n          plyrRef.current.on('timeupdate', () => {\n            onProgress(plyrRef.current!.currentTime, plyrRef.current!.duration);\n          });\n        }\n      }\n\n      // 設定新來源\n      if (isHLS && Hls.isSupported()) {\n        if (hlsRef.current) {\n          hlsRef.current.destroy();\n          hlsRef.current = null;\n        }\n\n        const hls = new Hls();\n        hlsRef.current = hls;\n        hls.loadSource(src);\n        hls.attachMedia(video);\n      } else {\n        video.src = src;\n        video.load();\n      }\n    }, [src]);\n\n    useEffect(() => {\n      console.log(playing);\n      const player = plyrRef.current;\n      if (!player) return;\n      playing ? player.play().catch(console.error) : player.pause();\n    }, [playing]);\n\n    useEffect(() => {\n      const player = plyrRef.current;\n      if (player) player.muted = muted;\n    }, [muted]);\n\n    useEffect(() => {\n      const player = plyrRef.current;\n      if (player) (player as any).speed = playbackRate;\n    }, [playbackRate]);\n\n    useEffect(() => {\n      const player = plyrRef.current;\n      if (!player || !onProgress) return;\n\n      const handleTimeUpdate = () => {\n        onProgress(player.currentTime, player.duration);\n      };\n\n      player.on('timeupdate', handleTimeUpdate);\n      return () => {\n        player.off('timeupdate', handleTimeUpdate);\n      };\n    }, [onProgress]);\n\n    return (\n      <div style={{ position: 'relative', width, height }}>\n        <video\n          ref={videoRef}\n          style={{ width: '100%', height: '100%', objectFit: 'cover' }}\n          playsInline\n          controls={false} // Plyr 控制條由 JS 控制，不用原生\n        />\n      </div>\n    );\n  }\n);\n\nexport default PlyrPlayer;\n","import React, { useEffect, useState, useRef, useMemo, SetStateAction, Dispatch } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { PlayCircle, PlayArrowRounded } from \"@mui/icons-material\";\n\nimport Modal from \"../../Modal\";\nimport PlanSelection from \"../../Modal/PlanSelection\";\nimport Button from \"../../Button\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"../../../store\";\n\nimport useUserInfo from \"../../../utils/checkUserInfoUtils\";\nimport SettingsButton from \"./SettingButton\";\nimport PlayPauseButton from \"./PlayPauseButton\";\nimport ForwardBackwardButton from \"./BackwardButton\";\nimport FullScreenButton from \"./FullScreenButton\";\nimport MuteButton from \"./MuteButton\";\nimport ProgressBar from \"./progressBar\";\nimport { getMv, setVideoUrl } from \"../../../store/videoSlice\";\nimport HlsPlayer from \"../../HlsPlayer\";\nimport styles from \"./CustomPlayer.module.css\";\nimport { Dispatch as reduxDispatch } from \"@reduxjs/toolkit\";\nimport { isExclusiveVideo, isUs, isValidNumber } from \"../../../utils/helper\";\nimport VRScene from \"../../VRscene\";\nimport BackwardButton from \"./BackwardButton\";\nimport ForwardButton from \"./ForwardButton\";\nimport VlcPlayer from \"../../VlcPlayer\";\nimport VideoJSPlayer from \"../../VideoJsPlayer\";\nimport videojs from 'video.js';\nimport PlyrPlayer from \"../../PlyrPlayer\";\n\ntype VideoJsPlayer = ReturnType<typeof videojs>;\ninterface CustomPlayerProps {\n  url: string;\n  videoRef: React.RefObject<HTMLVideoElement>;\n  videojsRef: React.MutableRefObject<VideoJsPlayer | null> | null;\n  setPlayPermission: (playPermission: boolean) => void;\n  setPlaying: (isPlay: boolean) => void;\n  playing: boolean;\n  setPlayed: (progress: number) => void;\n  played: number;\n  isFullscreen: boolean;\n  setIsFullscreen: (isFull: boolean) => void;\n  isSlice: boolean;\n  videoTime: number;\n}\n\nconst CustomPlayer: React.FC<CustomPlayerProps> = ({\n  url,\n  videoRef,\n  videojsRef,\n  setPlayPermission,\n  setPlaying,\n  playing,\n  setPlayed,\n  played,\n  isFullscreen, \n  setIsFullscreen,\n  isSlice,\n  videoTime\n}) => {\n  const dispatch: AppDispatch = useDispatch();\n  const { userInfo, checkUserOwnProduct } = useUserInfo();\n  const videoInfo = useSelector(\n    (state: RootState) => state.video.videoInfoData\n  );\n  const videoUrl = useSelector((state: RootState) => state.video.videoUrl);\n  const margueeHeight = useSelector((state: RootState) => state.init.marqueeHeight);\n  const appbarHeight = useSelector((state: RootState) => state.init.appbarHeight);\n  const init = useSelector((state: RootState) => state.init.init);\n  const player = useSelector((state: RootState) => state.init.player);\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [modalContent, setModalContent] = useState(\"\");\n  const [isPlanSelectionOpen, setIsPlanSelectionOpen] = useState(false);\n  const [rechargeGuideModalOpen, setRechargeGuideModalOpen] = useState(false);\n  const [rechargeGuideMsg, setRechargeGuideMsg] = useState(\"\");\n\n  const handle2PlanSelection = () => {\n    const uuid = videoInfo?.data?.uuid;\n    setRechargeGuideModalOpen(false);\n    setIsPlanSelectionOpen(true);\n  };\n  const buttons = useMemo(\n    () => [\n      <Button\n        className=\"button-full active mt-1 w-1/3\"\n        type=\"button\"\n        onClick={() => {\n          navigate(\"/app/recharge\");\n        }}\n      >\n        前往加值\n      </Button>,\n      <Button\n        className=\"button-full active mt-1 w-1/3\"\n        type=\"button\"\n        onClick={handle2PlanSelection}\n      >\n        使用票券點數\n      </Button>,\n    ],\n    []\n  );\n\n  const navigate = useNavigate();\n\n  const handleOpen = () => setIsOpen(true);\n  const handleClose = () => setIsOpen(false);\n  const handleConfirm = () => {\n    navigate(\"/app/Recharge\");\n  };\n  const handleCancel = () => {\n    setIsOpen(false);\n  };\n\n  const handleButtons = [\n    <Button\n      className=\"button-full active mt-1 w-1/3\"\n      type=\"button\"\n      onClick={handleConfirm}\n    >\n      確認\n    </Button>,\n    <Button\n      className=\"button-full active mt-1 w-1/3\"\n      type=\"button\"\n      onClick={handleCancel}\n    >\n      取消\n    </Button>,\n  ];\n\n  useEffect(() => {\n    dispatch(setVideoUrl(\"\"));\n  }, [videoInfo?.data?.uuid]);\n\n\n  const handlePlayPause = () => {\n    if (\n      userInfo &&\n      userInfo.data &&\n      Number(userInfo.code) === 0 &&\n      Object.keys(userInfo.data).length > 0 &&\n      videoInfo\n    ) {\n      const item = videoInfo?.data.cuts[0];\n      if (item) {\n        dispatch(\n          getMv({\n            num: videoInfo.data.uuid,\n            ms_id: item.ms_id,\n            file_prefix: item.file_prefix,\n            start: item.start,\n            end: Number(item.end),\n            cat_id: Number(item.cat_id),\n            quality: Number(videoInfo.data.qualitys.split(',')[0]),\n            token: item.token,\n            playall: isSlice ? 0 : 1,\n          })\n        )\n          .then((result) => {\n            const payload = result.payload;\n            if (payload.error) {\n              if (videoInfo) {\n                const uuid = videoInfo?.data.uuid;\n                if (uuid) {\n                  setRechargeGuideMsg(payload.error);\n                  setRechargeGuideModalOpen(true);\n                }\n              }\n            } else {\n              setPlayPermission(true);\n              setPlaying(true);\n            }\n          })\n          .catch((error) => {\n            console.log(\"getMv exception: \", error);\n          });\n      }\n    } else {\n      navigate(\"/app/login\");\n    }\n  };\n\n  //const playerRef = useRef<ReactPlayer | null>(null); // 播放器引用\n  const playerContainerRef = useRef<HTMLDivElement | null>(null); // 容器引用\n\n  const [isMuted, setIsMuted] = useState(false); // 靜音狀態\n  const [playbackRate, setPlaybackRate] = useState(1); // 播放速度\n  const [seeking, setSeeking] = useState(false); // 是否正在拖動進度條\n  const [platform, setPlatform] = React.useState<string | null>(null);\n\n  // 快轉或倒轉\n  const handleSeek = (seconds: number) => {\n    if (videojsRef?.current) {\n      const video = videojsRef.current;\n      const currentTime = video.currentTime(); // 取得當前播放時間\n      const duration = video.duration();\n      if (isValidNumber(currentTime) && isValidNumber(duration)) {\n        video.currentTime(currentTime + seconds); // 將播放時間往後或往前調整\n        setPlayed(parseFloat((currentTime / duration).toFixed(2)));\n      }\n    }\n    if (videoRef.current) {\n      const video = videoRef.current;\n      const currentTime = video.currentTime; // 取得當前播放時間\n      video.currentTime = currentTime + seconds; // 將播放時間往後或往前調整\n      setPlayed(parseFloat((video.currentTime / video.duration).toFixed(2)));\n    }\n  };\n  // 播放速度切換\n  const handlePlaybackRateChange = (rate: number) => {\n    setPlaybackRate(rate);\n  };\n  // 當播放器進度更新時觸發\n  const handleProgress = (currentTime: number, duration: number) => {\n    if (!seeking) {\n      setPlayed(parseFloat((currentTime / duration).toFixed(2))); // 更新播放進度\n    }\n  };\n\n  const [isVideoControlShow, setIsVideoControlShow] = useState(false);\n\n  // 切換顯示狀態的函數\n  const handleScreenClick = () => {\n    setIsVideoControlShow(!isVideoControlShow);\n  };\n\n  const [currentTime, setCurrentTime] = useState<number>(0);\n\n  useEffect(() => {\n    const handleTimeUpdate = () => {\n      if (videoRef.current) {\n        setPlayed(\n          parseFloat(\n            (videoRef.current.currentTime / videoRef.current.duration).toFixed(\n              2\n            )\n          )\n        );\n      }\n    };\n\n    videoRef.current?.addEventListener(\"timeupdate\", handleTimeUpdate);\n\n    return () => {\n      videoRef.current?.removeEventListener(\"timeupdate\", handleTimeUpdate);\n    };\n  }, [videoRef.current]);\n\n  useEffect(() => {\n    if (!videojsRef) return;\n\n    const handleTimeUpdate = () => {\n      if ( videojsRef.current) {\n        const currentTime = videojsRef.current.currentTime();\n        const duration = videojsRef.current.duration();\n        if (isValidNumber(currentTime) && isValidNumber(duration)) {\n          setPlayed(\n            parseFloat(\n              (currentTime / duration).toFixed(\n                2\n              )\n            )\n          );\n        }\n      }\n    };\n\n    videojsRef.current?.on(\"timeupdate\", handleTimeUpdate);\n\n    return () => {\n      videojsRef.current?.off(\"timeupdate\", handleTimeUpdate);\n    };\n  }, [videojsRef?.current]);\n\n  // 偵測使用者裝置平台\n    React.useEffect(() => {\n      const userAgent = navigator.userAgent.toLowerCase();\n  \n      if (\n        userAgent.indexOf(\"iphone\") > -1 ||\n        userAgent.indexOf(\"ipod\") > -1 ||\n        userAgent.indexOf(\"ipad\") > -1\n      ) {\n        setPlatform(\"iOS\");\n      } else if (userAgent.indexOf(\"android\") > -1) {\n        setPlatform(\"Android\");\n      } else {\n        setPlatform(\"Unknown\");\n      }\n    }, []);\n\n    useEffect(() => {\n      console.log(\"videoPlayer: \", videoUrl);\n      console.log(\"videoPlayer: \", isVideoControlShow);\n    }, [videoUrl, isVideoControlShow])\n\n  return (\n    <>\n      <div \n        className={`${styles[\"player-wrapper\"]} aspect[1.49]`}\n        style={{ marginTop: `${platform !== \"iOS\" ? margueeHeight : 0}px` }}\n      >\n        <div\n          ref={playerContainerRef}\n          className={`${styles['video-container']} ${isFullscreen ? styles['full-screen'] : \"\"}`}\n          style={{zIndex: \"300\"}}\n          onClick={handleScreenClick}\n        >\n          {!videoUrl && (\n            isExclusiveVideo(videoInfo) ? (\n              <div \n                className=\"flex justify-center items-center\"\n                onClick={handlePlayPause}\n                style={{\n                  position: \"absolute\",\n                  zIndex: 10,\n                  height: \"4rem\",\n                  width: \"4rem\",\n                  top: \"50%\",\n                  left: \"50%\",\n                  transform: \"translate(-50%, -50%)\",\n                  background: \"linear-gradient(45deg, #050202, #213d28db)\",\n                  boxShadow: \"inset 3px -3px 5px #044b056b, 3px 3px 60px #c2db93\",\n                  borderRadius: \"50%\",\n                  border: \"2px solid #baffcf41\"\n                }}\n              >\n                <PlayArrowRounded\n                  sx={{\n                    fontSize: \"4rem\",\n                    color: \"rgb(95 215 0)\"\n                  }}\n                />\n              </div>\n\n            ) : (\n              <PlayCircle\n                onClick={handlePlayPause}\n                style={{\n                  position: \"absolute\",\n                  zIndex: 20,\n                  fontSize: \"5rem\",\n                  top: \"50%\",\n                  left: \"50%\",\n                  transform: \"translate(-50%, -50%)\",\n                }}\n              />\n            )\n          )}\n\n          {videoUrl ? (\n              videoInfo?.data.tag_vr ? (\n                <div\n                  onTouchStart={(e) => {\n                    e.stopPropagation(); // 允許點擊事件傳遞\n                    handleScreenClick();\n                  }} \n                 style={isFullscreen ? { width: '100%', height: '100%' } : { width: '100%', height: '100%' }}>\n                  <VRScene \n                    ref={videoRef}\n                    src={videoUrl ?? \"\"}\n                    width=\"100%\"\n                    height=\"100%\"\n                    playing={playing}\n                    muted={isMuted}\n                    controls={false}\n                    playbackRate={playbackRate}\n                    onProgress={() => handleProgress}\n                    isFullscreen={isFullscreen}\n                    onShowControlBtn={handleScreenClick}\n                  />\n                </div>\n              ) : (\n                <div\n                  style={{ width: '100%', height: '100%' }}\n                  onTouchStart={(e) => {\n                    e.stopPropagation(); // 允許點擊事件傳遞\n                    handleScreenClick();\n                  }} \n                >\n                  {player === \"JW\" && (\n                    <HlsPlayer\n                      ref={videoRef}\n                      src={videoUrl ?? \"\"}\n                      width=\"100%\"\n                      height=\"100%\"\n                      playing={playing}\n                      muted={isMuted}\n                      controls={false}\n                      playbackRate={playbackRate}\n                      onProgress={() => handleProgress}\n                      isFullscreen={isFullscreen}\n                    />\n                  )}\n                  {player === \"VideoJS\" && (\n                    <VideoJSPlayer\n                      ref={videojsRef}\n                      src={videoUrl ?? \"\"}\n                      width=\"100%\"\n                      height=\"100%\"\n                      playing={playing}\n                      muted={isMuted}\n                      controls={false}\n                      playbackRate={playbackRate}\n                      onProgress={() => handleProgress}\n                      isFullscreen={isFullscreen}\n                      videoTime={videoTime}\n                    />\n                  )}\n                  {player === \"Plyr\" && (\n                    <PlyrPlayer\n                      ref={videoRef}\n                      src={videoUrl ?? \"\"}\n                      width=\"100%\"\n                      height=\"100%\"\n                      playing={playing}\n                      muted={isMuted}\n                      controls={false}\n                      playbackRate={playbackRate}\n                      onProgress={() => handleProgress}\n                      isFullscreen={isFullscreen}\n                    />\n                  )}\n                </div>\n              )\n          ) : (\n              <img\n                loading=\"lazy\"\n                src={`${init?.img_host}/preview/80/b/${videoInfo?.data?.uuid}-800.jpg`}\n                alt={\"Video thumbnail\"}\n                className={ `w-full h-full ${isUs(videoInfo) ? \"object-contain\" : \"object-cover\"}` }\n                style={{ }}\n                onError={(e) => {\n                  (e.target as HTMLImageElement).onerror = null; // 防止無限觸發\n                  (\n                    e.target as HTMLImageElement\n                  ).src = require(\"../../../images/qc-default-img.jpg\"); // 使用本地圖片\n                }}\n              />\n          )}\n          {/* 自定義控制列 */}\n          {videoUrl && isVideoControlShow && (\n            <>\n              <div \n                className=\"absolute flex justify-center items-center gap-x-10\"\n                style={{\n                  position: \"absolute\",\n                  top: \"50%\",\n                  left: \"50%\",\n                  transform: \"translate(-50%, -50%)\",\n                  width: \"50%\",\n                }}\n                onClick={(event) => {\n                  event.stopPropagation(); // 阻止事件冒泡\n                }}\n              > \n                <BackwardButton handleSeek={handleSeek} />\n                <PlayPauseButton playing={playing} setPlaying={setPlaying} />\n                <ForwardButton handleSeek={handleSeek} />\n              </div>\n\n              {/*底端控制項*/}\n\n              <div\n                className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-b from-transparent to-black p-0 pb-2 flex flex-col\"\n                onClick={(event) => {\n                  event.stopPropagation(); // 阻止事件冒泡\n                }}\n              >\n                <div className=\"flex items-center\">\n                  {/* 播放進度條 */}\n                  <div className=\"flex-1 mx-4\">\n                    <ProgressBar\n                      playerRef={videoRef}\n                      videojsRef={videojsRef}\n                      setSeeking={setSeeking}\n                      setPlayed={setPlayed}\n                      played={played}\n                      isSlice={isSlice}\n                    />\n                  </div>\n                  <div className=\"flex gap-x-3\">\n                    <FullScreenButton \n                      playerContainerRef={playerContainerRef} \n                      isFullscreen={isFullscreen} \n                      setIsFullscreen={setIsFullscreen} \n                    />\n                    <MuteButton isMuted={isMuted} setIsMuted={setIsMuted} />\n                    <SettingsButton\n                      playbackRate={playbackRate}\n                      handlePlaybackRateChange={handlePlaybackRateChange}\n                    />\n                  </div>\n                </div>\n\n                {/* 按鈕控制 */}\n              </div>\n            </>\n          )}\n        </div>\n        <Modal\n          open={isOpen}\n          onClose={handleClose}\n          content={[modalContent]}\n          buttons={handleButtons}\n        />\n        {videoInfo && videoInfo?.data?.point && (\n          <PlanSelection\n            open={isPlanSelectionOpen}\n            setIsPlanSelectionOpen={setIsPlanSelectionOpen}\n            costPoint={Number(videoInfo.data.point)}\n            type=\"videoOnlineTicket\"\n          />\n        )}\n        <Modal\n          open={rechargeGuideModalOpen}\n          onClose={() => setRechargeGuideModalOpen(false)}\n          content={[<div className=\"p-6 text-md\">{rechargeGuideMsg}</div>]}\n          buttons={buttons}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default CustomPlayer;\n","import { useTranslation } from \"react-i18next\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"../../store\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getMv, pointToMv, setMvPurchaseInfo, setVideoUrl } from \"../../store/videoSlice\";\nimport { showCustomToast } from \"../CustomToast\";\nimport { PurchaseInfo } from \"../../type/videoType\";\nimport PlanSelection from \"../Modal/PlanSelection\";\nimport defaultPng from \"../../images/qc-default-img.jpg\"\nimport videojs from 'video.js';\nimport { isValidNumber } from \"../../utils/helper\";\n\ntype VideoJsPlayer = ReturnType<typeof videojs>;\n\ninterface PartClipsParam {\n  videoRef: React.RefObject<HTMLVideoElement>;\n  videojsRef: React.MutableRefObject<VideoJsPlayer | null> | null;\n  setPlayed: (progress: number) => void;\n  setPlaying: (isPlaying: boolean) => void;\n  isSlice: boolean;\n  setVideoTime: (time: number) => void;\n}\n\nconst PartClips: React.FC<PartClipsParam> = ({ videoRef, videojsRef, setPlayed , setPlaying, isSlice, setVideoTime }) => {\n    const { t } = useTranslation();\n    const videoInfo = useSelector((state: RootState) => state.video.videoInfoData?.data);\n    const userInfo = useSelector((state: RootState) => state.userInfo.userInfoData?.data);\n    const navigate = useNavigate();\n    const dispatch:AppDispatch = useDispatch();\n    const host = 'https://cdn-mso6.vdosrvs.com'; \n    const [currentIndex, setCurrentIndex] = useState<number>(0);\n    const [start, setStart] = useState<number>(0);\n    const loadedCutsRef = useRef<Record<string, true>>({});\n    const [seekAndPlay, setSeekAndPlay] = useState<boolean>(false);\n\n    const [isPlanSelectionOpen, setIsPlanSelectionOpen] = useState(false);\n\n    //useEffect(() => {\n    //  if (videoRef.current && videoRef.current.currentTime >= 600) {\n    //    console.log(\"aaa\");\n    //    //handleCuts(0, currentIndex+1);\n    //    setTimeout(() => {\n    //      handleCuts(0, currentIndex+1);\n    //    }, 3000);\n    //  }\n    //}, [videoRef.current?.currentTime])\n    useEffect(() => {\n      const video = videoRef.current;\n      if (!video) return;\n    \n      const handleEnded = () => {\n        console.log('影片播完了');\n        console.log(currentIndex);\n        handleCuts(0, currentIndex);\n      };\n      \n      video.addEventListener('ended', handleEnded);\n    \n      return () => {\n        video.removeEventListener('ended', handleEnded);\n      };\n    }, [videoRef.current,currentIndex]);\n\n    useEffect(() => {\n      const video = videojsRef?.current;\n      if (!video) return;\n    \n      const handleEnded = () => {\n        console.log('影片播完了');\n        console.log(currentIndex);\n        handleCuts(0, currentIndex);\n      };\n      \n      video.on('ended', handleEnded);\n    \n      return () => {\n        video.off('ended', handleEnded);\n      };\n    }, [videojsRef?.current, currentIndex]);\n\n    const handleCuts = (start: number, index: number) => {\n      setVideoTime(0);\n      setPlaying(false);\n      if (userInfo && typeof userInfo === \"object\" && Object.keys(userInfo).length > 0 && videoInfo) {\n        const item = videoInfo?.cuts[index];\n        if (item) {\n          setStart(start);\n          setCurrentIndex(index+1);\n          let cacheKey = `${videoInfo.uuid}`;\n          if (loadedCutsRef.current[cacheKey] && !isSlice) {\n            setSeekAndPlay(true);\n            return;\n          }\n\n          dispatch(getMv({\n            num: videoInfo.uuid,\n            ms_id: item.ms_id,\n            file_prefix: item.file_prefix,\n            start: item.start,\n            end: Number(item.end),\n            cat_id: Number(item.cat_id),\n            quality: Number(videoInfo.qualitys.split(',')[0]),\n            token: item.token,\n            playall: isSlice ? 0 : 1\n          }))\n          .then((result) => {\n            const payload = result.payload as { error: boolean };\n            if (payload.error) {\n              if (videoInfo) {\n                const uuid = videoInfo?.uuid;\n                if (uuid) {\n                  dispatch(pointToMv({\n                    num: uuid,\n                  }))\n                    .then((result) => {\n                      if (result.payload.result === 'ok') {\n                        showCustomToast( result.payload.result_msg, 'error');\n                      } else if (!result.payload.error) {\n                        dispatch(setMvPurchaseInfo(result.payload as PurchaseInfo));\n                        setIsPlanSelectionOpen(true);\n                      }\n                    })\n                    .catch((error) => {\n                      console.error('Fetch failed:', error);\n                    });\n                }\n              }\n            } else {\n              if (!isSlice) loadedCutsRef.current[cacheKey] = true;\n              setSeekAndPlay(true);\n            } \n            \n          })\n          .catch((error) => {\n            console.log('getMv exception: ', error)\n          })\n        }\n      } else {\n        navigate('/app/login');\n      }\n    }\n\n    useEffect(() => {\n      if (seekAndPlay) {\n        if (!isSlice) {\n          setPlaying(true);\n          if (setVideoTime) {\n            console.log(\"start: \", start);\n            setVideoTime(start);\n          }\n          if (videoRef && videoRef.current) {\n            const video = videoRef.current;\n            // 检查视频是否可以播放\n            if (video.readyState >= 2) {\n              // 视频已加载，可以直接设置播放时间\n              setTimeout(() => {\n                video.play().then(() => {\n                  setPlaying(true);\n                  video.currentTime = start; // 设置开始时间\n                  setPlayed(parseFloat((video.currentTime / video.duration).toFixed(2))); // 更新播放进度\n                }).catch((error) => {\n                  console.error(\"播放失败:\", error);\n                });\n              }, 100);\n            } else {\n              // 如果视频未加载完成，监听 loadedmetadata 事件后再设置时间\n              const handleLoadedMetadata = () => {\n                video.currentTime = start; // 设置开始时间\n                setPlayed(parseFloat((video.currentTime / video.duration).toFixed(2))); // 更新播放进度\n                video.removeEventListener(\"loadedmetadata\", handleLoadedMetadata); // 移除事件监听\n              };\n        \n              video.addEventListener(\"loadedmetadata\", handleLoadedMetadata);\n        \n              // 确保开始播放（Safari autoplay 需要用户交互）\n              setTimeout(() => {\n                video.play().then(() => {\n                  setPlaying(true);\n                }).catch((error) => {\n                  console.error(\"播放失败:\", error);\n                });\n              }, 100);\n            }\n          } \n          \n        } else {\n          setPlaying(true);\n          if (videoRef && videoRef.current) {\n            const video = videoRef.current;\n            setTimeout(() => {\n              video.play().then(() => {\n                setPlaying(true);\n              }).catch((error) => {\n                console.error(\"播放失败:\", error);\n              })\n            }, 100);\n          }\n        }\n        setSeekAndPlay(false);\n      }\n    }, [seekAndPlay]);\n\n    useEffect(() => {\n      if (!isSlice) {\n        loadedCutsRef.current = {};\n      }\n    }, [isSlice])\n\n    return (\n      <div>\n        <div className=\"flex flex-wrap px-2 pb-2\">\n          {videoInfo && videoInfo.cuts.map((item:any, index:number) => (\n            index !== 0 && (\n              <div key={index} className=\"w-1/2 p-2\" onClick={()=>handleCuts(item.start, index)}>\n                <div\n                  className=\"relative w-full\"\n                  style={{ height: \"86%\" }}\n                >\n                  <div \n                    style={{\n                    display: \"block\",\n                    aspectRatio: \"430 / 242\",\n                    width: \"100%\", // 或者設定固定寬度\n                  }}>\n                    <img\n                      loading=\"lazy\"\n                      src={`${host}${item.img_path}`}\n                      alt={`片段${index}` || \"Video thumbnail\"}\n                      className=\"object-cover w-full h-full\"\n                      onError={(e) => {\n                        (e.target as HTMLImageElement).onerror = null; // 防止無限觸發\n                        (\n                          e.target as HTMLImageElement\n                        ).src = defaultPng; // 使用本地圖片\n                        (e.target as HTMLImageElement).style.objectPosition = \"center\"; // 圖片置中\n                      }}\n                    />\n                  </div>\n                  <div className=\"text-left mt-1 text-sm flex-shrink-0 line-clamp-1\">{`${t('片段')}${index}`}</div>\n                </div>\n              </div>\n            )\n          ))}\n        </div>\n        <PlanSelection\n          open={isPlanSelectionOpen}\n          setIsPlanSelectionOpen={setIsPlanSelectionOpen}\n          costPoint={Number(videoInfo!.point)}  \n          type={`videoOnlineTicket`}\n        />\n      </div>\n    );\n  }\n  \n  export default PartClips;","import { useState, useEffect, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nimport AppBar from \"../../components/AppBar\";\nimport VideoPlayer from \"../../components/Video/VideoPlayer\";\nimport Description from \"../../components/Description\";\nimport BasicTabs from \"../../components/BasicTabs\";\nimport VideoMap from \"../../components/Video/VideoMap\";\nimport VipButton from \"../../components/AppBar/VipButton\";\nimport VideoToolbar from \"../../components/Video/VideoToolbar\";\nimport Loading from \"../../components/Loading\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"../../store\";\nimport { fetchVideoInfo, setVideoUrl } from \"../../store/videoSlice\";\n\nimport PartClips from \"../../components/PartClips\";\nimport ScrollToTopBtn from \"../../components/ScrollToTopBtn\";\nimport { isFulfilled } from \"@reduxjs/toolkit\";\nimport Button from \"../../components/Button\";\nimport {isExclusiveVideo, getFontClass } from \"../../utils/helper\";\nimport videojs from 'video.js';\n\nfunction Video() {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const params = new URLSearchParams(location.search);\n  const uuid = params.get(\"uuid\") || \"\";\n  const cate = params.get(\"cate\") || \"\";\n  const mode = params.get(\"mode\") || \"\";\n  const navigate = useNavigate();\n\n  const dispatch: AppDispatch = useDispatch();\n  const videoInfo = useSelector((state: RootState) => state.video.videoInfoData);\n  const loading = useSelector((state: RootState) => state.video.loading);\n  const videoList = useSelector((state: RootState) => state.video.videoList);\n  const category = useSelector((state: RootState) => state.category.category);\n  const language = useSelector((state: RootState) => state.init.language);\n  const init = useSelector((state: RootState) => state.init.init);\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const videojsRef = useRef<ReturnType<typeof videojs> | null>(null);\n  const accountInfo = useSelector((state: RootState) => state.userInfo.userInfoData);\n  const marqueeHeight = useSelector((state: RootState) => state.init.marqueeHeight);\n  const appbarHeight = useSelector((state: RootState) => state.init.appbarHeight);\n  const [isVip, setVip] = useState(false);\n  const [playPermission, setPlayPermission] = useState<boolean>(false);\n\n  const imageHeightRef = useRef<number>(0); // 用於儲存圖片高度\n\n  const [playing, setPlaying] = useState<boolean>(false);\n  const [played, setPlayed] = useState(0); // 播放進度 (0 ~ 1)\n  const [isFullscreen, setIsFullscreen] = useState<boolean>(false);\n  const [platform, setPlatform] = useState<string | null>(null);\n  const [isSlice, setIsSlice] = useState<boolean>(false);\n  const [videoTime, setVideoTime] = useState<number>(0);\n\n  useEffect(() => {\n    const calculateImageHeight = () => {\n      const platform = /iphone|ipod|ipad/i.test(navigator.userAgent)\n        ? \"iOS\"\n        : \"Other\";\n      const screenWidth = window.innerWidth;\n\n      // 計算 AppBar 的 paddingBottom\n      const appBarPaddingBottom = platform !== \"iOS\" ? screenWidth * 0.08 : 0;\n      imageHeightRef.current =\n        platform !== \"iOS\"\n          ? screenWidth * 0.68 - appBarPaddingBottom\n          : screenWidth * 0.61 - appBarPaddingBottom;\n\n      document.documentElement.style.setProperty(\n        \"--image-height\",\n        `${imageHeightRef.current}px`\n      );\n    };\n\n    calculateImageHeight(); // 初始計算\n    window.addEventListener(\"resize\", calculateImageHeight); // 視窗調整時重新計算\n\n    return () => {\n      window.removeEventListener(\"resize\", calculateImageHeight);\n    };\n  }, []);\n\n  useEffect(() => {\n    const currentUnixTime = Math.floor(Date.now() / 1000);\n    if (\n      accountInfo?.code === 0 &&\n      (Number(accountInfo?.data.category_exp) > currentUnixTime ||\n        Number(accountInfo?.data.category2_exp) > currentUnixTime)\n    ) {\n      setVip(true);\n    } else {\n      setVip(false);\n    }\n  });\n\n  useEffect(() => {\n    if (uuid && uuid !== \"\") {\n      dispatch(fetchVideoInfo(uuid)); // 每次進入頁面時檢查是否需要更新廣告\n    }\n  }, [dispatch, uuid]);\n\n  // uuid變化時自動滾到頁面頂部\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [uuid]);\n\n  const tabContent = [\n    { key: \"詳情\", label: t(\"詳情\"), content: <Description type=\"video\" /> },\n    {\n      key: \"影片分段\",\n      label: t(\"影片分段\"),\n      content: (\n        <>\n          <div className=\"flex w-full p-5 space-x-2\">\n            <Button\n              className={`button-full mt-1 w-1/2 ${isSlice ? \"secondary\" : \"active\"}`}\n              type=\"button\"\n              onClick={()=>{\n                setIsSlice(false);\n                dispatch(setVideoUrl(\"\"));\n                setPlayed(0);\n                setPlaying(false);\n              }}\n            >\n              {t(\"全片\")}\n            </Button>\n            <Button\n              className={`button-full mt-1 w-1/2 ${isSlice ? \"active\" : \"secondary\"}`}\n              type=\"button\"\n              onClick={()=>{\n                setIsSlice(true);\n                dispatch(setVideoUrl(\"\"));\n                setVideoTime(0);\n                setPlayed(0);\n                setPlaying(false);\n              }}\n            >\n              {t(\"分段\")}\n            </Button>\n          </div>\n          <PartClips\n            videoRef={videoRef}\n            videojsRef={videojsRef}\n            setPlayed={setPlayed}\n            setPlaying={setPlaying}\n            isSlice={isSlice}\n            setVideoTime={setVideoTime}\n          />\n        </>\n      ),\n    },\n  ];\n\n  function toGetMorePage() {\n    if (mode === \"map\") {\n      navigate(`/app`, { state: { categoryName: cate } });\n    } else {\n      const config = {\n        cate: cate,\n        title: cate,\n        mode: \"indexLayout\",\n      };\n      navigate(\"/app/section\", { state: config });\n    }\n  }\n\n  // 偵測使用者裝置平台\n  useEffect(() => {\n    const userAgent = navigator.userAgent.toLowerCase();\n\n    if (\n      userAgent.indexOf(\"iphone\") > -1 ||\n      userAgent.indexOf(\"ipod\") > -1 ||\n      userAgent.indexOf(\"ipad\") > -1\n    ) {\n      setPlatform(\"iOS\");\n    } else if (userAgent.indexOf(\"android\") > -1) {\n      setPlatform(\"Android\");\n    } else {\n      setPlatform(\"Unknown\");\n    }\n  }, []);\n\n  useEffect(() => {\n    console.log(\"platform: \", platform);\n    console.log(\"marqueeHeight: \", marqueeHeight);\n  }, [platform, marqueeHeight]);\n\n  return (\n    <div className={getFontClass(language)}>\n      {loading ? (\n        <div>\n          <Loading />\n        </div>\n      ) : (\n        <>\n          {!isFullscreen && <AppBar type=\"video\" home />}\n          <VideoPlayer\n            videoRef={videoRef}\n            videojsRef={videojsRef}\n            url=\"https://videos.pexels.com/video-files/2715412/2715412-uhd_2560_1440_30fps.mp4\"\n            setPlayPermission={setPlayPermission}\n            setPlaying={setPlaying}\n            playing={playing}\n            setPlayed={setPlayed}\n            played={played}\n            isFullscreen={isFullscreen}\n            setIsFullscreen={setIsFullscreen}\n            isSlice={isSlice}\n            videoTime={videoTime}\n          />\n          <div style={{ marginTop: `calc(${25}px + var(--image-height) + ${platform !== \"iOS\" ? marqueeHeight : 0}px)` }}>\n            {!isVip && !playPermission && (\n              <div\n                className=\"p-3 text-black flex items-center justify-between\"\n                style={ isExclusiveVideo(videoInfo) ? ({\n                  background:\n                    \"linear-gradient(45deg, rgb(32 97 8), rgb(11 88 3), rgb(0, 0, 0))\",\n                  }) : ({\n                    background:\n                      \"linear-gradient(45deg, #49265b, #212c49, #000000)\",\n                    })\n                }\n              >\n                <span className=\"text-white\">\n                  {t(\"CNY¥\")}\n                  <span className=\"text-lg font-bold\"> { isExclusiveVideo(videoInfo) ? \"121\" : \"97\" } </span>\n                  {t(\"/月 全館暢看!!!!\")}\n                </span>\n                <VipButton isExclusive={isExclusiveVideo(videoInfo) ?? false}/>\n              </div>\n            )}\n            <div\n              style={{\n                position: \"sticky\", // 確保區域固定在圖片和內容之間\n                top: `calc(${appbarHeight - 10}px + ${68}vw + ${marqueeHeight}px)`,\n                height: 24,\n                backgroundColor: \"#000\", // 黑色背景\n                zIndex: 9, // 確保分隔區域在內容上方但低於 AppBar 和圖片\n              }}\n            />\n            <div style={{ marginTop: -20 }}>\n              <BasicTabs tabs={tabContent} />\n            </div>\n            <VideoToolbar title={t(\"更多高清A片\")} loadMore={toGetMorePage} />\n            <VideoMap data={videoInfo?.data?.related_products} cate={cate} />\n          </div>\n        </>\n      )}\n      <ScrollToTopBtn />\n    </div>\n  );\n}\n\nexport default Video;\n","// src/hooks/useUserInfo.ts\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../store';\n\nconst useUserInfo = () => {\n  const userInfo = useSelector((state: RootState) => state.userInfo.userInfoData);\n\n  const checkUserOwnProduct = (uuid: string) => {\n      if (userInfo) {\n        return uuid in userInfo.data.has_products;\n      }\n  };\n\n  return { userInfo, checkUserOwnProduct };\n};\n\nexport default useUserInfo;\n"],"names":["ScrollToTopButton","isVisible","setIsVisible","useState","toggleVisibility","window","scrollY","useEffect","addEventListener","removeEventListener","_jsx","_Fragment","children","onClick","scrollToTop","scrollTo","top","behavior","className","FontAwesomeIcon","icon","faLongArrowUp","size","_ref","_selectItems$indexOf","id","uuid","title","imageUrl","preview","duration","actor","isLinkEnabled","selectItems","toggleSelectItem","vWidth","cate","mode","selectedIndex","indexOf","isSelected","imgRefs","React","orientation","setOrientation","t","useTranslation","useDispatch","current","forEach","img","style","objectPosition","CardContent","_jsxs","backgroundImage","defaultPng","backgroundSize","backgroundPosition","loading","src","alt","onLoad","e","currentTarget","naturalWidth","naturalHeight","onError","target","onerror","display","width","transform","transformOrigin","minHeight","ref","push","borderColor","backgroundColor","color","includes","Link","to","forwardRef","data","onReachBottom","currentPage","endPage","isSearch","lastPage","language","useSelector","state","init","isBottom","setIsBottom","observerRef","useRef","observer","IntersectionObserver","entries","isIntersecting","root","threshold","observe","unobserve","length","map","item","index","_getCategory","VideoCard","_id","img_host","switchName","formatSecondsToHMS","time","getCategory","alignment","setAlignment","value","ToggleButtonGroup","exclusive","onChange","handleAlignment","event","newAlignment","sx","justifyContent","ToggleButton","padding","borderBottom","label","toggleButtons","videoCount","filterComponent","loadMore","ToggleButtoms","LoadMore","onLoadMore","handlePlaybackRateChange","playbackRate","anchorEl","setAnchorEl","handleClose","open","Boolean","undefined","background","border","cursor","Settings","Popover","onClose","disablePortal","anchorOrigin","vertical","horizontal","List","ListItem","ListItemText","primary","rate","handleOptionClick","playing","setPlaying","borderRadius","Button","variant","handleClick","disableElevation","paddingLeft","paddingRight","Pause","fontSize","PlayArrow","playerContainerRef","isFullscreen","setIsFullscreen","handleToggleFullScreen","FullscreenExit","Fullscreen","isMuted","setIsMuted","toggleMute","prev","VolumeOff","VolumeUp","videojsRef","playerRef","setSeeking","setPlayed","played","isSlice","setLoading","_state$video$videoInf","video","videoInfoData","RailWrapper","styled","Box","_ref2","position","height","opacity","zIndex","transition","TinyText","Typography","fontWeight","letterSpacing","currentTime","setCurrentTime","_playerRef$current","handleTimeUpdate","parseFloat","toFixed","Math","ceil","Number","_playerRef$current2","intervalId","setInterval","tryBindTimeUpdate","player","isValidNumber","on","clearInterval","alignItems","Slider","step","min","max","onTouchStart","handleSeekTouchStart","onChangeCommitted","handleSeekCommitted","handleSeekChange","boxShadow","applyStyles","mt","muted","controls","onProgress","videoRef","hlsRef","isM3U8","useImperativeHandle","canPlayType","Hls","hls","loadSource","attachMedia","destroy","console","error","play","catch","pause","objectFit","playsInline","poster","onShowControlBtn","embedded","crossOrigin","loop","radius","rotation","geometry","type","handleSeek","FastRewind","FastForward","getMimeType","videoTime","videojs","p","load","_player$play","dispose","readyState","handleLoaded","off","one","plyrRef","isReady","setIsReady","isHLS","Plyr","log","speed","_videoInfo$data2","_videoInfo$data3","_videoInfo$data4","url","setPlayPermission","dispatch","userInfo","checkUserOwnProduct","useUserInfo","videoInfo","videoUrl","margueeHeight","marqueeHeight","appbarHeight","isOpen","setIsOpen","modalContent","setModalContent","isPlanSelectionOpen","setIsPlanSelectionOpen","rechargeGuideModalOpen","setRechargeGuideModalOpen","rechargeGuideMsg","setRechargeGuideMsg","handle2PlanSelection","_videoInfo$data","buttons","useMemo","navigate","useNavigate","handleButtons","handleConfirm","handleCancel","setVideoUrl","handlePlayPause","code","Object","keys","cuts","getMv","num","ms_id","file_prefix","start","end","cat_id","quality","qualitys","split","token","playall","then","result","payload","setPlaybackRate","seeking","platform","setPlatform","seconds","handleProgress","isVideoControlShow","setIsVideoControlShow","handleScreenClick","_videoRef$current","_videoRef$current2","_videojsRef$current","_videojsRef$current2","userAgent","navigator","toLowerCase","styles","marginTop","isExclusiveVideo","left","PlayArrowRounded","PlayCircle","tag_vr","stopPropagation","VRScene","HlsPlayer","VideoJSPlayer","PlyrPlayer","isUs","require","BackwardButton","PlayPauseButton","ForwardButton","ProgressBar","FullScreenButton","MuteButton","SettingsButton","Modal","content","point","PlanSelection","costPoint","setVideoTime","_state$userInfo$userI","userInfoData","currentIndex","setCurrentIndex","setStart","loadedCutsRef","seekAndPlay","setSeekAndPlay","handleEnded","handleCuts","cacheKey","pointToMv","showCustomToast","result_msg","setMvPurchaseInfo","setTimeout","handleLoadedMetadata","aspectRatio","img_path","_isExclusiveVideo","location","useLocation","params","URLSearchParams","search","get","videoList","category","accountInfo","isVip","setVip","playPermission","imageHeightRef","setIsSlice","calculateImageHeight","test","screenWidth","innerWidth","appBarPaddingBottom","document","documentElement","setProperty","currentUnixTime","floor","Date","now","category_exp","category2_exp","fetchVideoInfo","tabContent","key","Description","PartClips","getFontClass","Loading","AppBar","home","VideoPlayer","VipButton","isExclusive","BasicTabs","tabs","VideoToolbar","categoryName","VideoMap","related_products","ScrollToTopBtn","has_products"],"sourceRoot":""}